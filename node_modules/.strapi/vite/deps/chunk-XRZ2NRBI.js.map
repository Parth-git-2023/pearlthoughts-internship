{
  "version": 3,
  "sources": ["../../../../../packages/core/admin/admin/src/utils/users.ts"],
  "sourcesContent": ["import type { User } from '../features/Auth';\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * getDisplayName\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\n/**\r\n * Retrieves the display name of an admin panel user\r\n */\r\nconst getDisplayName = ({ firstname, lastname, username, email }: Partial<User> = {}): string => {\r\n  if (username) {\r\n    return username;\r\n  }\r\n\r\n  // firstname is not required if the user is created with a username\r\n  if (firstname) {\r\n    return `${firstname} ${lastname ?? ''}`.trim();\r\n  }\r\n\r\n  return email ?? '';\r\n};\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * getInitials\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\n/**\r\n * Retrieves the initials of the user (based on their firstname / lastname or their display name)\r\n */\r\nconst getInitials = (user: Partial<User> = {}): string => {\r\n  return user?.firstname && user?.lastname\r\n    ? `${user.firstname.substring(0, 1)}${user.lastname.substring(0, 1)}`\r\n    : getDisplayName(user)\r\n        .split(' ')\r\n        .map((name) => name.substring(0, 1))\r\n        .join('')\r\n        .substring(0, 1)\r\n        .toUpperCase();\r\n};\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * hashAdminUserEmail\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nconst hashAdminUserEmail = async (payload?: User) => {\r\n  if (!payload || !payload.email) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    return await digestMessage(payload.email);\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst bufferToHex = (buffer: ArrayBuffer) => {\r\n  return [...new Uint8Array(buffer)].map((b) => b.toString(16).padStart(2, '0')).join('');\r\n};\r\nconst digestMessage = async (message: string) => {\r\n  const msgUint8 = new TextEncoder().encode(message);\r\n  const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);\r\n\r\n  return bufferToHex(hashBuffer);\r\n};\r\n\r\nexport { getDisplayName, getInitials, hashAdminUserEmail };\r\n"],
  "mappings": ";AASA,IAAM,iBAAiB,CAAC,EAAE,WAAW,UAAU,UAAU,MAAM,IAAmB,CAAC,MAAc;AAC/F,MAAI,UAAU;AACZ,WAAO;AAAA,EACT;AAGA,MAAI,WAAW;AACb,WAAO,GAAG,SAAS,IAAI,YAAY,EAAE,GAAG,KAAK;AAAA,EAC/C;AAEA,SAAO,SAAS;AAClB;AASA,IAAM,cAAc,CAAC,OAAsB,CAAC,MAAc;AACxD,UAAO,6BAAM,eAAa,6BAAM,YAC5B,GAAG,KAAK,UAAU,UAAU,GAAG,CAAC,CAAC,GAAG,KAAK,SAAS,UAAU,GAAG,CAAC,CAAC,KACjE,eAAe,IAAI,EAChB,MAAM,GAAG,EACT,IAAI,CAAC,SAAS,KAAK,UAAU,GAAG,CAAC,CAAC,EAClC,KAAK,EAAE,EACP,UAAU,GAAG,CAAC,EACd,YAAY;AACrB;AAMA,IAAM,qBAAqB,OAAO,YAAmB;AACnD,MAAI,CAAC,WAAW,CAAC,QAAQ,OAAO;AAC9B,WAAO;AAAA,EACT;AAEA,MAAI;AACF,WAAO,MAAM,cAAc,QAAQ,KAAK;AAAA,EAC1C,SAAS,OAAO;AACd,WAAO;AAAA,EACT;AACF;AAEA,IAAM,cAAc,CAAC,WAAwB;AAC3C,SAAO,CAAC,GAAG,IAAI,WAAW,MAAM,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,SAAS,GAAG,GAAG,CAAC,EAAE,KAAK,EAAE;AACxF;AACA,IAAM,gBAAgB,OAAO,YAAoB;AAC/C,QAAM,WAAW,IAAI,YAAY,EAAE,OAAO,OAAO;AACjD,QAAM,aAAa,MAAM,OAAO,OAAO,OAAO,WAAW,QAAQ;AAEjE,SAAO,YAAY,UAAU;AAC/B;",
  "names": []
}
