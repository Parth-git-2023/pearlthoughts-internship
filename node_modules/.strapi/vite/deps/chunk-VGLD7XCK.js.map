{
  "version": 3,
  "sources": ["../../../../../packages/core/admin/admin/src/render.ts", "../../../../../packages/core/admin/admin/src/StrapiApp.tsx", "../../../../../packages/core/admin/admin/src/core/apis/CustomFields.ts", "../../../../../packages/core/admin/admin/src/core/apis/Plugin.ts", "../../../../../packages/core/admin/admin/src/core/apis/rbac.ts", "../../../../../packages/core/admin/admin/src/core/apis/router.tsx", "../../../../../packages/core/admin/admin/src/App.tsx", "../../../../../packages/core/admin/admin/src/components/LanguageProvider.tsx", "../../../../../packages/core/admin/admin/src/components/Theme.tsx", "../../../../../packages/core/admin/admin/src/components/Providers.tsx", "../../../../../packages/core/admin/admin/src/components/ErrorElement.tsx", "../../../../../packages/core/admin/admin/src/pages/NotFoundPage.tsx", "../../../../../packages/core/admin/ee/admin/src/pages/SettingsPage/constants.ts", "../../../../../packages/core/admin/admin/src/pages/Auth/components/ForgotPassword.tsx", "../../../../../packages/core/admin/admin/src/pages/Auth/components/ForgotPasswordSuccess.tsx", "../../../../../packages/core/admin/admin/src/pages/Auth/components/Oops.tsx", "../../../../../packages/core/admin/admin/src/pages/Auth/components/Register.tsx", "../../../../../packages/core/admin/admin/src/pages/Auth/components/ResetPassword.tsx", "../../../../../packages/core/admin/admin/src/pages/Auth/constants.ts", "../../../../../packages/core/admin/admin/src/pages/Auth/AuthPage.tsx", "../../../../../packages/core/admin/admin/src/pages/Settings/constants.ts", "../../../../../packages/core/admin/admin/src/router.tsx", "../../../../../packages/core/admin/admin/src/core/apis/Widgets.ts", "../../../../../packages/core/admin/admin/src/core/store/configure.ts", "../../../../../packages/core/admin/admin/src/core/utils/createHook.ts", "../../../../../packages/core/admin/admin/src/translations/languageNativeNames.ts", "../../../../../packages/core/admin/admin/src/components/DescriptionComponentRenderer.tsx", "../../../../../packages/core/admin/admin/src/hooks/useForceUpdate.ts", "../../../../../packages/core/admin/admin/src/hooks/useIsMounted.ts", "../../../../../packages/core/admin/admin/src/hooks/useThrottledCallback.ts", "../../../../../packages/core/admin/admin/src/utils/shims.ts", "../../../../../packages/core/admin/admin/src/hooks/useInjectReducer.ts", "../../../../../packages/core/admin/admin/src/utils/rulesEngine.ts"],
  "sourcesContent": ["/* eslint-disable no-undef */\r\nimport { createRoot } from 'react-dom/client';\r\n\r\nimport { StrapiApp, StrapiAppConstructorArgs } from './StrapiApp';\r\nimport { getFetchClient } from './utils/getFetchClient';\r\nimport { createAbsoluteUrl } from './utils/urls';\r\n\r\nimport type { Modules } from '@strapi/types';\r\n\r\ninterface RenderAdminArgs {\r\n  customisations: {\r\n    register?: (app: StrapiApp) => Promise<void> | void;\r\n    bootstrap?: (app: StrapiApp) => Promise<void> | void;\r\n    config?: StrapiAppConstructorArgs['config'];\r\n  };\r\n  plugins: StrapiAppConstructorArgs['appPlugins'];\r\n  features?: Modules.Features.FeaturesService['config'];\r\n}\r\n\r\nconst renderAdmin = async (\r\n  mountNode: HTMLElement | null,\r\n  { plugins, customisations, features }: RenderAdminArgs\r\n) => {\r\n  if (!mountNode) {\r\n    throw new Error('[@strapi/admin]: Could not find the root element to mount the admin app');\r\n  }\r\n\r\n  window.strapi = {\r\n    /**\r\n     * This ENV variable is passed from the strapi instance, by default no url is set\r\n     * in the config and therefore the instance returns you an empty string so URLs are relative.\r\n     *\r\n     * To ensure that the backendURL is always set, we use the window.location.origin as a fallback.\r\n     */\r\n    backendURL: createAbsoluteUrl(process.env.STRAPI_ADMIN_BACKEND_URL),\r\n    isEE: false,\r\n    isTrial: false,\r\n    telemetryDisabled: process.env.STRAPI_TELEMETRY_DISABLED === 'true',\r\n    future: {\r\n      isEnabled: (name: keyof NonNullable<Modules.Features.FeaturesConfig['future']>) => {\r\n        return features?.future?.[name] === true;\r\n      },\r\n    },\r\n    // @ts-expect-error – there's pollution from the global scope of Node.\r\n    features: {\r\n      SSO: 'sso',\r\n      AUDIT_LOGS: 'audit-logs',\r\n      REVIEW_WORKFLOWS: 'review-workflows',\r\n      /**\r\n       * If we don't get the license then we know it's not EE\r\n       * so no feature is enabled.\r\n       */\r\n      isEnabled: () => false,\r\n    },\r\n    projectType: 'Community',\r\n    flags: {\r\n      nps: false,\r\n      promoteEE: true,\r\n    },\r\n  };\r\n\r\n  const { get } = getFetchClient();\r\n\r\n  interface ProjectType extends Pick<Window['strapi'], 'flags'> {\r\n    isEE: boolean;\r\n    isTrial: boolean;\r\n    features: {\r\n      name: string;\r\n    }[];\r\n  }\r\n\r\n  try {\r\n    const {\r\n      data: {\r\n        data: { isEE, isTrial, features, flags },\r\n      },\r\n    } = await get<{ data: ProjectType }>('/admin/project-type');\r\n\r\n    window.strapi.isEE = isEE;\r\n    window.strapi.isTrialLicense = isTrial;\r\n    window.strapi.flags = flags;\r\n    window.strapi.features = {\r\n      ...window.strapi.features,\r\n      isEnabled: (featureName) => features.some((feature) => feature.name === featureName),\r\n    };\r\n    window.strapi.projectType = isEE ? 'Enterprise' : 'Community';\r\n  } catch (err) {\r\n    /**\r\n     * If this fails, we simply don't activate any EE features.\r\n     * Should we warn clearer in the UI?\r\n     */\r\n    console.error(err);\r\n  }\r\n\r\n  const app = new StrapiApp({\r\n    config: customisations?.config,\r\n    appPlugins: plugins,\r\n  });\r\n\r\n  await app.register(customisations?.register);\r\n  await app.bootstrap(customisations?.bootstrap);\r\n  await app.loadTrads(customisations?.config?.translations);\r\n\r\n  createRoot(mountNode).render(app.render());\r\n\r\n  if (\r\n    typeof module !== 'undefined' &&\r\n    module &&\r\n    'hot' in module &&\r\n    typeof module.hot === 'object' &&\r\n    module.hot !== null &&\r\n    'accept' in module.hot &&\r\n    typeof module.hot.accept === 'function'\r\n  ) {\r\n    module.hot.accept();\r\n  }\r\n\r\n  if (typeof import.meta.hot?.accept === 'function') {\r\n    import.meta.hot.accept();\r\n  }\r\n};\r\n\r\nexport { renderAdmin };\r\nexport type { RenderAdminArgs };\r\n", "import * as React from 'react';\r\n\r\nimport { darkTheme, lightTheme } from '@strapi/design-system';\r\nimport { User } from '@strapi/icons';\r\nimport invariant from 'invariant';\r\nimport isFunction from 'lodash/isFunction';\r\nimport merge from 'lodash/merge';\r\nimport pick from 'lodash/pick';\r\nimport { RouterProvider } from 'react-router-dom';\r\nimport { DefaultTheme } from 'styled-components';\r\n\r\nimport { ADMIN_PERMISSIONS_EE } from '../../ee/admin/src/constants';\r\n\r\nimport Logo from './assets/images/logo-strapi-2022.svg';\r\nimport { ADMIN_PERMISSIONS_CE, HOOKS } from './constants';\r\nimport { CustomFields } from './core/apis/CustomFields';\r\nimport { Plugin, PluginConfig } from './core/apis/Plugin';\r\nimport { RBAC, RBACMiddleware } from './core/apis/rbac';\r\nimport { Router, StrapiAppSetting, UnloadedSettingsLink } from './core/apis/router';\r\nimport { Widgets } from './core/apis/Widgets';\r\nimport { RootState, Store, configureStore } from './core/store/configure';\r\nimport { getBasename } from './core/utils/basename';\r\nimport { Handler, createHook } from './core/utils/createHook';\r\nimport {\r\n  THEME_LOCAL_STORAGE_KEY,\r\n  LANGUAGE_LOCAL_STORAGE_KEY,\r\n  ThemeName,\r\n  getStoredToken,\r\n} from './reducer';\r\nimport { getInitialRoutes } from './router';\r\nimport { languageNativeNames } from './translations/languageNativeNames';\r\n\r\nimport type { ReducersMapObject, Middleware } from '@reduxjs/toolkit';\r\n\r\nconst {\r\n  INJECT_COLUMN_IN_TABLE,\r\n  MUTATE_COLLECTION_TYPES_LINKS,\r\n  MUTATE_EDIT_VIEW_LAYOUT,\r\n  MUTATE_SINGLE_TYPES_LINKS,\r\n} = HOOKS;\r\n\r\ninterface StrapiAppConstructorArgs extends Partial<Pick<StrapiApp, 'appPlugins'>> {\r\n  config?: {\r\n    auth?: { logo: string };\r\n    head?: { favicon: string };\r\n    locales?: string[];\r\n    menu?: { logo: string };\r\n    notifications?: { releases: boolean };\r\n    theme?: { light: DefaultTheme; dark: DefaultTheme };\r\n    translations?: Record<string, Record<string, string>>;\r\n    tutorials?: boolean;\r\n  };\r\n}\r\n\r\ntype Translation = { data: Record<string, string>; locale: string };\r\ntype Translations = Array<Translation>;\r\n\r\ninterface StrapiAppPlugin {\r\n  bootstrap?: (\r\n    args: Pick<StrapiApp, 'addSettingsLink' | 'addSettingsLinks' | 'getPlugin' | 'registerHook'>\r\n  ) => void;\r\n  register: (app: StrapiApp) => void;\r\n  registerTrads?: (args: { locales: string[] }) => Promise<Translations>;\r\n}\r\n\r\ninterface InjectionZoneComponent {\r\n  Component: React.ComponentType;\r\n  name: string;\r\n  // TODO: in theory this could receive and forward any React component prop\r\n  // but in practice there only seems to be once instance, where `slug` is\r\n  // forwarded. The type needs to become either more generic or we disallow\r\n  // prop spreading and offer a different way to access context data.\r\n  slug: string;\r\n}\r\n\r\ninterface Component {\r\n  name: string;\r\n  Component: React.ComponentType;\r\n}\r\n\r\ninterface Field {\r\n  type: string;\r\n  Component: React.ComponentType;\r\n}\r\n\r\ninterface Library {\r\n  fields: Record<Field['type'], Field['Component']>;\r\n  components: Record<Component['name'], Component['Component']>;\r\n}\r\n\r\nclass StrapiApp {\r\n  appPlugins: Record<string, StrapiAppPlugin>;\r\n  plugins: Record<string, Plugin> = {};\r\n  hooksDict: Record<string, ReturnType<typeof createHook>> = {};\r\n\r\n  admin = {\r\n    injectionZones: {},\r\n  };\r\n\r\n  translations: StrapiApp['configurations']['translations'] = {};\r\n\r\n  configurations = {\r\n    authLogo: Logo,\r\n    head: { favicon: '' },\r\n    locales: ['en'],\r\n    menuLogo: Logo,\r\n    notifications: { releases: true },\r\n    themes: { light: lightTheme, dark: darkTheme },\r\n    translations: {},\r\n    tutorials: true,\r\n  };\r\n\r\n  /**\r\n   * APIs\r\n   */\r\n  rbac = new RBAC();\r\n  router: Router;\r\n  library: Library = {\r\n    components: {},\r\n    fields: {},\r\n  };\r\n  middlewares: Array<() => Middleware<object, RootState>> = [];\r\n  reducers: ReducersMapObject = {};\r\n  store: Store | null = null;\r\n  customFields = new CustomFields();\r\n  widgets = new Widgets();\r\n\r\n  constructor({ config, appPlugins }: StrapiAppConstructorArgs = {}) {\r\n    this.appPlugins = appPlugins || {};\r\n\r\n    this.createCustomConfigurations(config ?? {});\r\n\r\n    this.createHook(INJECT_COLUMN_IN_TABLE);\r\n    this.createHook(MUTATE_COLLECTION_TYPES_LINKS);\r\n    this.createHook(MUTATE_SINGLE_TYPES_LINKS);\r\n    this.createHook(MUTATE_EDIT_VIEW_LAYOUT);\r\n\r\n    this.router = new Router(getInitialRoutes());\r\n  }\r\n\r\n  addComponents = (components: Component | Component[]) => {\r\n    if (Array.isArray(components)) {\r\n      components.map((comp) => {\r\n        invariant(comp.Component, 'A Component must be provided');\r\n        invariant(comp.name, 'A type must be provided');\r\n\r\n        this.library.components[comp.name] = comp.Component;\r\n      });\r\n    } else {\r\n      invariant(components.Component, 'A Component must be provided');\r\n      invariant(components.name, 'A type must be provided');\r\n\r\n      this.library.components[components.name] = components.Component;\r\n    }\r\n  };\r\n\r\n  addFields = (fields: Field | Field[]) => {\r\n    if (Array.isArray(fields)) {\r\n      fields.map((field) => {\r\n        invariant(field.Component, 'A Component must be provided');\r\n        invariant(field.type, 'A type must be provided');\r\n\r\n        this.library.fields[field.type] = field.Component;\r\n      });\r\n    } else {\r\n      invariant(fields.Component, 'A Component must be provided');\r\n      invariant(fields.type, 'A type must be provided');\r\n\r\n      this.library.fields[fields.type] = fields.Component;\r\n    }\r\n  };\r\n\r\n  addMiddlewares = (middlewares: StrapiApp['middlewares']) => {\r\n    middlewares.forEach((middleware) => {\r\n      this.middlewares.push(middleware);\r\n    });\r\n  };\r\n\r\n  addRBACMiddleware = (m: RBACMiddleware | RBACMiddleware[]) => {\r\n    if (Array.isArray(m)) {\r\n      this.rbac.use(m);\r\n    } else {\r\n      this.rbac.use(m);\r\n    }\r\n  };\r\n\r\n  addReducers = (reducers: ReducersMapObject) => {\r\n    /**\r\n     * TODO: when we upgrade to redux-toolkit@2 and we can also dynamically add middleware,\r\n     * we'll deprecate these two APIs in favour of their hook counterparts.\r\n     */\r\n    Object.entries(reducers).forEach(([name, reducer]) => {\r\n      this.reducers[name] = reducer;\r\n    });\r\n  };\r\n\r\n  addMenuLink = (link: Parameters<typeof this.router.addMenuLink>[0]) =>\r\n    this.router.addMenuLink(link);\r\n\r\n  /**\r\n   * @deprecated use `addSettingsLink` instead, it internally supports\r\n   * adding multiple links at once.\r\n   */\r\n  addSettingsLinks = (sectionId: string, links: UnloadedSettingsLink[]) => {\r\n    invariant(Array.isArray(links), 'TypeError expected links to be an array');\r\n\r\n    this.router.addSettingsLink(sectionId, links);\r\n  };\r\n\r\n  /**\r\n   * @deprecated use `addSettingsLink` instead, you can pass a section object to\r\n   * create the section and links at the same time.\r\n   */\r\n  createSettingSection = (\r\n    section: Pick<StrapiAppSetting, 'id' | 'intlLabel'>,\r\n    links: UnloadedSettingsLink[]\r\n  ) => this.router.addSettingsLink(section, links);\r\n\r\n  addSettingsLink = (\r\n    sectionId: string | Pick<StrapiAppSetting, 'id' | 'intlLabel'>,\r\n    link: UnloadedSettingsLink\r\n  ) => {\r\n    this.router.addSettingsLink(sectionId, link);\r\n  };\r\n\r\n  async bootstrap(customBootstrap?: unknown) {\r\n    Object.keys(this.appPlugins).forEach((plugin) => {\r\n      const bootstrap = this.appPlugins[plugin].bootstrap;\r\n\r\n      if (bootstrap) {\r\n        bootstrap({\r\n          addSettingsLink: this.addSettingsLink,\r\n          addSettingsLinks: this.addSettingsLinks,\r\n          getPlugin: this.getPlugin,\r\n          registerHook: this.registerHook,\r\n        });\r\n      }\r\n    });\r\n\r\n    if (isFunction(customBootstrap)) {\r\n      customBootstrap({\r\n        addComponents: this.addComponents,\r\n        addFields: this.addFields,\r\n        addMenuLink: this.addMenuLink,\r\n        addReducers: this.addReducers,\r\n        addSettingsLink: this.addSettingsLink,\r\n        addSettingsLinks: this.addSettingsLinks,\r\n        getPlugin: this.getPlugin,\r\n        registerHook: this.registerHook,\r\n      });\r\n    }\r\n  }\r\n\r\n  createCustomConfigurations = (customConfig: NonNullable<StrapiAppConstructorArgs['config']>) => {\r\n    if (customConfig.locales) {\r\n      this.configurations.locales = [\r\n        'en',\r\n        ...(customConfig.locales?.filter((loc) => loc !== 'en') || []),\r\n      ];\r\n    }\r\n\r\n    if (customConfig.auth?.logo) {\r\n      this.configurations.authLogo = customConfig.auth.logo;\r\n    }\r\n\r\n    if (customConfig.menu?.logo) {\r\n      this.configurations.menuLogo = customConfig.menu.logo;\r\n    }\r\n\r\n    if (customConfig.head?.favicon) {\r\n      this.configurations.head.favicon = customConfig.head.favicon;\r\n    }\r\n\r\n    if (customConfig.theme) {\r\n      const darkTheme = customConfig.theme.dark;\r\n      const lightTheme = customConfig.theme.light;\r\n\r\n      if (!darkTheme && !lightTheme) {\r\n        console.warn(\r\n          `[deprecated] In future versions, Strapi will stop supporting this theme customization syntax. The theme configuration accepts a light and a dark key to customize each theme separately. See https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#theme-extension.`.trim()\r\n        );\r\n        merge(this.configurations.themes.light, customConfig.theme);\r\n      }\r\n\r\n      if (lightTheme) merge(this.configurations.themes.light, lightTheme);\r\n\r\n      if (darkTheme) merge(this.configurations.themes.dark, darkTheme);\r\n    }\r\n\r\n    if (customConfig.notifications?.releases !== undefined) {\r\n      this.configurations.notifications.releases = customConfig.notifications.releases;\r\n    }\r\n\r\n    if (customConfig.tutorials !== undefined) {\r\n      this.configurations.tutorials = customConfig.tutorials;\r\n    }\r\n  };\r\n\r\n  createHook = (name: string) => {\r\n    this.hooksDict[name] = createHook();\r\n  };\r\n\r\n  getAdminInjectedComponents = (\r\n    moduleName: string,\r\n    containerName: string,\r\n    blockName: string\r\n  ): InjectionZoneComponent[] => {\r\n    try {\r\n      // @ts-expect-error – we have a catch block so if you don't pass it correctly we still return an array.\r\n      return this.admin.injectionZones[moduleName][containerName][blockName] || [];\r\n    } catch (err) {\r\n      console.error('Cannot get injected component', err);\r\n\r\n      return [];\r\n    }\r\n  };\r\n\r\n  getPlugin = (pluginId: PluginConfig['id']) => this.plugins[pluginId];\r\n\r\n  async register(customRegister?: unknown) {\r\n    this.widgets.register([\r\n      {\r\n        icon: User,\r\n        title: {\r\n          id: 'widget.profile.title',\r\n          defaultMessage: 'Profile',\r\n        },\r\n        component: async () => {\r\n          const { ProfileWidget } = await import('./components/Widgets');\r\n          return ProfileWidget;\r\n        },\r\n        pluginId: 'admin',\r\n        id: 'profile-info',\r\n        link: {\r\n          label: {\r\n            id: 'global.profile.settings',\r\n            defaultMessage: 'Profile settings',\r\n          },\r\n          href: '/me',\r\n        },\r\n      },\r\n    ]);\r\n\r\n    Object.keys(this.appPlugins).forEach((plugin) => {\r\n      this.appPlugins[plugin].register(this);\r\n    });\r\n\r\n    if (isFunction(customRegister)) {\r\n      customRegister(this);\r\n    }\r\n  }\r\n\r\n  async loadAdminTrads() {\r\n    const adminLocales = await Promise.all(\r\n      this.configurations.locales.map(async (locale) => {\r\n        try {\r\n          const { default: data } = await import(`./translations/${locale}.js`);\r\n\r\n          return { data, locale };\r\n        } catch {\r\n          try {\r\n            const { default: data } = await import(`./translations/${locale}.json`);\r\n            return { data, locale };\r\n          } catch {\r\n            return { data: null, locale };\r\n          }\r\n        }\r\n      })\r\n    );\r\n\r\n    return adminLocales.reduce<{ [locale: string]: Record<string, string> }>((acc, current) => {\r\n      if (current.data) {\r\n        acc[current.locale] = current.data;\r\n      }\r\n\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  /**\r\n   * Load the application's translations and merged the custom translations\r\n   * with the default ones.\r\n   */\r\n  async loadTrads(customTranslations: Record<string, Record<string, string>> = {}) {\r\n    const adminTranslations = await this.loadAdminTrads();\r\n\r\n    const arrayOfPromises = Object.keys(this.appPlugins)\r\n      .map((plugin) => {\r\n        const registerTrads = this.appPlugins[plugin].registerTrads;\r\n\r\n        if (registerTrads) {\r\n          return registerTrads({ locales: this.configurations.locales });\r\n        }\r\n\r\n        return null;\r\n      })\r\n      .filter((a) => a);\r\n\r\n    const pluginsTrads = (await Promise.all(arrayOfPromises)) as Array<Translation[]>;\r\n    const mergedTrads = pluginsTrads.reduce<{ [locale: string]: Translation['data'] }>(\r\n      (acc, currentPluginTrads) => {\r\n        const pluginTrads = currentPluginTrads.reduce<{ [locale: string]: Translation['data'] }>(\r\n          (acc1, current) => {\r\n            acc1[current.locale] = current.data;\r\n\r\n            return acc1;\r\n          },\r\n          {}\r\n        );\r\n\r\n        Object.keys(pluginTrads).forEach((locale) => {\r\n          acc[locale] = { ...acc[locale], ...pluginTrads[locale] };\r\n        });\r\n\r\n        return acc;\r\n      },\r\n      {}\r\n    );\r\n\r\n    const translations = this.configurations.locales.reduce<{\r\n      [locale: string]: Translation['data'];\r\n    }>((acc, current) => {\r\n      acc[current] = {\r\n        ...adminTranslations[current],\r\n        ...(mergedTrads[current] || {}),\r\n        ...(customTranslations[current] ?? {}),\r\n      };\r\n\r\n      return acc;\r\n    }, {});\r\n\r\n    this.configurations.translations = translations;\r\n\r\n    return Promise.resolve();\r\n  }\r\n\r\n  registerHook = (name: string, fn: Handler) => {\r\n    invariant(\r\n      this.hooksDict[name],\r\n      `The hook ${name} is not defined. You are trying to register a hook that does not exist in the application.`\r\n    );\r\n    this.hooksDict[name].register(fn);\r\n  };\r\n\r\n  registerPlugin = (pluginConf: PluginConfig) => {\r\n    const plugin = new Plugin(pluginConf);\r\n\r\n    this.plugins[plugin.pluginId] = plugin;\r\n  };\r\n\r\n  runHookSeries = (name: string, asynchronous = false) =>\r\n    asynchronous ? this.hooksDict[name].runSeriesAsync() : this.hooksDict[name].runSeries();\r\n\r\n  runHookWaterfall = <T,>(name: string, initialValue: T, store?: Store) => {\r\n    return this.hooksDict[name].runWaterfall(initialValue, store);\r\n  };\r\n\r\n  runHookParallel = (name: string) => this.hooksDict[name].runParallel();\r\n\r\n  render() {\r\n    const localeNames = pick(languageNativeNames, this.configurations.locales || []);\r\n    const locale = (localStorage.getItem(LANGUAGE_LOCAL_STORAGE_KEY) ||\r\n      'en') as keyof typeof localeNames;\r\n\r\n    this.store = configureStore(\r\n      {\r\n        admin_app: {\r\n          permissions: merge({}, ADMIN_PERMISSIONS_CE, ADMIN_PERMISSIONS_EE),\r\n          theme: {\r\n            availableThemes: [],\r\n            currentTheme: (localStorage.getItem(THEME_LOCAL_STORAGE_KEY) || 'system') as ThemeName,\r\n          },\r\n          language: {\r\n            locale: localeNames[locale] ? locale : 'en',\r\n            localeNames,\r\n          },\r\n          token: getStoredToken(),\r\n        },\r\n      },\r\n      this.middlewares,\r\n      this.reducers\r\n    ) as Store;\r\n\r\n    const router = this.router.createRouter(this, {\r\n      basename: getBasename(),\r\n    });\r\n\r\n    return <RouterProvider router={router} />;\r\n  }\r\n}\r\n\r\nexport { StrapiApp };\r\nexport type { StrapiAppPlugin, StrapiAppConstructorArgs, InjectionZoneComponent };\r\n", "/* eslint-disable check-file/filename-naming-convention */\r\nimport { ComponentType } from 'react';\r\n\r\nimport { Internal, Utils } from '@strapi/types';\r\nimport invariant from 'invariant';\r\n\r\nimport type { MessageDescriptor, PrimitiveType } from 'react-intl';\r\nimport type { AnySchema } from 'yup';\r\n\r\ntype CustomFieldUID = Utils.String.Suffix<\r\n  | Internal.Namespace.WithSeparator<Internal.Namespace.Plugin>\r\n  | Internal.Namespace.WithSeparator<Internal.Namespace.Global>,\r\n  string\r\n>;\r\n\r\ntype CustomFieldOptionInput =\r\n  | 'text'\r\n  | 'checkbox'\r\n  | 'checkbox-with-number-field'\r\n  | 'select-default-boolean'\r\n  | 'date'\r\n  | 'select'\r\n  | 'number'\r\n  | 'boolean-radio-group'\r\n  | 'select-date'\r\n  | 'text-area-enum'\r\n  | 'select-number'\r\n  | 'radio-group';\r\n\r\ntype CustomFieldOptionName =\r\n  | 'min'\r\n  | 'minLength'\r\n  | 'max'\r\n  | 'maxLength'\r\n  | 'required'\r\n  | 'regex'\r\n  | 'enum'\r\n  | 'unique'\r\n  | 'private'\r\n  | 'default';\r\n\r\ninterface CustomFieldOption {\r\n  intlLabel: MessageDescriptor & {\r\n    values?: Record<string, PrimitiveType>;\r\n  };\r\n  description: MessageDescriptor & {\r\n    values?: Record<string, PrimitiveType>;\r\n  };\r\n  name: CustomFieldOptionName;\r\n  type: CustomFieldOptionInput;\r\n  defaultValue?: string | number | boolean | Date;\r\n}\r\n\r\ninterface CustomFieldOptionSection {\r\n  sectionTitle:\r\n    | (MessageDescriptor & {\r\n        values?: Record<string, PrimitiveType>;\r\n      })\r\n    | null;\r\n  items: CustomFieldOption[];\r\n}\r\n\r\ninterface CustomFieldOptions {\r\n  base?: (CustomFieldOptionSection | CustomFieldOption)[];\r\n  advanced?: (CustomFieldOptionSection | CustomFieldOption)[];\r\n  validator?: () => Record<string, AnySchema>;\r\n}\r\n\r\ninterface CustomField {\r\n  name: string;\r\n  pluginId?: string;\r\n  type: (typeof ALLOWED_TYPES)[number];\r\n  intlLabel: MessageDescriptor & {\r\n    values?: Record<string, PrimitiveType>;\r\n  };\r\n  intlDescription: MessageDescriptor & {\r\n    values?: Record<string, PrimitiveType>;\r\n  };\r\n  icon?: ComponentType;\r\n  components: {\r\n    Input: () => Promise<{ default?: ComponentType }>;\r\n  };\r\n  options?: CustomFieldOptions;\r\n}\r\n\r\nconst ALLOWED_TYPES = [\r\n  'biginteger',\r\n  'boolean',\r\n  'date',\r\n  'datetime',\r\n  'decimal',\r\n  'email',\r\n  'enumeration',\r\n  'float',\r\n  'integer',\r\n  'json',\r\n  'password',\r\n  'richtext',\r\n  'string',\r\n  'text',\r\n  'time',\r\n  'uid',\r\n] as const;\r\n\r\nconst ALLOWED_ROOT_LEVEL_OPTIONS = [\r\n  'min',\r\n  'minLength',\r\n  'max',\r\n  'maxLength',\r\n  'required',\r\n  'regex',\r\n  'enum',\r\n  'unique',\r\n  'private',\r\n  'default',\r\n] as const;\r\n\r\nclass CustomFields {\r\n  customFields: Record<string, CustomField>;\r\n\r\n  constructor() {\r\n    this.customFields = {};\r\n  }\r\n\r\n  register = (customFields: CustomField | CustomField[]) => {\r\n    if (Array.isArray(customFields)) {\r\n      // If several custom fields are passed, register them one by one\r\n      customFields.forEach((customField) => {\r\n        this.register(customField);\r\n      });\r\n    } else {\r\n      // Handle individual custom field\r\n      const { name, pluginId, type, intlLabel, intlDescription, components, options } =\r\n        customFields;\r\n\r\n      // Ensure required attributes are provided\r\n      invariant(name, 'A name must be provided');\r\n      invariant(type, 'A type must be provided');\r\n      invariant(intlLabel, 'An intlLabel must be provided');\r\n      invariant(intlDescription, 'An intlDescription must be provided');\r\n      invariant(components, 'A components object must be provided');\r\n      invariant(components.Input, 'An Input component must be provided');\r\n\r\n      // Ensure the type is valid\r\n      invariant(\r\n        ALLOWED_TYPES.includes(type),\r\n        `Custom field type: '${type}' is not a valid Strapi type or it can't be used with a Custom Field`\r\n      );\r\n\r\n      // Ensure name has no special characters\r\n      const isValidObjectKey = /^(?![0-9])[a-zA-Z0-9$_-]+$/g;\r\n      invariant(\r\n        isValidObjectKey.test(name),\r\n        `Custom field name: '${name}' is not a valid object key`\r\n      );\r\n\r\n      // Ensure options have valid name paths\r\n      const allFormOptions = [...(options?.base || []), ...(options?.advanced || [])];\r\n\r\n      if (allFormOptions.length) {\r\n        const optionPathValidations = allFormOptions.reduce(optionsValidationReducer, []);\r\n\r\n        optionPathValidations.forEach(({ isValidOptionPath, errorMessage }) => {\r\n          invariant(isValidOptionPath, errorMessage);\r\n        });\r\n      }\r\n\r\n      // When no plugin is specified, default to the global namespace\r\n      const uid: CustomFieldUID = pluginId ? `plugin::${pluginId}.${name}` : `global::${name}`;\r\n\r\n      // Ensure the uid is unique\r\n      const uidAlreadyUsed = Object.prototype.hasOwnProperty.call(this.customFields, uid);\r\n      invariant(!uidAlreadyUsed, `Custom field: '${uid}' has already been registered`);\r\n\r\n      this.customFields[uid] = customFields;\r\n    }\r\n  };\r\n\r\n  getAll = () => {\r\n    return this.customFields;\r\n  };\r\n\r\n  get = (uid: string): CustomField | undefined => {\r\n    return this.customFields[uid];\r\n  };\r\n}\r\n\r\ninterface OptionValidation {\r\n  isValidOptionPath: boolean;\r\n  errorMessage: string;\r\n}\r\n\r\nconst optionsValidationReducer = (\r\n  acc: OptionValidation[],\r\n  option: CustomFieldOptionSection | CustomFieldOption\r\n): OptionValidation[] => {\r\n  if ('items' in option) {\r\n    return option.items.reduce(optionsValidationReducer, acc);\r\n  }\r\n\r\n  if (!option.name) {\r\n    acc.push({\r\n      isValidOptionPath: false,\r\n      errorMessage: \"The 'name' property is required on an options object\",\r\n    });\r\n  } else {\r\n    acc.push({\r\n      isValidOptionPath:\r\n        option.name.startsWith('options') || ALLOWED_ROOT_LEVEL_OPTIONS.includes(option.name),\r\n      errorMessage: `'${option.name}' must be prefixed with 'options.'`,\r\n    });\r\n  }\r\n\r\n  return acc;\r\n};\r\n\r\nexport { type CustomField, CustomFields };\r\n", "/* eslint-disable check-file/filename-naming-convention */\r\nimport * as React from 'react';\r\n\r\nimport { immerable } from 'immer';\r\n\r\nexport interface PluginConfig\r\n  extends Partial<Pick<Plugin, 'apis' | 'initializer' | 'injectionZones' | 'isReady'>> {\r\n  name: string;\r\n  id: string;\r\n}\r\n\r\nexport class Plugin {\r\n  [immerable] = true;\r\n\r\n  apis: Record<string, unknown>;\r\n  initializer: React.ComponentType<{ setPlugin(pluginId: string): void }> | null;\r\n  injectionZones: Record<\r\n    string,\r\n    Record<string, Array<{ name: string; Component: React.ComponentType }>>\r\n  >;\r\n  isReady: boolean;\r\n  name: string;\r\n  pluginId: PluginConfig['id'];\r\n\r\n  constructor(pluginConf: PluginConfig) {\r\n    this.apis = pluginConf.apis || {};\r\n    this.initializer = pluginConf.initializer || null;\r\n    this.injectionZones = pluginConf.injectionZones || {};\r\n    this.isReady = pluginConf.isReady !== undefined ? pluginConf.isReady : true;\r\n    this.name = pluginConf.name;\r\n    this.pluginId = pluginConf.id;\r\n  }\r\n\r\n  getInjectedComponents(containerName: string, blockName: string) {\r\n    try {\r\n      return this.injectionZones[containerName][blockName] || [];\r\n    } catch (err) {\r\n      console.error('Cannot get injected component', err);\r\n\r\n      return [];\r\n    }\r\n  }\r\n\r\n  injectComponent(\r\n    containerName: string,\r\n    blockName: string,\r\n    component: { name: string; Component: React.ComponentType }\r\n  ) {\r\n    try {\r\n      this.injectionZones[containerName][blockName].push(component);\r\n    } catch (err) {\r\n      console.error('Cannot inject component', err);\r\n    }\r\n  }\r\n}\r\n", "import { Location } from 'react-router-dom';\r\n\r\nimport type { Permission, User } from '../../features/Auth';\r\n\r\ninterface RBACContext extends Pick<Location, 'pathname' | 'search'> {\r\n  /**\r\n   * The current user.\r\n   */\r\n  user?: User;\r\n  /**\r\n   * The permissions of the current user.\r\n   */\r\n  permissions: Permission[];\r\n}\r\n\r\ninterface RBACMiddleware {\r\n  (\r\n    ctx: RBACContext\r\n  ): (\r\n    next: (permissions: Permission[]) => Promise<Permission[]> | Permission[]\r\n  ) => (permissions: Permission[]) => Promise<Permission[]> | Permission[];\r\n}\r\n\r\nclass RBAC {\r\n  private middlewares: RBACMiddleware[] = [];\r\n\r\n  constructor() {}\r\n\r\n  use(middleware: RBACMiddleware[]): void;\r\n  use(middleware: RBACMiddleware): void;\r\n  use(middleware: RBACMiddleware | RBACMiddleware[]): void {\r\n    if (Array.isArray(middleware)) {\r\n      this.middlewares.push(...middleware);\r\n    } else {\r\n      this.middlewares.push(middleware);\r\n    }\r\n  }\r\n\r\n  run = async (ctx: RBACContext, permissions: Permission[]): Promise<Permission[]> => {\r\n    let index = 0;\r\n\r\n    const middlewaresToRun = this.middlewares.map((middleware) => middleware(ctx));\r\n\r\n    const next = async (permissions: Permission[]) => {\r\n      if (index < this.middlewares.length) {\r\n        return middlewaresToRun[index++](next)(permissions);\r\n      }\r\n\r\n      return permissions;\r\n    };\r\n\r\n    return next(permissions);\r\n  };\r\n}\r\n\r\nexport { RBAC };\r\nexport type { RBACMiddleware, RBACContext };\r\n", "/* eslint-disable check-file/filename-naming-convention */\r\nimport * as React from 'react';\r\n\r\nimport invariant from 'invariant';\r\nimport { MessageDescriptor, PrimitiveType } from 'react-intl';\r\nimport { Provider } from 'react-redux';\r\nimport { createBrowserRouter, createMemoryRouter, RouteObject } from 'react-router-dom';\r\n\r\nimport { App } from '../../App';\r\nimport { ErrorElement } from '../../components/ErrorElement';\r\nimport { LanguageProvider } from '../../components/LanguageProvider';\r\nimport { Theme } from '../../components/Theme';\r\nimport { Permission } from '../../features/Auth';\r\nimport { NotFoundPage } from '../../pages/NotFoundPage';\r\nimport { getImmutableRoutes } from '../../router';\r\nimport { StrapiApp } from '../../StrapiApp';\r\n\r\ntype IRouter = ReturnType<typeof createBrowserRouter> | ReturnType<typeof createMemoryRouter>;\r\n\r\ntype Reducer<Config extends object> = (prev: Config[]) => Config[];\r\n\r\ninterface MenuItem {\r\n  to: string;\r\n  icon: React.ElementType;\r\n  intlLabel: MessageDescriptor & { values?: Record<string, PrimitiveType> };\r\n  permissions: Permission[];\r\n  notificationsCount?: number;\r\n  Component?: React.LazyExoticComponent<React.ComponentType>;\r\n  exact?: boolean;\r\n  position?: number;\r\n  licenseOnly?: boolean;\r\n}\r\n\r\ninterface StrapiAppSettingLink extends Omit<MenuItem, 'icon' | 'notificationCount'> {\r\n  id: string;\r\n}\r\n\r\ninterface UnloadedSettingsLink extends Omit<StrapiAppSettingLink, 'Component'> {\r\n  Component?: () => Promise<{ default: React.ComponentType }>;\r\n}\r\n\r\ninterface StrapiAppSetting {\r\n  id: string;\r\n  intlLabel: MessageDescriptor & {\r\n    values?: Record<string, PrimitiveType>;\r\n  };\r\n  links: Omit<StrapiAppSettingLink, 'Component'>[];\r\n}\r\n\r\ninterface RouterOptions {\r\n  basename?: string;\r\n  memory?: boolean;\r\n}\r\n\r\nclass Router {\r\n  private _routes: RouteObject[] = [];\r\n  private router: IRouter | null = null;\r\n  private _menu: Omit<MenuItem, 'Component'>[] = [];\r\n  private _settings: Record<string, StrapiAppSetting> = {\r\n    global: {\r\n      id: 'global',\r\n      intlLabel: {\r\n        id: 'Settings.global',\r\n        defaultMessage: 'Global Settings',\r\n      },\r\n      links: [],\r\n    },\r\n  };\r\n\r\n  constructor(initialRoutes: RouteObject[]) {\r\n    this._routes = initialRoutes;\r\n  }\r\n\r\n  get routes() {\r\n    return this._routes;\r\n  }\r\n\r\n  get menu() {\r\n    return this._menu;\r\n  }\r\n\r\n  get settings() {\r\n    return this._settings;\r\n  }\r\n\r\n  /**\r\n   * @internal This method is used internally by Strapi to create the router.\r\n   * It should not be used by plugins, doing so will likely break the application.\r\n   */\r\n  createRouter(strapi: StrapiApp, { memory, ...opts }: RouterOptions = {}) {\r\n    const routes = [\r\n      {\r\n        path: '/*',\r\n        errorElement: (\r\n          <Provider store={strapi.store!}>\r\n            <LanguageProvider messages={strapi.configurations.translations}>\r\n              <Theme themes={strapi.configurations.themes}>\r\n                <ErrorElement />\r\n              </Theme>\r\n            </LanguageProvider>\r\n          </Provider>\r\n        ),\r\n        element: <App strapi={strapi} store={strapi.store!} />,\r\n        children: [\r\n          ...getImmutableRoutes(),\r\n          {\r\n            path: '/*',\r\n            lazy: async () => {\r\n              const { PrivateAdminLayout } = await import('../../layouts/AuthenticatedLayout');\r\n\r\n              return {\r\n                Component: PrivateAdminLayout,\r\n              };\r\n            },\r\n            children: [\r\n              ...this.routes,\r\n              {\r\n                path: '*',\r\n                element: <NotFoundPage />,\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    if (memory) {\r\n      this.router = createMemoryRouter(routes, opts);\r\n    } else {\r\n      this.router = createBrowserRouter(routes, opts);\r\n    }\r\n\r\n    return this.router;\r\n  }\r\n\r\n  public addMenuLink = (\r\n    link: Omit<MenuItem, 'Component'> & {\r\n      Component: () => Promise<{ default: React.ComponentType }>;\r\n    }\r\n  ) => {\r\n    invariant(link.to, `[${link.intlLabel.defaultMessage}]: link.to should be defined`);\r\n    invariant(\r\n      typeof link.to === 'string',\r\n      `[${\r\n        link.intlLabel.defaultMessage\r\n      }]: Expected link.to to be a string instead received ${typeof link.to}`\r\n    );\r\n    invariant(\r\n      link.intlLabel?.id && link.intlLabel?.defaultMessage,\r\n      `[${link.intlLabel.defaultMessage}]: link.intlLabel.id & link.intlLabel.defaultMessage should be defined`\r\n    );\r\n    invariant(\r\n      !link.Component || (link.Component && typeof link.Component === 'function'),\r\n      `[${link.intlLabel.defaultMessage}]: link.Component must be a function returning a Promise that returns a default component. Please use: \\`Component: () => import(path)\\` instead.`\r\n    );\r\n\r\n    if (\r\n      !link.Component ||\r\n      (link.Component &&\r\n        typeof link.Component === 'function' &&\r\n        // @ts-expect-error – shh\r\n        link.Component[Symbol.toStringTag] === 'AsyncFunction')\r\n    ) {\r\n      console.warn(\r\n        `\r\n      [${link.intlLabel.defaultMessage}]: [deprecated] addMenuLink() was called with an async Component from the plugin \"${link.intlLabel.defaultMessage}\". This will be removed in the future. Please use: \\`Component: () => import(path)\\` ensuring you return a default export instead.\r\n      `.trim()\r\n      );\r\n    }\r\n\r\n    if (link.to.startsWith('/')) {\r\n      console.warn(\r\n        `[${link.intlLabel.defaultMessage}]: the \\`to\\` property of your menu link is an absolute path, it should be relative to the root of the application. This has been corrected for you but will be removed in a future version of Strapi.`\r\n      );\r\n\r\n      link.to = link.to.slice(1);\r\n    }\r\n\r\n    const { Component, ...restLink } = link;\r\n\r\n    if (Component) {\r\n      this._routes.push({\r\n        path: `${link.to}/*`,\r\n        lazy: async () => {\r\n          const mod = await Component();\r\n\r\n          if ('default' in mod) {\r\n            return { Component: mod.default };\r\n          } else {\r\n            return { Component: mod };\r\n          }\r\n        },\r\n      });\r\n    }\r\n\r\n    this.menu.push(restLink);\r\n  };\r\n\r\n  public addSettingsLink(\r\n    section: Pick<StrapiAppSetting, 'id' | 'intlLabel'> & { links: UnloadedSettingsLink[] },\r\n    links?: never\r\n  ): void;\r\n  public addSettingsLink(\r\n    sectionId: string | Pick<StrapiAppSetting, 'id' | 'intlLabel'>,\r\n    link: UnloadedSettingsLink\r\n  ): void;\r\n  public addSettingsLink(\r\n    sectionId: string | Pick<StrapiAppSetting, 'id' | 'intlLabel'>,\r\n    link: UnloadedSettingsLink[]\r\n  ): void;\r\n  public addSettingsLink(\r\n    section:\r\n      | string\r\n      | Pick<StrapiAppSetting, 'id' | 'intlLabel'>\r\n      | (Pick<StrapiAppSetting, 'id' | 'intlLabel'> & { links: UnloadedSettingsLink[] }),\r\n    link?: UnloadedSettingsLink | UnloadedSettingsLink[]\r\n  ): void {\r\n    if (typeof section === 'object' && 'links' in section) {\r\n      /**\r\n       * Someone has passed an entire pre-configured section object\r\n       */\r\n      invariant(section.id, 'section.id should be defined');\r\n      invariant(\r\n        section.intlLabel?.id && section.intlLabel?.defaultMessage,\r\n        'section.intlLabel should be defined'\r\n      );\r\n      invariant(this.settings[section.id] === undefined, 'A similar section already exists');\r\n      invariant(Array.isArray(section.links), 'TypeError expected links to be an array');\r\n\r\n      this.settings[section.id] = { ...section, links: [] };\r\n\r\n      section.links.forEach((link) => {\r\n        this.createSettingsLink(section.id, link);\r\n      });\r\n    } else if (typeof section === 'object' && link) {\r\n      /**\r\n       * we need to create the section first\r\n       */\r\n      invariant(section.id, 'section.id should be defined');\r\n      invariant(\r\n        section.intlLabel?.id && section.intlLabel?.defaultMessage,\r\n        'section.intlLabel should be defined'\r\n      );\r\n      invariant(this.settings[section.id] === undefined, 'A similar section already exists');\r\n\r\n      this.settings[section.id] = { ...section, links: [] };\r\n\r\n      if (Array.isArray(link)) {\r\n        link.forEach((l) => this.createSettingsLink(section.id, l));\r\n      } else {\r\n        this.createSettingsLink(section.id, link);\r\n      }\r\n    } else if (typeof section === 'string' && link) {\r\n      if (Array.isArray(link)) {\r\n        link.forEach((l) => this.createSettingsLink(section, l));\r\n      } else {\r\n        this.createSettingsLink(section, link);\r\n      }\r\n    } else {\r\n      throw new Error(\r\n        'Invalid arguments provided to addSettingsLink, at minimum a sectionId and link are required.'\r\n      );\r\n    }\r\n  }\r\n\r\n  private createSettingsLink = (sectionId: string, link: UnloadedSettingsLink) => {\r\n    invariant(this._settings[sectionId], 'The section does not exist');\r\n\r\n    invariant(link.id, `[${link.intlLabel.defaultMessage}]: link.id should be defined`);\r\n    invariant(\r\n      link.intlLabel?.id && link.intlLabel?.defaultMessage,\r\n      `[${link.intlLabel.defaultMessage}]: link.intlLabel.id & link.intlLabel.defaultMessage`\r\n    );\r\n    invariant(link.to, `[${link.intlLabel.defaultMessage}]: link.to should be defined`);\r\n    invariant(\r\n      !link.Component || (link.Component && typeof link.Component === 'function'),\r\n      `[${link.intlLabel.defaultMessage}]: link.Component must be a function returning a Promise. Please use: \\`Component: () => import(path)\\` instead.`\r\n    );\r\n\r\n    if (\r\n      !link.Component ||\r\n      (link.Component &&\r\n        typeof link.Component === 'function' &&\r\n        // @ts-expect-error – shh\r\n        link.Component[Symbol.toStringTag] === 'AsyncFunction')\r\n    ) {\r\n      console.warn(\r\n        `\r\n      [${link.intlLabel.defaultMessage}]: [deprecated] addSettingsLink() was called with an async Component from the plugin \"${link.intlLabel.defaultMessage}\". This will be removed in the future. Please use: \\`Component: () => import(path)\\` ensuring you return a default export instead.\r\n      `.trim()\r\n      );\r\n    }\r\n\r\n    if (link.to.startsWith('/')) {\r\n      console.warn(\r\n        `[${link.intlLabel.defaultMessage}]: the \\`to\\` property of your settings link is an absolute path. It should be relative to \\`/settings\\`. This has been corrected for you but will be removed in a future version of Strapi.`\r\n      );\r\n\r\n      link.to = link.to.slice(1);\r\n    }\r\n\r\n    if (link.to.split('/')[0] === 'settings') {\r\n      console.warn(\r\n        `[${link.intlLabel.defaultMessage}]: the \\`to\\` property of your settings link has \\`settings\\` as the first part of it's path. It should be relative to \\`settings\\` and therefore, not include it. This has been corrected for you but will be removed in a future version of Strapi.`\r\n      );\r\n\r\n      link.to = link.to.split('/').slice(1).join('/');\r\n    }\r\n\r\n    const { Component, ...restLink } = link;\r\n\r\n    const settingsIndex = this._routes.findIndex((route) => route.path === 'settings/*');\r\n\r\n    /**\r\n     * This shouldn't happen unless someone has removed the settings section completely.\r\n     * Print a warning if this is the case though.\r\n     */\r\n    if (!settingsIndex) {\r\n      console.warn(\r\n        'A third party plugin has removed the settings section, the settings link cannot be added.'\r\n      );\r\n      return;\r\n    } else if (!this._routes[settingsIndex].children) {\r\n      this._routes[settingsIndex].children = [];\r\n    }\r\n\r\n    if (Component) {\r\n      this._routes[settingsIndex].children!.push({\r\n        path: `${link.to}/*`,\r\n        lazy: async () => {\r\n          const mod = await Component();\r\n\r\n          if ('default' in mod) {\r\n            return { Component: mod.default };\r\n          } else {\r\n            return { Component: mod };\r\n          }\r\n        },\r\n      });\r\n    }\r\n\r\n    this._settings[sectionId].links.push(restLink);\r\n  };\r\n\r\n  /**\r\n   * @alpha\r\n   * @description Adds a route or an array of routes to the router.\r\n   * Otherwise, pass a function that receives the current routes and\r\n   * returns the new routes in a reducer like fashion.\r\n   */\r\n  addRoute(route: RouteObject | RouteObject[] | Reducer<RouteObject>) {\r\n    if (Array.isArray(route)) {\r\n      this._routes = [...this._routes, ...route];\r\n    } else if (typeof route === 'object' && route !== null) {\r\n      this._routes.push(route);\r\n    } else if (typeof route === 'function') {\r\n      this._routes = route(this._routes);\r\n    } else {\r\n      throw new Error(\r\n        `Expected the \\`route\\` passed to \\`addRoute\\` to be an array or a function, but received ${getPrintableType(\r\n          route\r\n        )}`\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * getPrintableType\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\n/**\r\n * @internal\r\n * @description Gets the human-friendly printable type name for the given value, for instance it will yield\r\n * `array` instead of `object`, as the native `typeof` operator would do.\r\n */\r\nconst getPrintableType = (value: unknown): string => {\r\n  const nativeType = typeof value;\r\n\r\n  if (nativeType === 'object') {\r\n    if (value === null) return 'null';\r\n    if (Array.isArray(value)) return 'array';\r\n    if (value instanceof Object && value.constructor.name !== 'Object') {\r\n      return value.constructor.name;\r\n    }\r\n  }\r\n\r\n  return nativeType;\r\n};\r\n\r\nexport { Router };\r\nexport type { MenuItem, StrapiAppSettingLink, UnloadedSettingsLink, StrapiAppSetting, RouteObject };\r\n", "/**\r\n *\r\n * App.js\r\n *\r\n */\r\nimport { Suspense, useEffect } from 'react';\r\n\r\nimport { Outlet } from 'react-router-dom';\r\n\r\nimport { Page } from './components/PageHelpers';\r\nimport { Providers } from './components/Providers';\r\nimport { LANGUAGE_LOCAL_STORAGE_KEY } from './reducer';\r\n\r\nimport type { Store } from './core/store/configure';\r\nimport type { StrapiApp } from './StrapiApp';\r\n\r\ninterface AppProps {\r\n  strapi: StrapiApp;\r\n  store: Store;\r\n}\r\n\r\nconst App = ({ strapi, store }: AppProps) => {\r\n  useEffect(() => {\r\n    const language = localStorage.getItem(LANGUAGE_LOCAL_STORAGE_KEY) || 'en';\r\n\r\n    if (language) {\r\n      document.documentElement.lang = language;\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Providers strapi={strapi} store={store}>\r\n      <Suspense fallback={<Page.Loading />}>\r\n        <Outlet />\r\n      </Suspense>\r\n    </Providers>\r\n  );\r\n};\r\n\r\nexport { App };\r\nexport type { AppProps };\r\n", "import * as React from 'react';\r\n\r\nimport defaultsDeep from 'lodash/defaultsDeep';\r\nimport { IntlProvider } from 'react-intl';\r\n\r\nimport { useTypedSelector } from '../core/store/hooks';\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * LanguageProvider\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\ninterface LanguageProviderProps {\r\n  children: React.ReactNode;\r\n  messages: Record<string, Record<string, string>>;\r\n}\r\n\r\nconst LanguageProvider = ({ children, messages }: LanguageProviderProps) => {\r\n  const locale = useTypedSelector((state) => state.admin_app.language.locale);\r\n  const appMessages = defaultsDeep(messages[locale], messages.en);\r\n\r\n  return (\r\n    <IntlProvider locale={locale} defaultLocale=\"en\" messages={appMessages} textComponent=\"span\">\r\n      {children}\r\n    </IntlProvider>\r\n  );\r\n};\r\n\r\nexport { LanguageProvider };\r\nexport type { LanguageProviderProps };\r\n", "import * as React from 'react';\r\n\r\nimport { DesignSystemProvider } from '@strapi/design-system';\r\nimport { useIntl } from 'react-intl';\r\nimport { useDispatch } from 'react-redux';\r\nimport { DefaultTheme, createGlobalStyle } from 'styled-components';\r\n\r\nimport { useTypedSelector } from '../core/store/hooks';\r\nimport { setAvailableThemes } from '../reducer';\r\n\r\ninterface ThemeProps {\r\n  children: React.ReactNode;\r\n  themes: {\r\n    dark: DefaultTheme;\r\n    light: DefaultTheme;\r\n  };\r\n}\r\n\r\nconst Theme = ({ children, themes }: ThemeProps) => {\r\n  const { currentTheme } = useTypedSelector((state) => state.admin_app.theme);\r\n  const [systemTheme, setSystemTheme] = React.useState<'light' | 'dark'>();\r\n  const { locale } = useIntl();\r\n  const dispatch = useDispatch();\r\n\r\n  // Listen to changes in the system theme\r\n  React.useEffect(() => {\r\n    const themeWatcher = window.matchMedia('(prefers-color-scheme: dark)');\r\n    setSystemTheme(themeWatcher.matches ? 'dark' : 'light');\r\n\r\n    const listener = (event: MediaQueryListEvent) => {\r\n      setSystemTheme(event.matches ? 'dark' : 'light');\r\n    };\r\n    themeWatcher.addEventListener('change', listener);\r\n\r\n    // Remove listener on cleanup\r\n    return () => {\r\n      themeWatcher.removeEventListener('change', listener);\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(setAvailableThemes(Object.keys(themes)));\r\n  }, [dispatch, themes]);\r\n\r\n  const computedThemeName = currentTheme === 'system' ? systemTheme : currentTheme;\r\n\r\n  return (\r\n    <DesignSystemProvider\r\n      locale={locale}\r\n      /**\r\n       * TODO: could we make this neater i.e. by setting up the context to throw\r\n       * if it can't find it, that way the type is always fully defined and we're\r\n       * not checking it all the time...\r\n       */\r\n      theme={themes?.[computedThemeName || 'light']}\r\n    >\r\n      {children}\r\n      <GlobalStyle />\r\n    </DesignSystemProvider>\r\n  );\r\n};\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  body {\r\n    background: ${({ theme }) => theme.colors.neutral100};\r\n  }\r\n`;\r\n\r\nexport { Theme };\r\nexport type { ThemeProps };\r\n", "import * as React from 'react';\r\n\r\nimport { QueryClient, QueryClientProvider } from 'react-query';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport { AuthProvider } from '../features/Auth';\r\nimport { HistoryProvider } from '../features/BackButton';\r\nimport { ConfigurationProvider } from '../features/Configuration';\r\nimport { NotificationsProvider } from '../features/Notifications';\r\nimport { StrapiAppProvider } from '../features/StrapiApp';\r\nimport { TrackingProvider } from '../features/Tracking';\r\n\r\nimport { GuidedTourProvider } from './GuidedTour/Provider';\r\nimport { LanguageProvider } from './LanguageProvider';\r\nimport { Theme } from './Theme';\r\nimport { UnstableGuidedTourContext } from './UnstableGuidedTour/Context';\r\n\r\nimport type { Store } from '../core/store/configure';\r\nimport type { StrapiApp } from '../StrapiApp';\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      refetchOnWindowFocus: false,\r\n    },\r\n  },\r\n});\r\n\r\ninterface ProvidersProps {\r\n  children: React.ReactNode;\r\n  strapi: StrapiApp;\r\n  store: Store;\r\n}\r\n\r\nconst Providers = ({ children, strapi, store }: ProvidersProps) => {\r\n  return (\r\n    <StrapiAppProvider\r\n      components={strapi.library.components}\r\n      customFields={strapi.customFields}\r\n      widgets={strapi.widgets}\r\n      fields={strapi.library.fields}\r\n      menu={strapi.router.menu}\r\n      getAdminInjectedComponents={strapi.getAdminInjectedComponents}\r\n      getPlugin={strapi.getPlugin}\r\n      plugins={strapi.plugins}\r\n      rbac={strapi.rbac}\r\n      runHookParallel={strapi.runHookParallel}\r\n      runHookWaterfall={(name, initialValue) => strapi.runHookWaterfall(name, initialValue, store)}\r\n      runHookSeries={strapi.runHookSeries}\r\n      settings={strapi.router.settings}\r\n    >\r\n      <Provider store={store}>\r\n        <QueryClientProvider client={queryClient}>\r\n          <AuthProvider>\r\n            <HistoryProvider>\r\n              <LanguageProvider messages={strapi.configurations.translations}>\r\n                <Theme themes={strapi.configurations.themes}>\r\n                  <NotificationsProvider>\r\n                    <TrackingProvider>\r\n                      <GuidedTourProvider>\r\n                        <UnstableGuidedTourContext>\r\n                          <ConfigurationProvider\r\n                            defaultAuthLogo={strapi.configurations.authLogo}\r\n                            defaultMenuLogo={strapi.configurations.menuLogo}\r\n                            showReleaseNotification={strapi.configurations.notifications.releases}\r\n                          >\r\n                            {children}\r\n                          </ConfigurationProvider>\r\n                        </UnstableGuidedTourContext>\r\n                      </GuidedTourProvider>\r\n                    </TrackingProvider>\r\n                  </NotificationsProvider>\r\n                </Theme>\r\n              </LanguageProvider>\r\n            </HistoryProvider>\r\n          </AuthProvider>\r\n        </QueryClientProvider>\r\n      </Provider>\r\n    </StrapiAppProvider>\r\n  );\r\n};\r\n\r\nexport { Providers };\r\n", "import {\r\n  Alert,\r\n  Button,\r\n  Flex,\r\n  Main,\r\n  Typography,\r\n  Link,\r\n  TypographyComponent,\r\n} from '@strapi/design-system';\r\nimport { Duplicate, WarningCircle } from '@strapi/icons';\r\nimport { useIntl } from 'react-intl';\r\nimport { useRouteError } from 'react-router-dom';\r\nimport { styled } from 'styled-components';\r\n\r\nimport { useClipboard } from '../hooks/useClipboard';\r\n\r\n/**\r\n * @description this stops the app from going white, and instead shows the error message.\r\n * But it could be improved for sure.\r\n */\r\nconst ErrorElement = () => {\r\n  const error = useRouteError();\r\n  const { formatMessage } = useIntl();\r\n  const { copy } = useClipboard();\r\n\r\n  if (error instanceof Error) {\r\n    console.error(error);\r\n\r\n    const handleClick = async () => {\r\n      await copy(`\r\n\\`\\`\\`\r\n${error.stack}\r\n\\`\\`\\`\r\n      `);\r\n    };\r\n\r\n    return (\r\n      <Main height=\"100%\">\r\n        <Flex alignItems=\"center\" height=\"100%\" justifyContent=\"center\">\r\n          <Flex\r\n            gap={7}\r\n            padding={7}\r\n            direction=\"column\"\r\n            width=\"35%\"\r\n            shadow=\"tableShadow\"\r\n            borderColor=\"neutral150\"\r\n            background=\"neutral0\"\r\n            hasRadius\r\n            maxWidth=\"512px\"\r\n          >\r\n            <Flex direction=\"column\" gap={2}>\r\n              <WarningCircle width=\"32px\" height=\"32px\" fill=\"danger600\" />\r\n              <Typography fontSize={4} fontWeight=\"bold\" textAlign=\"center\">\r\n                {formatMessage({\r\n                  id: 'app.error',\r\n                  defaultMessage: 'Something went wrong',\r\n                })}\r\n              </Typography>\r\n              <Typography variant=\"omega\" textAlign=\"center\">\r\n                {formatMessage(\r\n                  {\r\n                    id: 'app.error.message',\r\n                    defaultMessage: `It seems like there is a bug in your instance, but we've got you covered. Please notify your technical team so they can investigate the source of the problem and report the issue to us by opening a bug report on {link}.`,\r\n                  },\r\n                  {\r\n                    link: (\r\n                      <Link\r\n                        isExternal\r\n                        // hack to get rid of the current endIcon, which should be removable by using `null`.\r\n                        endIcon\r\n                        href=\"https://github.com/strapi/strapi/issues/new?assignees=&labels=&projects=&template=BUG_REPORT.md\"\r\n                      >{`Strapi's GitHub`}</Link>\r\n                    ),\r\n                  }\r\n                )}\r\n              </Typography>\r\n            </Flex>\r\n            {/* the Alert component needs to make its close button optional as well as the icon. */}\r\n            <Flex gap={4} direction=\"column\" width=\"100%\">\r\n              <StyledAlert onClose={() => {}} width=\"100%\" closeLabel=\"\" variant=\"danger\">\r\n                <ErrorType>{error.message}</ErrorType>\r\n              </StyledAlert>\r\n              <Button onClick={handleClick} variant=\"tertiary\" startIcon={<Duplicate />}>\r\n                {formatMessage({\r\n                  id: 'app.error.copy',\r\n                  defaultMessage: 'Copy to clipboard',\r\n                })}\r\n              </Button>\r\n            </Flex>\r\n          </Flex>\r\n        </Flex>\r\n      </Main>\r\n    );\r\n  }\r\n\r\n  throw error;\r\n};\r\n\r\nconst StyledAlert = styled(Alert)`\r\n  & > div:first-child {\r\n    display: none;\r\n  }\r\n\r\n  & > button {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst ErrorType = styled<TypographyComponent>(Typography)`\r\n  word-break: break-all;\r\n  color: ${({ theme }) => theme.colors.danger600};\r\n`;\r\n\r\nexport { ErrorElement };\r\n", "/**\r\n * NotFoundPage\r\n *\r\n * This is the page we show when the user visits a url that doesn't have a route\r\n *\r\n */\r\nimport { LinkButton, EmptyStateLayout } from '@strapi/design-system';\r\nimport { ArrowRight } from '@strapi/icons';\r\nimport { EmptyPictures } from '@strapi/icons/symbols';\r\nimport { useIntl } from 'react-intl';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Layouts } from '../components/Layouts/Layout';\r\nimport { Page } from '../components/PageHelpers';\r\n\r\nexport const NotFoundPage = () => {\r\n  const { formatMessage } = useIntl();\r\n\r\n  return (\r\n    <Page.Main labelledBy=\"title\">\r\n      <Layouts.Header\r\n        id=\"title\"\r\n        title={formatMessage({\r\n          id: 'content-manager.pageNotFound',\r\n          defaultMessage: 'Page not found',\r\n        })}\r\n      />\r\n      <Layouts.Content>\r\n        <EmptyStateLayout\r\n          action={\r\n            <LinkButton tag={Link} variant=\"secondary\" endIcon={<ArrowRight />} to=\"/\">\r\n              {formatMessage({\r\n                id: 'app.components.NotFoundPage.back',\r\n                defaultMessage: 'Back to homepage',\r\n              })}\r\n            </LinkButton>\r\n          }\r\n          content={formatMessage({\r\n            id: 'app.page.not.found',\r\n            defaultMessage: \"Oops! We can't seem to find the page you're looging for...\",\r\n          })}\r\n          hasRadius\r\n          icon={<EmptyPictures width=\"16rem\" />}\r\n          shadow=\"tableShadow\"\r\n        />\r\n      </Layouts.Content>\r\n    </Page.Main>\r\n  );\r\n};\r\n", "import { RouteObject } from 'react-router-dom';\r\n\r\n/**\r\n * All these routes are relative to the `/admin/settings/*` route\r\n * as such their path should not start with a `/` or include the `/settings` prefix.\r\n */\r\nexport const getEERoutes = (): RouteObject[] => [\r\n  ...(window.strapi.features.isEnabled(window.strapi.features.AUDIT_LOGS)\r\n    ? [\r\n        {\r\n          path: 'audit-logs',\r\n          lazy: async () => {\r\n            const { ProtectedListPage } = await import('./pages/AuditLogs/ListPage');\r\n\r\n            return {\r\n              Component: ProtectedListPage,\r\n            };\r\n          },\r\n        },\r\n      ]\r\n    : []),\r\n  ...(window.strapi.features.isEnabled(window.strapi.features.SSO)\r\n    ? [\r\n        {\r\n          path: 'single-sign-on',\r\n          lazy: async () => {\r\n            const { ProtectedSSO } = await import('./pages/SingleSignOnPage');\r\n\r\n            return {\r\n              Component: ProtectedSSO,\r\n            };\r\n          },\r\n        },\r\n      ]\r\n    : []),\r\n];\r\n", "import { Box, Button, Flex, Main, Typography, Link } from '@strapi/design-system';\r\nimport { useIntl } from 'react-intl';\r\nimport { NavLink, useNavigate } from 'react-router-dom';\r\nimport * as yup from 'yup';\r\n\r\nimport { Form } from '../../../components/Form';\r\nimport { InputRenderer } from '../../../components/FormInputs/Renderer';\r\nimport { Logo } from '../../../components/UnauthenticatedLogo';\r\nimport { useAPIErrorHandler } from '../../../hooks/useAPIErrorHandler';\r\nimport {\r\n  Column,\r\n  LayoutContent,\r\n  UnauthenticatedLayout,\r\n} from '../../../layouts/UnauthenticatedLayout';\r\nimport { useForgotPasswordMutation } from '../../../services/auth';\r\nimport { isBaseQueryError } from '../../../utils/baseQuery';\r\nimport { translatedErrors } from '../../../utils/translatedErrors';\r\n\r\nimport type { ForgotPassword } from '../../../../../shared/contracts/authentication';\r\n\r\nconst ForgotPassword = () => {\r\n  const navigate = useNavigate();\r\n  const { formatMessage } = useIntl();\r\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\r\n\r\n  const [forgotPassword, { error }] = useForgotPasswordMutation();\r\n\r\n  return (\r\n    <UnauthenticatedLayout>\r\n      <Main>\r\n        <LayoutContent>\r\n          <Column>\r\n            <Logo />\r\n            <Box paddingTop={6} paddingBottom={7}>\r\n              <Typography tag=\"h1\" variant=\"alpha\">\r\n                {formatMessage({\r\n                  id: 'Auth.form.button.password-recovery',\r\n                  defaultMessage: 'Password Recovery',\r\n                })}\r\n              </Typography>\r\n            </Box>\r\n            {error ? (\r\n              <Typography id=\"global-form-error\" role=\"alert\" tabIndex={-1} textColor=\"danger600\">\r\n                {isBaseQueryError(error)\r\n                  ? formatAPIError(error)\r\n                  : formatMessage({\r\n                      id: 'notification.error',\r\n                      defaultMessage: 'An error occurred',\r\n                    })}\r\n              </Typography>\r\n            ) : null}\r\n          </Column>\r\n          <Form\r\n            method=\"POST\"\r\n            initialValues={{\r\n              email: '',\r\n            }}\r\n            onSubmit={async (body) => {\r\n              const res = await forgotPassword(body);\r\n\r\n              if (!('error' in res)) {\r\n                navigate('/auth/forgot-password-success');\r\n              }\r\n            }}\r\n            validationSchema={yup.object().shape({\r\n              email: yup\r\n                .string()\r\n                .email(translatedErrors.email)\r\n                .required({\r\n                  id: translatedErrors.required.id,\r\n                  defaultMessage: 'This field is required.',\r\n                })\r\n                .nullable(),\r\n            })}\r\n          >\r\n            <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\r\n              {[\r\n                {\r\n                  label: formatMessage({ id: 'Auth.form.email.label', defaultMessage: 'Email' }),\r\n                  name: 'email',\r\n                  placeholder: formatMessage({\r\n                    id: 'Auth.form.email.placeholder',\r\n                    defaultMessage: 'kai@doe.com',\r\n                  }),\r\n                  required: true,\r\n                  type: 'string' as const,\r\n                },\r\n              ].map((field) => (\r\n                <InputRenderer key={field.name} {...field} />\r\n              ))}\r\n              <Button type=\"submit\" fullWidth>\r\n                {formatMessage({\r\n                  id: 'Auth.form.button.forgot-password',\r\n                  defaultMessage: 'Send Email',\r\n                })}\r\n              </Button>\r\n            </Flex>\r\n          </Form>\r\n        </LayoutContent>\r\n        <Flex justifyContent=\"center\">\r\n          <Box paddingTop={4}>\r\n            <Link tag={NavLink} to=\"/auth/login\">\r\n              {formatMessage({ id: 'Auth.link.ready', defaultMessage: 'Ready to sign in?' })}\r\n            </Link>\r\n          </Box>\r\n        </Flex>\r\n      </Main>\r\n    </UnauthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { ForgotPassword };\r\n", "import { Box, Flex, Main, Typography, Link } from '@strapi/design-system';\r\nimport { useIntl } from 'react-intl';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { Logo } from '../../../components/UnauthenticatedLogo';\r\nimport {\r\n  Column,\r\n  LayoutContent,\r\n  UnauthenticatedLayout,\r\n} from '../../../layouts/UnauthenticatedLayout';\r\n\r\nconst ForgotPasswordSuccess = () => {\r\n  const { formatMessage } = useIntl();\r\n\r\n  return (\r\n    <UnauthenticatedLayout>\r\n      <Main>\r\n        <LayoutContent>\r\n          <Column>\r\n            <Logo />\r\n            <Box paddingTop={6} paddingBottom={7}>\r\n              <Typography tag=\"h1\" variant=\"alpha\">\r\n                {formatMessage({\r\n                  id: 'app.containers.AuthPage.ForgotPasswordSuccess.title',\r\n                  defaultMessage: 'Email sent',\r\n                })}\r\n              </Typography>\r\n            </Box>\r\n            <Typography>\r\n              {formatMessage({\r\n                id: 'app.containers.AuthPage.ForgotPasswordSuccess.text.email',\r\n                defaultMessage: 'It can take a few minutes to receive your password recovery link.',\r\n              })}\r\n            </Typography>\r\n            <Box paddingTop={4}>\r\n              <Typography>\r\n                {formatMessage({\r\n                  id: 'app.containers.AuthPage.ForgotPasswordSuccess.text.contact-admin',\r\n                  defaultMessage:\r\n                    'If you do not receive this link, please contact your administrator.',\r\n                })}\r\n              </Typography>\r\n            </Box>\r\n          </Column>\r\n        </LayoutContent>\r\n        <Flex justifyContent=\"center\">\r\n          <Box paddingTop={4}>\r\n            <Link tag={NavLink} to=\"/auth/login\">\r\n              {formatMessage({ id: 'Auth.link.signin', defaultMessage: 'Sign in' })}\r\n            </Link>\r\n          </Box>\r\n        </Flex>\r\n      </Main>\r\n    </UnauthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { ForgotPasswordSuccess };\r\n", "import * as React from 'react';\r\n\r\nimport { Box, Flex, Main, Typography, Link } from '@strapi/design-system';\r\nimport { useIntl } from 'react-intl';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\n\r\nimport { Logo } from '../../../components/UnauthenticatedLogo';\r\nimport {\r\n  Column,\r\n  LayoutContent,\r\n  UnauthenticatedLayout,\r\n} from '../../../layouts/UnauthenticatedLayout';\r\n\r\nconst Oops = () => {\r\n  const { formatMessage } = useIntl();\r\n  const { search: searchString } = useLocation();\r\n  const query = React.useMemo(() => new URLSearchParams(searchString), [searchString]);\r\n\r\n  const message =\r\n    query.get('info') ||\r\n    formatMessage({\r\n      id: 'Auth.components.Oops.text',\r\n      defaultMessage: 'Your account has been suspended.',\r\n    });\r\n\r\n  return (\r\n    <UnauthenticatedLayout>\r\n      <Main>\r\n        <LayoutContent>\r\n          <Column>\r\n            <Logo />\r\n            <Box paddingTop={6} paddingBottom={7}>\r\n              <Typography tag=\"h1\" variant=\"alpha\">\r\n                {formatMessage({ id: 'Auth.components.Oops.title', defaultMessage: 'Oops...' })}\r\n              </Typography>\r\n            </Box>\r\n            <Typography>{message}</Typography>\r\n            <Box paddingTop={4}>\r\n              <Typography>\r\n                {formatMessage({\r\n                  id: 'Auth.components.Oops.text.admin',\r\n                  defaultMessage: 'If this is a mistake, please contact your administrator.',\r\n                })}\r\n              </Typography>\r\n            </Box>\r\n          </Column>\r\n        </LayoutContent>\r\n        <Flex justifyContent=\"center\">\r\n          <Box paddingTop={4}>\r\n            <Link tag={NavLink} to=\"/auth/login\">\r\n              {formatMessage({ id: 'Auth.link.signin', defaultMessage: 'Sign in' })}\r\n            </Link>\r\n          </Box>\r\n        </Flex>\r\n      </Main>\r\n    </UnauthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { Oops };\r\n", "import * as React from 'react';\r\n\r\nimport { Box, Button, Flex, Grid, Typography, Link } from '@strapi/design-system';\r\nimport omit from 'lodash/omit';\r\nimport { useIntl } from 'react-intl';\r\nimport { NavLink, Navigate, useNavigate, useMatch, useLocation } from 'react-router-dom';\r\nimport { styled } from 'styled-components';\r\nimport * as yup from 'yup';\r\nimport { ValidationError } from 'yup';\r\n\r\nimport {\r\n  Register as RegisterUser,\r\n  RegisterAdmin,\r\n} from '../../../../../shared/contracts/authentication';\r\nimport { Form, FormHelpers } from '../../../components/Form';\r\nimport { InputRenderer } from '../../../components/FormInputs/Renderer';\r\nimport { useGuidedTour } from '../../../components/GuidedTour/Provider';\r\nimport { useNpsSurveySettings } from '../../../components/NpsSurvey';\r\nimport { Logo } from '../../../components/UnauthenticatedLogo';\r\nimport { useTypedDispatch } from '../../../core/store/hooks';\r\nimport { useNotification } from '../../../features/Notifications';\r\nimport { useTracking } from '../../../features/Tracking';\r\nimport { useAPIErrorHandler } from '../../../hooks/useAPIErrorHandler';\r\nimport { LayoutContent, UnauthenticatedLayout } from '../../../layouts/UnauthenticatedLayout';\r\nimport { login } from '../../../reducer';\r\nimport {\r\n  useGetRegistrationInfoQuery,\r\n  useRegisterAdminMutation,\r\n  useRegisterUserMutation,\r\n} from '../../../services/auth';\r\nimport { isBaseQueryError } from '../../../utils/baseQuery';\r\nimport { getByteSize } from '../../../utils/strings';\r\nimport { translatedErrors } from '../../../utils/translatedErrors';\r\n\r\nconst REGISTER_USER_SCHEMA = yup.object().shape({\r\n  firstname: yup.string().trim().required(translatedErrors.required).nullable(),\r\n  lastname: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, {\r\n      id: translatedErrors.minLength.id,\r\n      defaultMessage: 'Password must be at least 8 characters',\r\n      values: { min: 8 },\r\n    })\r\n    .test(\r\n      'max-bytes',\r\n      {\r\n        id: 'components.Input.error.contain.maxBytes',\r\n        defaultMessage: 'Password must be less than 73 bytes',\r\n      },\r\n      function (value) {\r\n        if (!value || typeof value !== 'string') return true; // validated elsewhere\r\n\r\n        const byteSize = getByteSize(value);\r\n        return byteSize <= 72;\r\n      }\r\n    )\r\n    .matches(/[a-z]/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.lowercase',\r\n        defaultMessage: 'Password must contain at least 1 lowercase letter',\r\n      },\r\n    })\r\n    .matches(/[A-Z]/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.uppercase',\r\n        defaultMessage: 'Password must contain at least 1 uppercase letter',\r\n      },\r\n    })\r\n    .matches(/\\d/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.number',\r\n        defaultMessage: 'Password must contain at least 1 number',\r\n      },\r\n    })\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Password is required',\r\n    })\r\n    .nullable(),\r\n  confirmPassword: yup\r\n    .string()\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Confirm password is required',\r\n    })\r\n    .oneOf([yup.ref('password'), null], {\r\n      id: 'components.Input.error.password.noMatch',\r\n      defaultMessage: 'Passwords must match',\r\n    })\r\n    .nullable(),\r\n  registrationToken: yup.string().required({\r\n    id: translatedErrors.required.id,\r\n    defaultMessage: 'Registration token is required',\r\n  }),\r\n});\r\n\r\nconst REGISTER_ADMIN_SCHEMA = yup.object().shape({\r\n  firstname: yup\r\n    .string()\r\n    .trim()\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Firstname is required',\r\n    })\r\n    .nullable(),\r\n  lastname: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, {\r\n      id: translatedErrors.minLength.id,\r\n      defaultMessage: 'Password must be at least 8 characters',\r\n      values: { min: 8 },\r\n    })\r\n    .test(\r\n      'max-bytes',\r\n      {\r\n        id: 'components.Input.error.contain.maxBytes',\r\n        defaultMessage: 'Password must be less than 73 bytes',\r\n      },\r\n      function (value) {\r\n        if (!value) return true;\r\n        return new TextEncoder().encode(value).length <= 72;\r\n      }\r\n    )\r\n    .matches(/[a-z]/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.lowercase',\r\n        defaultMessage: 'Password must contain at least 1 lowercase letter',\r\n      },\r\n    })\r\n    .matches(/[A-Z]/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.uppercase',\r\n        defaultMessage: 'Password must contain at least 1 uppercase letter',\r\n      },\r\n    })\r\n    .matches(/\\d/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.number',\r\n        defaultMessage: 'Password must contain at least 1 number',\r\n      },\r\n    })\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Password is required',\r\n    })\r\n    .nullable(),\r\n  confirmPassword: yup\r\n    .string()\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Confirm password is required',\r\n    })\r\n    .nullable()\r\n    .oneOf([yup.ref('password'), null], {\r\n      id: 'components.Input.error.password.noMatch',\r\n      defaultMessage: 'Passwords must match',\r\n    }),\r\n  email: yup\r\n    .string()\r\n    .email({\r\n      id: translatedErrors.email.id,\r\n      defaultMessage: 'Not a valid email',\r\n    })\r\n    .strict()\r\n    .lowercase({\r\n      id: translatedErrors.lowercase.id,\r\n      defaultMessage: 'Email must be lowercase',\r\n    })\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Email is required',\r\n    })\r\n    .nullable(),\r\n});\r\n\r\ninterface RegisterProps {\r\n  hasAdmin?: boolean;\r\n}\r\n\r\ninterface RegisterFormValues {\r\n  firstname: string;\r\n  lastname: string;\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  registrationToken: string | undefined;\r\n  news: boolean;\r\n}\r\n\r\nconst Register = ({ hasAdmin }: RegisterProps) => {\r\n  const { toggleNotification } = useNotification();\r\n  const navigate = useNavigate();\r\n  const [submitCount, setSubmitCount] = React.useState(0);\r\n  const [apiError, setApiError] = React.useState<string>();\r\n  const { trackUsage } = useTracking();\r\n  const { formatMessage } = useIntl();\r\n  const setSkipped = useGuidedTour('Register', (state) => state.setSkipped);\r\n  const { search: searchString } = useLocation();\r\n  const query = React.useMemo(() => new URLSearchParams(searchString), [searchString]);\r\n  const match = useMatch('/auth/:authType');\r\n  const {\r\n    _unstableFormatAPIError: formatAPIError,\r\n    _unstableFormatValidationErrors: formatValidationErrors,\r\n  } = useAPIErrorHandler();\r\n  const { setNpsSurveySettings } = useNpsSurveySettings();\r\n\r\n  const registrationToken = query.get('registrationToken');\r\n\r\n  const { data: userInfo, error } = useGetRegistrationInfoQuery(registrationToken as string, {\r\n    skip: !registrationToken,\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (error) {\r\n      const message: string = isBaseQueryError(error)\r\n        ? formatAPIError(error)\r\n        : (error.message ?? '');\r\n\r\n      toggleNotification({\r\n        type: 'danger',\r\n        message,\r\n      });\r\n\r\n      navigate(`/auth/oops?info=${encodeURIComponent(message)}`);\r\n    }\r\n  }, [error, formatAPIError, navigate, toggleNotification]);\r\n\r\n  const [registerAdmin] = useRegisterAdminMutation();\r\n  const [registerUser] = useRegisterUserMutation();\r\n  const dispatch = useTypedDispatch();\r\n\r\n  const handleRegisterAdmin = async (\r\n    { news, ...body }: RegisterAdmin.Request['body'] & { news: boolean },\r\n    setFormErrors: FormHelpers<RegisterFormValues>['setErrors']\r\n  ) => {\r\n    const res = await registerAdmin(body);\r\n\r\n    if ('data' in res) {\r\n      dispatch(login({ token: res.data.token }));\r\n\r\n      const { roles } = res.data.user;\r\n\r\n      if (roles) {\r\n        const isUserSuperAdmin = roles.find(({ code }) => code === 'strapi-super-admin');\r\n\r\n        if (isUserSuperAdmin) {\r\n          localStorage.setItem('GUIDED_TOUR_SKIPPED', JSON.stringify(false));\r\n          setSkipped(false);\r\n          trackUsage('didLaunchGuidedtour');\r\n        }\r\n      }\r\n\r\n      if (news) {\r\n        // Only enable EE survey if user accepted the newsletter\r\n        setNpsSurveySettings((s) => ({ ...s, enabled: true }));\r\n\r\n        navigate({\r\n          pathname: '/usecase',\r\n          search: `?hasAdmin=${true}`,\r\n        });\r\n      } else {\r\n        navigate('/');\r\n      }\r\n    } else {\r\n      if (isBaseQueryError(res.error)) {\r\n        trackUsage('didNotCreateFirstAdmin');\r\n\r\n        if (res.error.name === 'ValidationError') {\r\n          setFormErrors(formatValidationErrors(res.error));\r\n          return;\r\n        }\r\n\r\n        setApiError(formatAPIError(res.error));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRegisterUser = async (\r\n    { news, ...body }: RegisterUser.Request['body'] & { news: boolean },\r\n    setFormErrors: FormHelpers<RegisterFormValues>['setErrors']\r\n  ) => {\r\n    const res = await registerUser(body);\r\n\r\n    if ('data' in res) {\r\n      dispatch(login({ token: res.data.token }));\r\n\r\n      if (news) {\r\n        // Only enable EE survey if user accepted the newsletter\r\n        setNpsSurveySettings((s) => ({ ...s, enabled: true }));\r\n\r\n        navigate({\r\n          pathname: '/usecase',\r\n          search: `?hasAdmin=${hasAdmin}`,\r\n        });\r\n      } else {\r\n        navigate('/');\r\n      }\r\n    } else {\r\n      if (isBaseQueryError(res.error)) {\r\n        trackUsage('didNotCreateFirstAdmin');\r\n\r\n        if (res.error.name === 'ValidationError') {\r\n          setFormErrors(formatValidationErrors(res.error));\r\n          return;\r\n        }\r\n\r\n        setApiError(formatAPIError(res.error));\r\n      }\r\n    }\r\n  };\r\n\r\n  if (\r\n    !match ||\r\n    (match.params.authType !== 'register' && match.params.authType !== 'register-admin')\r\n  ) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  const isAdminRegistration = match.params.authType === 'register-admin';\r\n\r\n  const schema = isAdminRegistration ? REGISTER_ADMIN_SCHEMA : REGISTER_USER_SCHEMA;\r\n\r\n  return (\r\n    <UnauthenticatedLayout>\r\n      <LayoutContent>\r\n        <Flex direction=\"column\" alignItems=\"center\" gap={3}>\r\n          <Logo />\r\n\r\n          <Typography tag=\"h1\" variant=\"alpha\" textAlign=\"center\">\r\n            {formatMessage({\r\n              id: 'Auth.form.welcome.title',\r\n              defaultMessage: 'Welcome to Strapi!',\r\n            })}\r\n          </Typography>\r\n          <Typography variant=\"epsilon\" textColor=\"neutral600\" textAlign=\"center\">\r\n            {formatMessage({\r\n              id: 'Auth.form.register.subtitle',\r\n              defaultMessage:\r\n                'Credentials are only used to authenticate in Strapi. All saved data will be stored in your database.',\r\n            })}\r\n          </Typography>\r\n          {apiError ? (\r\n            <Typography id=\"global-form-error\" role=\"alert\" tabIndex={-1} textColor=\"danger600\">\r\n              {apiError}\r\n            </Typography>\r\n          ) : null}\r\n        </Flex>\r\n        <Form\r\n          method=\"POST\"\r\n          initialValues={\r\n            {\r\n              firstname: userInfo?.firstname || '',\r\n              lastname: userInfo?.lastname || '',\r\n              email: userInfo?.email || '',\r\n              password: '',\r\n              confirmPassword: '',\r\n              registrationToken: registrationToken || undefined,\r\n              news: false,\r\n            } satisfies RegisterFormValues\r\n          }\r\n          onSubmit={async (data, helpers) => {\r\n            const normalizedData = normalizeData(data);\r\n\r\n            try {\r\n              await schema.validate(normalizedData, { abortEarly: false });\r\n\r\n              if (submitCount > 0 && isAdminRegistration) {\r\n                trackUsage('didSubmitWithErrorsFirstAdmin', { count: submitCount.toString() });\r\n              }\r\n\r\n              if (normalizedData.registrationToken) {\r\n                handleRegisterUser(\r\n                  {\r\n                    userInfo: omit(normalizedData, [\r\n                      'registrationToken',\r\n                      'confirmPassword',\r\n                      'email',\r\n                      'news',\r\n                    ]),\r\n                    registrationToken: normalizedData.registrationToken,\r\n                    news: normalizedData.news,\r\n                  },\r\n                  helpers.setErrors\r\n                );\r\n              } else {\r\n                await handleRegisterAdmin(\r\n                  omit(normalizedData, ['registrationToken', 'confirmPassword']),\r\n                  helpers.setErrors\r\n                );\r\n              }\r\n            } catch (err) {\r\n              if (err instanceof ValidationError) {\r\n                helpers.setErrors(\r\n                  err.inner.reduce<Record<string, string>>((acc, { message, path }) => {\r\n                    if (path && typeof message === 'object') {\r\n                      acc[path] = formatMessage(message);\r\n                    }\r\n                    return acc;\r\n                  }, {})\r\n                );\r\n              }\r\n              setSubmitCount(submitCount + 1);\r\n            }\r\n          }}\r\n        >\r\n          <Flex direction=\"column\" alignItems=\"stretch\" gap={6} marginTop={7}>\r\n            <Grid.Root gap={4}>\r\n              {[\r\n                {\r\n                  label: formatMessage({\r\n                    id: 'Auth.form.firstname.label',\r\n                    defaultMessage: 'Firstname',\r\n                  }),\r\n                  name: 'firstname',\r\n                  required: true,\r\n                  size: 6,\r\n                  type: 'string' as const,\r\n                },\r\n                {\r\n                  label: formatMessage({\r\n                    id: 'Auth.form.lastname.label',\r\n                    defaultMessage: 'Lastname',\r\n                  }),\r\n                  name: 'lastname',\r\n                  size: 6,\r\n                  type: 'string' as const,\r\n                },\r\n                {\r\n                  disabled: !isAdminRegistration,\r\n                  label: formatMessage({\r\n                    id: 'Auth.form.email.label',\r\n                    defaultMessage: 'Email',\r\n                  }),\r\n                  name: 'email',\r\n                  required: true,\r\n                  size: 12,\r\n                  type: 'email' as const,\r\n                },\r\n                {\r\n                  hint: formatMessage({\r\n                    id: 'Auth.form.password.hint',\r\n                    defaultMessage:\r\n                      'Must be at least 8 characters, 1 uppercase, 1 lowercase & 1 number',\r\n                  }),\r\n                  label: formatMessage({\r\n                    id: 'global.password',\r\n                    defaultMessage: 'Password',\r\n                  }),\r\n                  name: 'password',\r\n                  required: true,\r\n                  size: 12,\r\n                  type: 'password' as const,\r\n                },\r\n                {\r\n                  label: formatMessage({\r\n                    id: 'Auth.form.confirmPassword.label',\r\n                    defaultMessage: 'Confirm Password',\r\n                  }),\r\n                  name: 'confirmPassword',\r\n                  required: true,\r\n                  size: 12,\r\n                  type: 'password' as const,\r\n                },\r\n                {\r\n                  label: formatMessage(\r\n                    {\r\n                      id: 'Auth.form.register.news.label',\r\n                      defaultMessage:\r\n                        'Keep me updated about new features & upcoming improvements (by doing this you accept the {terms} and the {policy}).',\r\n                    },\r\n                    {\r\n                      terms: (\r\n                        <A target=\"_blank\" href=\"https://strapi.io/terms\" rel=\"noreferrer\">\r\n                          {formatMessage({\r\n                            id: 'Auth.privacy-policy-agreement.terms',\r\n                            defaultMessage: 'terms',\r\n                          })}\r\n                        </A>\r\n                      ),\r\n                      policy: (\r\n                        <A target=\"_blank\" href=\"https://strapi.io/privacy\" rel=\"noreferrer\">\r\n                          {formatMessage({\r\n                            id: 'Auth.privacy-policy-agreement.policy',\r\n                            defaultMessage: 'policy',\r\n                          })}\r\n                        </A>\r\n                      ),\r\n                    }\r\n                  ),\r\n                  name: 'news',\r\n                  size: 12,\r\n                  type: 'checkbox' as const,\r\n                },\r\n              ].map(({ size, ...field }) => (\r\n                <Grid.Item key={field.name} col={size} direction=\"column\" alignItems=\"stretch\">\r\n                  <InputRenderer {...field} />\r\n                </Grid.Item>\r\n              ))}\r\n            </Grid.Root>\r\n            <Button fullWidth size=\"L\" type=\"submit\">\r\n              {formatMessage({\r\n                id: 'Auth.form.button.register',\r\n                defaultMessage: \"Let's start\",\r\n              })}\r\n            </Button>\r\n          </Flex>\r\n        </Form>\r\n        {match?.params.authType === 'register' && (\r\n          <Box paddingTop={4}>\r\n            <Flex justifyContent=\"center\">\r\n              <Link tag={NavLink} to=\"/auth/login\">\r\n                {formatMessage({\r\n                  id: 'Auth.link.signin.account',\r\n                  defaultMessage: 'Already have an account?',\r\n                })}\r\n              </Link>\r\n            </Flex>\r\n          </Box>\r\n        )}\r\n      </LayoutContent>\r\n    </UnauthenticatedLayout>\r\n  );\r\n};\r\n\r\ninterface RegisterFormValues {\r\n  firstname: string;\r\n  lastname: string;\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  registrationToken: string | undefined;\r\n  news: boolean;\r\n}\r\n\r\ntype StringKeys<T> = {\r\n  [K in keyof T]: T[K] extends string | undefined ? K : never;\r\n}[keyof T];\r\n\r\n/**\r\n * @description Trims all values but the password & sets lastName to null if it's a falsey value.\r\n */\r\nfunction normalizeData(data: RegisterFormValues) {\r\n  return Object.entries(data).reduce(\r\n    (acc, [key, value]) => {\r\n      type PasswordKeys = Extract<keyof RegisterFormValues, 'password' | 'confirmPassword'>;\r\n      type RegisterFormStringValues = Exclude<\r\n        keyof Pick<RegisterFormValues, StringKeys<RegisterFormValues>>,\r\n        PasswordKeys\r\n      >;\r\n\r\n      if (!['password', 'confirmPassword'].includes(key) && typeof value === 'string') {\r\n        acc[key as RegisterFormStringValues] = value.trim();\r\n\r\n        if (key === 'lastname') {\r\n          acc[key] = value || undefined;\r\n        }\r\n      } else {\r\n        acc[key as PasswordKeys] = value;\r\n      }\r\n\r\n      return acc;\r\n    },\r\n    {} as {\r\n      firstname: string;\r\n      lastname: string | undefined;\r\n      email: string;\r\n      password: string;\r\n      confirmPassword: string;\r\n      registrationToken: string | undefined;\r\n      news: boolean;\r\n    }\r\n  );\r\n}\r\n\r\nconst A = styled.a`\r\n  color: ${({ theme }) => theme.colors.primary600};\r\n`;\r\n\r\nexport { Register };\r\nexport type { RegisterProps };\r\n", "import * as React from 'react';\r\n\r\nimport { Box, Button, Flex, Main, Typography, Link } from '@strapi/design-system';\r\nimport { useIntl } from 'react-intl';\r\nimport { NavLink, useNavigate, Navigate, useLocation } from 'react-router-dom';\r\nimport * as yup from 'yup';\r\n\r\nimport { ResetPassword } from '../../../../../shared/contracts/authentication';\r\nimport { Form } from '../../../components/Form';\r\nimport { InputRenderer } from '../../../components/FormInputs/Renderer';\r\nimport { Logo } from '../../../components/UnauthenticatedLogo';\r\nimport { useTypedDispatch } from '../../../core/store/hooks';\r\nimport { useAPIErrorHandler } from '../../../hooks/useAPIErrorHandler';\r\nimport {\r\n  Column,\r\n  LayoutContent,\r\n  UnauthenticatedLayout,\r\n} from '../../../layouts/UnauthenticatedLayout';\r\nimport { login } from '../../../reducer';\r\nimport { useResetPasswordMutation } from '../../../services/auth';\r\nimport { isBaseQueryError } from '../../../utils/baseQuery';\r\nimport { getByteSize } from '../../../utils/strings';\r\nimport { translatedErrors } from '../../../utils/translatedErrors';\r\n\r\nconst RESET_PASSWORD_SCHEMA = yup.object().shape({\r\n  password: yup\r\n    .string()\r\n    .min(8, {\r\n      id: translatedErrors.minLength.id,\r\n      defaultMessage: 'Password must be at least 8 characters',\r\n      values: { min: 8 },\r\n    })\r\n    // bcrypt has a max length of 72 bytes (not characters!)\r\n    .test(\r\n      'required-byte-size',\r\n      {\r\n        id: 'components.Input.error.contain.maxBytes',\r\n        defaultMessage: 'Password must be less than 73 bytes',\r\n      },\r\n      function (value) {\r\n        if (!value || typeof value !== 'string') return true; // validated elsewhere\r\n\r\n        const byteSize = getByteSize(value);\r\n        return byteSize <= 72;\r\n      }\r\n    )\r\n    .matches(/[a-z]/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.lowercase',\r\n        defaultMessage: 'Password must contain at least 1 lowercase letter',\r\n      },\r\n    })\r\n    .matches(/[A-Z]/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.uppercase',\r\n        defaultMessage: 'Password must contain at least 1 uppercase letter',\r\n      },\r\n    })\r\n    .matches(/\\d/, {\r\n      message: {\r\n        id: 'components.Input.error.contain.number',\r\n        defaultMessage: 'Password must contain at least 1 number',\r\n      },\r\n    })\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Password is required',\r\n    })\r\n    .nullable(),\r\n  confirmPassword: yup\r\n    .string()\r\n    .required({\r\n      id: translatedErrors.required.id,\r\n      defaultMessage: 'Confirm password is required',\r\n    })\r\n    .oneOf([yup.ref('password'), null], {\r\n      id: 'components.Input.error.password.noMatch',\r\n      defaultMessage: 'Passwords must match',\r\n    })\r\n    .nullable(),\r\n});\r\n\r\nconst ResetPassword = () => {\r\n  const { formatMessage } = useIntl();\r\n  const dispatch = useTypedDispatch();\r\n  const navigate = useNavigate();\r\n  const { search: searchString } = useLocation();\r\n  const query = React.useMemo(() => new URLSearchParams(searchString), [searchString]);\r\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\r\n\r\n  const [resetPassword, { error }] = useResetPasswordMutation();\r\n\r\n  const handleSubmit = async (body: ResetPassword.Request['body']) => {\r\n    const res = await resetPassword(body);\r\n\r\n    if ('data' in res) {\r\n      dispatch(login({ token: res.data.token }));\r\n      navigate('/');\r\n    }\r\n  };\r\n  /**\r\n   * If someone doesn't have a reset password token\r\n   * then they should just be redirected back to the login page.\r\n   */\r\n  if (!query.get('code')) {\r\n    return <Navigate to=\"/auth/login\" />;\r\n  }\r\n\r\n  return (\r\n    <UnauthenticatedLayout>\r\n      <Main>\r\n        <LayoutContent>\r\n          <Column>\r\n            <Logo />\r\n            <Box paddingTop={6} paddingBottom={7}>\r\n              <Typography tag=\"h1\" variant=\"alpha\">\r\n                {formatMessage({\r\n                  id: 'global.reset-password',\r\n                  defaultMessage: 'Reset password',\r\n                })}\r\n              </Typography>\r\n            </Box>\r\n            {error ? (\r\n              <Typography id=\"global-form-error\" role=\"alert\" tabIndex={-1} textColor=\"danger600\">\r\n                {isBaseQueryError(error)\r\n                  ? formatAPIError(error)\r\n                  : formatMessage({\r\n                      id: 'notification.error',\r\n                      defaultMessage: 'An error occurred',\r\n                    })}\r\n              </Typography>\r\n            ) : null}\r\n          </Column>\r\n          <Form\r\n            method=\"POST\"\r\n            initialValues={{\r\n              password: '',\r\n              confirmPassword: '',\r\n            }}\r\n            onSubmit={(values) => {\r\n              // We know query.code is defined because we check for it above.\r\n              handleSubmit({ password: values.password, resetPasswordToken: query.get('code')! });\r\n            }}\r\n            validationSchema={RESET_PASSWORD_SCHEMA}\r\n          >\r\n            <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\r\n              {[\r\n                {\r\n                  hint: formatMessage({\r\n                    id: 'Auth.form.password.hint',\r\n                    defaultMessage:\r\n                      'Password must contain at least 8 characters, 1 uppercase, 1 lowercase and 1 number',\r\n                  }),\r\n                  label: formatMessage({\r\n                    id: 'global.password',\r\n                    defaultMessage: 'Password',\r\n                  }),\r\n                  name: 'password',\r\n                  required: true,\r\n                  type: 'password' as const,\r\n                },\r\n                {\r\n                  label: formatMessage({\r\n                    id: 'Auth.form.confirmPassword.label',\r\n                    defaultMessage: 'Confirm Password',\r\n                  }),\r\n                  name: 'confirmPassword',\r\n                  required: true,\r\n                  type: 'password' as const,\r\n                },\r\n              ].map((field) => (\r\n                <InputRenderer key={field.name} {...field} />\r\n              ))}\r\n              <Button fullWidth type=\"submit\">\r\n                {formatMessage({\r\n                  id: 'global.change-password',\r\n                  defaultMessage: 'Change password',\r\n                })}\r\n              </Button>\r\n            </Flex>\r\n          </Form>\r\n        </LayoutContent>\r\n        <Flex justifyContent=\"center\">\r\n          <Box paddingTop={4}>\r\n            <Link tag={NavLink} to=\"/auth/login\">\r\n              {formatMessage({ id: 'Auth.link.ready', defaultMessage: 'Ready to sign in?' })}\r\n            </Link>\r\n          </Box>\r\n        </Flex>\r\n      </Main>\r\n    </UnauthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { ResetPassword };\r\n", "import type { ComponentType } from 'react';\r\n\r\nimport { ForgotPassword } from './components/ForgotPassword';\r\nimport { ForgotPasswordSuccess } from './components/ForgotPasswordSuccess';\r\nimport { Oops } from './components/Oops';\r\nimport { Register, RegisterProps } from './components/Register';\r\nimport { ResetPassword } from './components/ResetPassword';\r\n\r\nexport type AuthType =\r\n  | 'login'\r\n  | 'register'\r\n  | 'register-admin'\r\n  | 'forgot-password'\r\n  | 'reset-password'\r\n  | 'forgot-password-success'\r\n  | 'oops'\r\n  | 'providers';\r\n\r\nexport type FormDictionary = Record<AuthType, ComponentType | ComponentType<RegisterProps>>;\r\n\r\nexport const FORMS = {\r\n  'forgot-password': ForgotPassword,\r\n  'forgot-password-success': ForgotPasswordSuccess,\r\n  // the `Component` attribute is set after all forms and CE/EE components are loaded, but since we\r\n  // are here outside of a React component we can not use the hook directly\r\n  login: () => null,\r\n  oops: Oops,\r\n  register: Register,\r\n  'register-admin': Register,\r\n  'reset-password': ResetPassword,\r\n  providers: () => null,\r\n} satisfies FormDictionary;\r\n", "import { Navigate, useLocation, useMatch } from 'react-router-dom';\r\n\r\nimport { useAuth } from '../../features/Auth';\r\nimport { useEnterprise } from '../../hooks/useEnterprise';\r\nimport { useInitQuery } from '../../services/admin';\r\n\r\nimport { Login as LoginCE } from './components/Login';\r\nimport { FORMS, FormDictionary } from './constants';\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * AuthPage\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nconst AuthPage = () => {\r\n  const { search } = useLocation();\r\n  const match = useMatch('/auth/:authType');\r\n  const authType = match?.params.authType;\r\n  const { data } = useInitQuery();\r\n  const { hasAdmin } = data ?? {};\r\n  const Login = useEnterprise(\r\n    LoginCE,\r\n    async () => (await import('../../../../ee/admin/src/pages/AuthPage/components/Login')).LoginEE\r\n  );\r\n  const forms = useEnterprise<FormDictionary, Partial<FormDictionary>>(\r\n    FORMS,\r\n    async () => (await import('../../../../ee/admin/src/pages/AuthPage/constants')).FORMS,\r\n    {\r\n      combine(ceForms, eeForms) {\r\n        return {\r\n          ...ceForms,\r\n          ...eeForms,\r\n        };\r\n      },\r\n      defaultValue: FORMS,\r\n    }\r\n  );\r\n\r\n  const { token } = useAuth('AuthPage', (auth) => auth);\r\n\r\n  if (!authType || !forms) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  const Component = forms[authType as keyof FormDictionary];\r\n\r\n  // Redirect the user to the login page if\r\n  // the endpoint does not exists\r\n  if (!Component) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  // User is already logged in\r\n  if (authType !== 'register-admin' && authType !== 'register' && token) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  // there is already an admin user oo\r\n  if (hasAdmin && authType === 'register-admin' && token) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  // Redirect the user to the register-admin if it is the first user\r\n  if (!hasAdmin && authType !== 'register-admin') {\r\n    return (\r\n      <Navigate\r\n        to={{\r\n          pathname: '/auth/register-admin',\r\n          // Forward the `?redirectTo` from /auth/login\r\n          // /abc => /auth/login?redirectTo=%2Fabc => /auth/register-admin?redirectTo=%2Fabc\r\n          search,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (Login && authType === 'login') {\r\n    // Assign the component to render for the login form\r\n    return <Login />;\r\n  } else if (authType === 'login' && !Login) {\r\n    // block rendering until the Login EE component is fully loaded\r\n    return null;\r\n  }\r\n\r\n  return <Component hasAdmin={hasAdmin} />;\r\n};\r\n\r\nexport { AuthPage };\r\n", "import type { RouteObject } from 'react-router-dom';\r\n\r\nexport const ROUTES_CE: RouteObject[] = [\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedListPage } = await import('./pages/Roles/ListPage');\r\n\r\n      return {\r\n        Component: ProtectedListPage,\r\n      };\r\n    },\r\n    path: 'roles',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedCreatePage } = await import('./pages/Roles/CreatePage');\r\n\r\n      return {\r\n        Component: ProtectedCreatePage,\r\n      };\r\n    },\r\n    path: 'roles/duplicate/:id',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedCreatePage } = await import('./pages/Roles/CreatePage');\r\n\r\n      return {\r\n        Component: ProtectedCreatePage,\r\n      };\r\n    },\r\n    path: 'roles/new',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedEditPage } = await import('./pages/Roles/EditPage');\r\n\r\n      return {\r\n        Component: ProtectedEditPage,\r\n      };\r\n    },\r\n    path: 'roles/:id',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedListPage } = await import('./pages/Users/ListPage');\r\n\r\n      return {\r\n        Component: ProtectedListPage,\r\n      };\r\n    },\r\n    path: 'users',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedEditPage } = await import('./pages/Users/EditPage');\r\n\r\n      return {\r\n        Component: ProtectedEditPage,\r\n      };\r\n    },\r\n    path: 'users/:id',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedCreatePage } = await import('./pages/Webhooks/CreatePage');\r\n\r\n      return {\r\n        Component: ProtectedCreatePage,\r\n      };\r\n    },\r\n    path: 'webhooks/create',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const editWebhook = await import('./pages/Webhooks/EditPage');\r\n\r\n      return {\r\n        Component: editWebhook.ProtectedEditPage,\r\n      };\r\n    },\r\n    path: 'webhooks/:id',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedListPage } = await import('./pages/Webhooks/ListPage');\r\n\r\n      return {\r\n        Component: ProtectedListPage,\r\n      };\r\n    },\r\n    path: 'webhooks',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedListView } = await import('./pages/ApiTokens/ListView');\r\n\r\n      return {\r\n        Component: ProtectedListView,\r\n      };\r\n    },\r\n    path: 'api-tokens',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedCreateView } = await import('./pages/ApiTokens/CreateView');\r\n\r\n      return {\r\n        Component: ProtectedCreateView,\r\n      };\r\n    },\r\n    path: 'api-tokens/create',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedEditView } = await import('./pages/ApiTokens/EditView/EditViewPage');\r\n\r\n      return {\r\n        Component: ProtectedEditView,\r\n      };\r\n    },\r\n    path: 'api-tokens/:id',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedCreateView } = await import('./pages/TransferTokens/CreateView');\r\n\r\n      return {\r\n        Component: ProtectedCreateView,\r\n      };\r\n    },\r\n    path: 'transfer-tokens/create',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedListView } = await import('./pages/TransferTokens/ListView');\r\n\r\n      return {\r\n        Component: ProtectedListView,\r\n      };\r\n    },\r\n    path: 'transfer-tokens',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedEditView } = await import('./pages/TransferTokens/EditView');\r\n\r\n      return {\r\n        Component: ProtectedEditView,\r\n      };\r\n    },\r\n    path: 'transfer-tokens/:id',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { ProtectedInstalledPlugins } = await import('./pages/InstalledPlugins');\r\n\r\n      return {\r\n        Component: ProtectedInstalledPlugins,\r\n      };\r\n    },\r\n    path: 'list-plugins',\r\n  },\r\n\r\n  {\r\n    lazy: async () => {\r\n      const { PurchaseAuditLogs } = await import('./pages/PurchaseAuditLogs');\r\n\r\n      return {\r\n        Component: PurchaseAuditLogs,\r\n      };\r\n    },\r\n    path: 'purchase-audit-logs',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { PurchaseSingleSignOn } = await import('./pages/PurchaseSingleSignOn');\r\n\r\n      return {\r\n        Component: PurchaseSingleSignOn,\r\n      };\r\n    },\r\n    path: 'purchase-single-sign-on',\r\n  },\r\n  {\r\n    lazy: async () => {\r\n      const { PurchaseContentHistory } = await import('./pages/PurchaseContentHistory');\r\n\r\n      return {\r\n        Component: PurchaseContentHistory,\r\n      };\r\n    },\r\n    path: 'purchase-content-history',\r\n  },\r\n];\r\n", "/* eslint-disable check-file/filename-naming-convention */\r\n\r\nimport { RouteObject } from 'react-router-dom';\r\n\r\nimport { getEERoutes as getBaseEERoutes } from '../../ee/admin/src/constants';\r\nimport { getEERoutes as getSettingsEERoutes } from '../../ee/admin/src/pages/SettingsPage/constants';\r\n\r\nimport { AuthPage } from './pages/Auth/AuthPage';\r\nimport { ROUTES_CE } from './pages/Settings/constants';\r\n\r\n/**\r\n * These are routes we don't want to be able to be changed by plugins.\r\n */\r\nconst getImmutableRoutes = (): RouteObject[] => [\r\n  {\r\n    path: 'usecase',\r\n    lazy: async () => {\r\n      const { PrivateUseCasePage } = await import('./pages/UseCasePage');\r\n\r\n      return {\r\n        Component: PrivateUseCasePage,\r\n      };\r\n    },\r\n  },\r\n  // this needs to go before auth/:authType because otherwise it won't match the route\r\n  ...getBaseEERoutes(),\r\n  {\r\n    path: 'auth/:authType',\r\n    element: <AuthPage />,\r\n  },\r\n];\r\n\r\nconst getInitialRoutes = (): RouteObject[] => [\r\n  {\r\n    index: true,\r\n    lazy: async () => {\r\n      const { HomePage } = await import('./pages/Home/HomePage');\r\n\r\n      return {\r\n        Component: HomePage,\r\n      };\r\n    },\r\n  },\r\n  {\r\n    path: 'me',\r\n    lazy: async () => {\r\n      const { ProfilePage } = await import('./pages/ProfilePage');\r\n\r\n      return {\r\n        Component: ProfilePage,\r\n      };\r\n    },\r\n  },\r\n  {\r\n    path: 'marketplace',\r\n    lazy: async () => {\r\n      const { ProtectedMarketplacePage } = await import('./pages/Marketplace/MarketplacePage');\r\n\r\n      return {\r\n        Component: ProtectedMarketplacePage,\r\n      };\r\n    },\r\n  },\r\n  {\r\n    path: 'settings/*',\r\n    lazy: async () => {\r\n      const { Layout } = await import('./pages/Settings/Layout');\r\n\r\n      return {\r\n        Component: Layout,\r\n      };\r\n    },\r\n    children: [\r\n      {\r\n        path: 'application-infos',\r\n        lazy: async () => {\r\n          const { ApplicationInfoPage } = await import(\r\n            './pages/Settings/pages/ApplicationInfo/ApplicationInfoPage'\r\n          );\r\n\r\n          return {\r\n            Component: ApplicationInfoPage,\r\n          };\r\n        },\r\n      },\r\n      // ...Object.values(this.settings).flatMap(({ links }) =>\r\n      //   links.map(({ to, Component }) => ({\r\n      //     path: `${to}/*`,\r\n      //     element: (\r\n      //       <React.Suspense fallback={<Page.Loading />}>\r\n      //         <Component />\r\n      //       </React.Suspense>\r\n      //     ),\r\n      //   }))\r\n      // ),\r\n      ...[...getSettingsEERoutes(), ...ROUTES_CE].filter(\r\n        (route, index, refArray) => refArray.findIndex((obj) => obj.path === route.path) === index\r\n      ),\r\n    ],\r\n  },\r\n];\r\n\r\nexport { getImmutableRoutes, getInitialRoutes };\r\n", "/* eslint-disable check-file/filename-naming-convention */\r\n\r\nimport invariant from 'invariant';\r\nimport { To } from 'react-router-dom';\r\n\r\nimport { Permission } from '../../../../shared/contracts/shared';\r\n\r\nimport type { Internal, Utils } from '@strapi/types';\r\nimport type { MessageDescriptor } from 'react-intl';\r\n\r\ntype WidgetUID = Utils.String.Suffix<\r\n  | Internal.Namespace.WithSeparator<Internal.Namespace.Plugin>\r\n  | Internal.Namespace.WithSeparator<Internal.Namespace.Global>,\r\n  string\r\n>;\r\n\r\ntype WidgetArgs = {\r\n  icon?: typeof import('@strapi/icons').PuzzlePiece;\r\n  title: MessageDescriptor;\r\n  link?: {\r\n    label: MessageDescriptor;\r\n    href: To;\r\n  };\r\n  component: () => Promise<React.ComponentType>;\r\n  pluginId?: string;\r\n  id: string;\r\n  permissions?: Array<Pick<Permission, 'action'> & Partial<Omit<Permission, 'action'>>>;\r\n};\r\n\r\ntype Widget = Omit<WidgetArgs, 'id' | 'pluginId'> & { uid: WidgetUID };\r\n\r\nclass Widgets {\r\n  widgets: Record<string, Widget>;\r\n\r\n  constructor() {\r\n    this.widgets = {};\r\n  }\r\n\r\n  register = (widget: WidgetArgs | WidgetArgs[]) => {\r\n    if (Array.isArray(widget)) {\r\n      widget.forEach((newWidget) => {\r\n        this.register(newWidget);\r\n      });\r\n    } else {\r\n      invariant(widget.id, 'An id must be provided');\r\n      invariant(widget.component, 'A component must be provided');\r\n      invariant(widget.title, 'A title must be provided');\r\n      invariant(widget.icon, 'An icon must be provided');\r\n\r\n      // Replace id and pluginId with computed uid\r\n      const { id, pluginId, ...widgetToStore } = widget;\r\n      const uid: WidgetUID = pluginId ? `plugin::${pluginId}.${id}` : `global::${id}`;\r\n\r\n      this.widgets[uid] = { ...widgetToStore, uid };\r\n    }\r\n  };\r\n\r\n  getAll = () => {\r\n    return Object.values(this.widgets);\r\n  };\r\n}\r\n\r\nexport { Widgets };\r\nexport type { WidgetArgs, Widget };\r\n", "import {\r\n  configureStore,\r\n  StoreEnhancer,\r\n  Middleware,\r\n  Reducer,\r\n  combineReducers,\r\n  MiddlewareAPI,\r\n  isRejected,\r\n} from '@reduxjs/toolkit';\r\n\r\nimport { reducer as appReducer, AppState, logout } from '../../reducer';\r\nimport { adminApi } from '../../services/api';\r\n\r\n/**\r\n * @description Static reducers are ones we know, they live in the admin package.\r\n */\r\nconst staticReducers = {\r\n  [adminApi.reducerPath]: adminApi.reducer,\r\n  admin_app: appReducer,\r\n} as const;\r\n\r\nconst injectReducerStoreEnhancer: (appReducers: Record<string, Reducer>) => StoreEnhancer =\r\n  (appReducers) =>\r\n  (next) =>\r\n  (...args) => {\r\n    const store = next(...args);\r\n\r\n    const asyncReducers: Record<string, Reducer> = {};\r\n\r\n    return {\r\n      ...store,\r\n      asyncReducers,\r\n      injectReducer: (key: string, asyncReducer: Reducer) => {\r\n        asyncReducers[key] = asyncReducer;\r\n        store.replaceReducer(\r\n          // @ts-expect-error we dynamically add reducers which makes the types uncomfortable.\r\n          combineReducers({\r\n            ...appReducers,\r\n            ...asyncReducers,\r\n          })\r\n        );\r\n      },\r\n    };\r\n  };\r\n\r\ntype PreloadState = Partial<{\r\n  admin_app: AppState;\r\n}>;\r\n\r\n/**\r\n * @description This is the main store configuration function, injected Reducers use our legacy app.addReducer API,\r\n * which we're trying to phase out. App Middlewares could potentially be improved...?\r\n */\r\nconst configureStoreImpl = (\r\n  preloadedState: PreloadState = {},\r\n  appMiddlewares: Array<() => Middleware> = [],\r\n  injectedReducers: Record<string, Reducer> = {}\r\n) => {\r\n  const coreReducers = { ...staticReducers, ...injectedReducers } as const;\r\n\r\n  const defaultMiddlewareOptions = {} as any;\r\n\r\n  // These are already disabled in 'production' env but we also need to disable it in test environments\r\n  // However, we want to leave them on for development so any issues can still be caught\r\n  if (process.env.NODE_ENV === 'test') {\r\n    defaultMiddlewareOptions.serializableCheck = false;\r\n    defaultMiddlewareOptions.immutableCheck = false;\r\n  }\r\n\r\n  const store = configureStore({\r\n    preloadedState: {\r\n      admin_app: preloadedState.admin_app,\r\n    },\r\n    reducer: coreReducers,\r\n    devTools: process.env.NODE_ENV !== 'production',\r\n    middleware: (getDefaultMiddleware) => [\r\n      ...getDefaultMiddleware(defaultMiddlewareOptions),\r\n      rtkQueryUnauthorizedMiddleware,\r\n      adminApi.middleware,\r\n      ...appMiddlewares.map((m) => m()),\r\n    ],\r\n    enhancers: [injectReducerStoreEnhancer(coreReducers)],\r\n  });\r\n\r\n  return store;\r\n};\r\n\r\nconst rtkQueryUnauthorizedMiddleware: Middleware =\r\n  ({ dispatch }: MiddlewareAPI) =>\r\n  (next) =>\r\n  (action) => {\r\n    // isRejectedWithValue Or isRejected\r\n    if (isRejected(action) && action.payload?.status === 401) {\r\n      dispatch(logout());\r\n      window.location.href = '/admin/auth/login';\r\n      return;\r\n    }\r\n\r\n    return next(action);\r\n  };\r\n\r\ntype Store = ReturnType<typeof configureStoreImpl> & {\r\n  asyncReducers: Record<string, Reducer>;\r\n  injectReducer: (key: string, asyncReducer: Reducer) => void;\r\n};\r\n\r\ntype RootState = ReturnType<Store['getState']>;\r\n\r\ntype Dispatch = Store['dispatch'];\r\n\r\nexport { configureStoreImpl as configureStore };\r\nexport type { RootState, Dispatch, AppState, Store, PreloadState };\r\n", "/* eslint-disable no-await-in-loop */\r\n/* eslint-disable no-restricted-syntax */\r\n\r\nimport type { Store } from '../store/configure';\r\n\r\nexport type Handler = (...args: any[]) => any;\r\n\r\nexport const createHook = () => {\r\n  const _handlers: Handler[] = [];\r\n\r\n  return {\r\n    register(fn: Handler) {\r\n      _handlers.push(fn);\r\n    },\r\n    delete(handler: Handler) {\r\n      _handlers.splice(_handlers.indexOf(handler), 1);\r\n    },\r\n    runWaterfall<T>(args: T, store?: Store) {\r\n      return _handlers.reduce((acc, fn) => fn(acc, store), args);\r\n    },\r\n    async runWaterfallAsync<T>(args: T, store?: Store) {\r\n      let result = args;\r\n\r\n      for (const fn of _handlers) {\r\n        result = await fn(result, store);\r\n      }\r\n\r\n      return result;\r\n    },\r\n    runSeries<T extends any[]>(...args: T) {\r\n      return _handlers.map((fn) => fn(...args));\r\n    },\r\n    async runSeriesAsync<T extends any[]>(...args: T) {\r\n      const result = [];\r\n\r\n      for (const fn of _handlers) {\r\n        result.push(await fn(...args));\r\n      }\r\n\r\n      return result;\r\n    },\r\n    runParallel<T extends any[]>(...args: T) {\r\n      return Promise.all(\r\n        _handlers.map((fn) => {\r\n          return fn(...args);\r\n        })\r\n      );\r\n    },\r\n  };\r\n};\r\n", "export const languageNativeNames = {\r\n  ar: 'العربية',\r\n  ca: 'Català',\r\n  cs: 'Čeština',\r\n  de: 'Deutsch',\r\n  dk: 'Dansk',\r\n  en: 'English',\r\n  'en-GB': 'English (United Kingdom)',\r\n  es: 'Español',\r\n  eu: 'Euskara',\r\n  uz: 'O`zbekcha',\r\n  ro: 'Română',\r\n  fr: 'Français',\r\n  gu: 'Gujarati',\r\n  he: 'עברית',\r\n  hu: 'Magyar',\r\n  id: 'Indonesian',\r\n  it: 'Italiano',\r\n  ja: '日本語',\r\n  ko: '한국어',\r\n  ml: 'Malayalam',\r\n  ms: 'Melayu',\r\n  nl: 'Nederlands',\r\n  no: 'Norwegian',\r\n  pl: 'Polski',\r\n  'pt-BR': 'Português (Brasil)',\r\n  pt: 'Português (Portugal)',\r\n  ru: 'Русский',\r\n  sk: 'Slovenčina',\r\n  sv: 'Swedish',\r\n  th: 'ไทย',\r\n  tr: 'Türkçe',\r\n  uk: 'Українська',\r\n  vi: 'Tiếng Việt',\r\n  'zh-Hans': '中文 (简体)',\r\n  zh: '中文 (繁體)',\r\n  sa: 'संस्कृत',\r\n  hi: 'हिन्दी',\r\n} as const;\r\n", "/**\r\n * This component will render DescriptionComponents that return objects e.g. `cm.apis.addEditViewPanel`\r\n * these descriptions are still treated like components because users can use react hooks in them.\r\n *\r\n * Rendering them normally by mapping etc. causes mutliple render issues.\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nimport isEqual from 'lodash/isEqual';\r\n\r\nimport { useForceUpdate } from '../hooks/useForceUpdate';\r\nimport { useThrottledCallback } from '../hooks/useThrottledCallback';\r\nimport { cancelIdleCallback, requestIdleCallback } from '../utils/shims';\r\n\r\ninterface DescriptionComponent<Props, Description> {\r\n  (props: Props): Description | null;\r\n}\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * DescriptionComponentRenderer\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\ninterface DescriptionComponentRendererProps<Props = any, Description = any> {\r\n  children: (descriptions: Array<Description & { id: string }>) => React.ReactNode;\r\n  descriptions: DescriptionComponent<Props, Description>[];\r\n  props: Props;\r\n}\r\n\r\n/**\r\n * @internal\r\n *\r\n * @description This component takes an array of DescriptionComponents, which are react components that return objects as opposed to JSX.\r\n * We render these in their own isolated memoized component and use an update function to push the data back out to the parent.\r\n * Saving it in a ref, and then \"forcing\" an update of the parent component to render the children of this component with the new data.\r\n *\r\n * The DescriptionCompoonents can take props and use react hooks hence why we render them as if they were a component. The update\r\n * function is throttled and managed to avoid erroneous updates where we could wait a single tick to update the entire UI, which\r\n * creates less \"popping\" from functions being called in rapid succession.\r\n */\r\nconst DescriptionComponentRenderer = <Props, Description>({\r\n  children,\r\n  props,\r\n  descriptions,\r\n}: DescriptionComponentRendererProps<Props, Description>) => {\r\n  const statesRef = React.useRef<Record<string, { value: Description & { id: string } }>>({});\r\n  const [tick, forceUpdate] = useForceUpdate();\r\n\r\n  const requestHandle = React.useRef<number | null>(null);\r\n  const requestUpdate = React.useCallback(() => {\r\n    if (requestHandle.current) {\r\n      cancelIdleCallback(requestHandle.current);\r\n    }\r\n\r\n    requestHandle.current = requestIdleCallback(() => {\r\n      requestHandle.current = null;\r\n\r\n      forceUpdate();\r\n    });\r\n  }, [forceUpdate]);\r\n\r\n  /**\r\n   * This will avoid us calling too many react updates in a short space of time.\r\n   */\r\n  const throttledRequestUpdate = useThrottledCallback(requestUpdate, 60, { trailing: true });\r\n\r\n  const update = React.useCallback<DescriptionProps<Props, Description>['update']>(\r\n    (id, description) => {\r\n      if (description === null) {\r\n        delete statesRef.current[id];\r\n      } else {\r\n        const current = statesRef.current[id];\r\n        statesRef.current[id] = { ...current, value: { ...description, id } };\r\n      }\r\n\r\n      throttledRequestUpdate();\r\n    },\r\n    [throttledRequestUpdate]\r\n  );\r\n\r\n  const ids = React.useMemo(\r\n    () => descriptions.map((description) => getCompId(description)),\r\n    [descriptions]\r\n  );\r\n\r\n  const states = React.useMemo(\r\n    () =>\r\n      ids\r\n        .map((id) => statesRef.current[id]?.value)\r\n        .filter((state) => state !== null && state !== undefined),\r\n    /**\r\n     * we leave tick in the deps to ensure the memo is recalculated when the `update` function  is called.\r\n     * the `ids` will most likely be stable unless we get new actions, but we can't respond to the Description\r\n     * Component changing the ref data in any other way.\r\n     */\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [ids, tick]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {descriptions.map((description) => {\r\n        const key = getCompId(description);\r\n        return (\r\n          <Description key={key} id={key} description={description} props={props} update={update} />\r\n        );\r\n      })}\r\n      {children(states)}\r\n    </>\r\n  );\r\n};\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * Description\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\ninterface DescriptionProps<Props, Description> {\r\n  description: DescriptionComponent<Props, Description>;\r\n  id: string;\r\n  props: Props;\r\n  update: (id: string, value: Description | null) => void;\r\n}\r\n\r\n/**\r\n * Descriptions are objects, but to create the object, we allow users to create components,\r\n * this means they can use react hooks in them. It also means we need to render them\r\n * within a component, however because they return an object of data we can't add that\r\n * to the react tree, instead we push it back out to the parent.\r\n */\r\nconst Description = React.memo(\r\n  ({ description, id, props, update }: DescriptionProps<any, any>) => {\r\n    const comp = description(props);\r\n\r\n    useShallowCompareEffect(() => {\r\n      update(id, comp);\r\n\r\n      return () => {\r\n        update(id, null);\r\n      };\r\n    }, comp);\r\n\r\n    return null;\r\n  },\r\n  (prev, next) => isEqual(prev.props, next.props)\r\n);\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * Helpers\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nconst ids = new WeakMap<DescriptionComponent<any, any>, string>();\r\n\r\nlet counter = 0;\r\n\r\nfunction getCompId<T, K>(comp: DescriptionComponent<T, K>): string {\r\n  const cachedId = ids.get(comp);\r\n\r\n  if (cachedId) return cachedId;\r\n\r\n  const id = `${comp.name || (comp as any).displayName || '<anonymous>'}-${counter++}`;\r\n\r\n  ids.set(comp, id);\r\n\r\n  return id;\r\n}\r\n\r\nconst useShallowCompareMemoize = <T,>(value: T): Array<T | undefined> => {\r\n  const ref = React.useRef<T | undefined>(undefined);\r\n\r\n  if (!isEqual(value, ref.current)) {\r\n    ref.current = value;\r\n  }\r\n\r\n  return [ref.current];\r\n};\r\n\r\nconst useShallowCompareEffect = (callback: React.EffectCallback, dependencies?: unknown) => {\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps -- the linter isn't able to see that deps are properly handled here\r\n  React.useEffect(callback, useShallowCompareMemoize(dependencies));\r\n};\r\n\r\nexport { DescriptionComponentRenderer };\r\nexport type { DescriptionComponentRendererProps, DescriptionComponent };\r\n", "import * as React from 'react';\r\n\r\nimport { useIsMounted } from './useIsMounted';\r\n\r\n/**\r\n * @internal\r\n * @description Return a function that re-renders this component, if still mounted\r\n * @warning DO NOT USE EXCEPT SPECIAL CASES.\r\n */\r\nconst useForceUpdate = () => {\r\n  const [tick, update] = React.useState<number>();\r\n  const isMounted = useIsMounted();\r\n\r\n  const forceUpdate = React.useCallback(() => {\r\n    if (isMounted.current) {\r\n      update(Math.random());\r\n    }\r\n  }, [isMounted, update]);\r\n\r\n  return [tick, forceUpdate] as const;\r\n};\r\n\r\nexport { useForceUpdate };\r\n", "import * as React from 'react';\r\n\r\nconst useIsMounted = () => {\r\n  const isMounted = React.useRef(false);\r\n\r\n  React.useLayoutEffect(() => {\r\n    isMounted.current = true;\r\n\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return isMounted;\r\n};\r\n\r\nexport { useIsMounted };\r\n", "import { useMemo } from 'react';\r\n\r\nimport throttle from 'lodash/throttle';\r\n\r\ntype ThrottleSettings = Parameters<typeof throttle>[2];\r\n\r\n/**\r\n * @internal\r\n * @description Create a throttled version of a callback\r\n * @example\r\n * ```tsx\r\n * // First create a callback using React’s `useCallback` hook\r\n * const myCallback = useCallback(() => {\r\n *   // this is not throttled\r\n * }, [])\r\n *\r\n * // Then make a throttled version using the `useThrottledCallback` hook\r\n * const myThrottledCallback = useThrottledCallback(myCallback, 100)\r\n *\r\n * // Call the throttled callback\r\n * <Button onClick={myThrottledCallback} />\r\n * ```\r\n */\r\nconst useThrottledCallback = <T extends (...args: any[]) => any>(\r\n  callback: T,\r\n  wait: number,\r\n  options: ThrottleSettings\r\n): T => {\r\n  const throttledCallback = useMemo(\r\n    () => throttle(callback, wait, options) as unknown as T,\r\n    [callback, options, wait]\r\n  );\r\n\r\n  return throttledCallback;\r\n};\r\n\r\nexport { useThrottledCallback };\r\n", "/* -------------------------------------------------------------------------------------------------\r\n * requestIdleCallbackShim\r\n * -----------------------------------------------------------------------------------------------*/\r\nconst requestIdleCallbackShim: Window['requestIdleCallback'] = (callback) => {\r\n  const start = Date.now();\r\n\r\n  return setTimeout(() => {\r\n    callback({\r\n      didTimeout: false,\r\n      timeRemaining() {\r\n        return Math.max(0, Date.now() - start);\r\n      },\r\n    });\r\n  }, 1) as unknown as ReturnType<Window['requestIdleCallback']>;\r\n};\r\n\r\nconst _requestIdleCallback =\r\n  typeof requestIdleCallback === 'undefined' ? requestIdleCallbackShim : requestIdleCallback;\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * cancelIdleCallbackShim\r\n * -----------------------------------------------------------------------------------------------*/\r\nconst cancelIdleCallbackShim: Window['cancelIdleCallback'] = (handle: unknown) => {\r\n  return clearTimeout(handle as any);\r\n};\r\n\r\nconst _cancelIdleCallback =\r\n  typeof cancelIdleCallback === 'undefined' ? cancelIdleCallbackShim : cancelIdleCallback;\r\n\r\nexport { _requestIdleCallback as requestIdleCallback };\r\nexport { _cancelIdleCallback as cancelIdleCallback };\r\n", "import { useEffect } from 'react';\r\n\r\nimport { Reducer } from '@reduxjs/toolkit';\r\n\r\nimport { useTypedStore } from '../core/store/hooks';\r\n\r\n/**\r\n * @public\r\n * @description Inject a new reducer into the global redux-store.\r\n * @example\r\n * ```tsx\r\n * import { reducer } from './local-store';\r\n *\r\n * const MyPlugin = () => {\r\n *  useInjectReducer(\"plugin\", reducer);\r\n * }\r\n * ```\r\n */\r\nexport function useInjectReducer(namespace: string, reducer: Reducer) {\r\n  const store = useTypedStore();\r\n\r\n  useEffect(() => {\r\n    store.injectReducer(namespace, reducer);\r\n  }, [store, namespace, reducer]);\r\n}\r\n", "import jsonLogic from 'json-logic-js';\r\nimport { z } from 'zod';\r\n\r\nexport const ConditionSchema = z.object({\r\n  dependsOn: z.string().min(1),\r\n  operator: z.enum(['is', 'isNot']),\r\n  value: z.union([z.string(), z.number(), z.boolean()]),\r\n});\r\n\r\nexport type Condition = z.infer<typeof ConditionSchema>;\r\nexport type JsonLogicCondition = jsonLogic.RulesLogic<jsonLogic.AdditionalOperation>;\r\nexport type RulesEngine = {\r\n  generate: (condition: Condition) => JsonLogicCondition;\r\n  validate: (condition: Condition) => void;\r\n  evaluate: (condition: JsonLogicCondition, data: unknown) => boolean;\r\n};\r\n\r\nexport function createRulesEngine(): RulesEngine {\r\n  /**\r\n   * Transforms a high-level `Condition` object into a JSON Logic-compatible condition.\r\n   *\r\n   * Converts operators like 'is' and 'isNot' into their JSON Logic equivalents ('==' and '!=').\r\n   * Throws an error if the operator is not supported.\r\n   *\r\n   * @param condition - The condition object to convert.\r\n   * @returns A JSON Logic AST representing the condition.\r\n   * @throws {Error} If the operator is not recognized.\r\n   */\r\n  const generate = (condition: Condition): JsonLogicCondition => {\r\n    const { dependsOn, operator, value } = condition;\r\n    const operatorsMap = {\r\n      is: '==',\r\n      isNot: '!=',\r\n    };\r\n    if (!operatorsMap[operator]) {\r\n      throw new Error(`Invalid operator: ${operator}`);\r\n    }\r\n    return { [operatorsMap[operator]]: [{ var: dependsOn }, value] };\r\n  };\r\n\r\n  /**\r\n   * Validates a condition object against the `ConditionSchema`.\r\n   *\r\n   * Ensures that the condition adheres to the expected structure and types.\r\n   *\r\n   * @param condition - The condition object to validate.\r\n   * @throws {ZodError} If the condition is invalid.\r\n   */\r\n  const validate = (condition: Condition) => {\r\n    ConditionSchema.parse(condition);\r\n  };\r\n\r\n  /**\r\n   * Evaluates a JSON Logic condition against provided data.\r\n   * @throws {Error} If the condition is invalid.\r\n   */\r\n  const evaluate = (\r\n    condition: jsonLogic.RulesLogic<jsonLogic.AdditionalOperation>,\r\n    data: unknown\r\n  ): boolean => {\r\n    try {\r\n      return jsonLogic.apply(condition, data);\r\n    } catch (err: any) {\r\n      throw new Error(`Invalid condition: ${err.message}`);\r\n    }\r\n  };\r\n\r\n  return {\r\n    generate,\r\n    validate,\r\n    evaluate,\r\n  };\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,oBAA2B;;;ACG3B,IAAAA,oBAAsB;AACtB,wBAAuB;AACvB,mBAAkB;AAClB,kBAAiB;AAMjB,OAAOC,WAAU;;;ACTjB,uBAAsB;AAiFtB,IAAM,gBAAgB;AAAA,EACpB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEA,IAAM,6BAA6B;AAAA,EACjC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEA,IAAM,eAAN,MAAmB;AAAA,EAGjB,cAAc;AAFd;AAMA,oCAAW,CAAC,iBAA8C;AACxD,UAAI,MAAM,QAAQ,YAAY,GAAG;AAE/B,qBAAa,QAAQ,CAAC,gBAAgB;AACpC,eAAK,SAAS,WAAW;AAAA,QAC3B,CAAC;AAAA,MACH,OAAO;AAEL,cAAM,EAAE,MAAM,UAAU,MAAM,WAAW,iBAAiB,YAAY,QAAQ,IAC5E;AAGF,6BAAAC,SAAU,MAAM,yBAAyB;AACzC,6BAAAA,SAAU,MAAM,yBAAyB;AACzC,6BAAAA,SAAU,WAAW,+BAA+B;AACpD,6BAAAA,SAAU,iBAAiB,qCAAqC;AAChE,6BAAAA,SAAU,YAAY,sCAAsC;AAC5D,6BAAAA,SAAU,WAAW,OAAO,qCAAqC;AAGjE,6BAAAA;AAAA,UACE,cAAc,SAAS,IAAI;AAAA,UAC3B,uBAAuB,IAAI;AAAA,QAC7B;AAGA,cAAM,mBAAmB;AACzB,6BAAAA;AAAA,UACE,iBAAiB,KAAK,IAAI;AAAA,UAC1B,uBAAuB,IAAI;AAAA,QAC7B;AAGA,cAAM,iBAAiB,CAAC,IAAI,mCAAS,SAAQ,CAAC,GAAI,IAAI,mCAAS,aAAY,CAAC,CAAE;AAE9E,YAAI,eAAe,QAAQ;AACzB,gBAAM,wBAAwB,eAAe,OAAO,0BAA0B,CAAC,CAAC;AAEhF,gCAAsB,QAAQ,CAAC,EAAE,mBAAmB,aAAa,MAAM;AACrE,iCAAAA,SAAU,mBAAmB,YAAY;AAAA,UAC3C,CAAC;AAAA,QACH;AAGA,cAAM,MAAsB,WAAW,WAAW,QAAQ,IAAI,IAAI,KAAK,WAAW,IAAI;AAGtF,cAAM,iBAAiB,OAAO,UAAU,eAAe,KAAK,KAAK,cAAc,GAAG;AAClF,6BAAAA,SAAU,CAAC,gBAAgB,kBAAkB,GAAG,+BAA+B;AAE/E,aAAK,aAAa,GAAG,IAAI;AAAA,MAC3B;AAAA,IACF;AAEA,kCAAS,MAAM;AACb,aAAO,KAAK;AAAA,IACd;AAEA,+BAAM,CAAC,QAAyC;AAC9C,aAAO,KAAK,aAAa,GAAG;AAAA,IAC9B;AA/DE,SAAK,eAAe,CAAC;AAAA,EACvB;AA+DF;AAOA,IAAM,2BAA2B,CAC/B,KACA,WACuB;AACvB,MAAI,WAAW,QAAQ;AACrB,WAAO,OAAO,MAAM,OAAO,0BAA0B,GAAG;AAAA,EAC1D;AAEA,MAAI,CAAC,OAAO,MAAM;AAChB,QAAI,KAAK;AAAA,MACP,mBAAmB;AAAA,MACnB,cAAc;AAAA,IAChB,CAAC;AAAA,EACH,OAAO;AACL,QAAI,KAAK;AAAA,MACP,mBACE,OAAO,KAAK,WAAW,SAAS,KAAK,2BAA2B,SAAS,OAAO,IAAI;AAAA,MACtF,cAAc,IAAI,OAAO,IAAI;AAAA,IAC/B,CAAC;AAAA,EACH;AAEA,SAAO;AACT;;;ACtNA;AAYG;AADI,IAAM,SAAN,MAAa;AAAA,EAalB,YAAY,YAA0B;AAZtC,wBAAC,IAAa;AAEd;AACA;AACA;AAIA;AACA;AACA;AAGE,SAAK,OAAO,WAAW,QAAQ,CAAC;AAChC,SAAK,cAAc,WAAW,eAAe;AAC7C,SAAK,iBAAiB,WAAW,kBAAkB,CAAC;AACpD,SAAK,UAAU,WAAW,YAAY,SAAY,WAAW,UAAU;AACvE,SAAK,OAAO,WAAW;AACvB,SAAK,WAAW,WAAW;AAAA,EAC7B;AAAA,EAEA,sBAAsB,eAAuB,WAAmB;AAC9D,QAAI;AACF,aAAO,KAAK,eAAe,aAAa,EAAE,SAAS,KAAK,CAAC;AAAA,IAC3D,SAAS,KAAK;AACZ,cAAQ,MAAM,iCAAiC,GAAG;AAElD,aAAO,CAAC;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBACE,eACA,WACA,WACA;AACA,QAAI;AACF,WAAK,eAAe,aAAa,EAAE,SAAS,EAAE,KAAK,SAAS;AAAA,IAC9D,SAAS,KAAK;AACZ,cAAQ,MAAM,2BAA2B,GAAG;AAAA,IAC9C;AAAA,EACF;AACF;;;AC/BA,IAAM,OAAN,MAAW;AAAA,EAGT,cAAc;AAFd,wBAAQ,eAAgC,CAAC;AAczC,+BAAM,OAAO,KAAkB,gBAAqD;AAClF,UAAI,QAAQ;AAEZ,YAAM,mBAAmB,KAAK,YAAY,IAAI,CAAC,eAAe,WAAW,GAAG,CAAC;AAE7E,YAAM,OAAO,OAAOC,iBAA8B;AAChD,YAAI,QAAQ,KAAK,YAAY,QAAQ;AACnC,iBAAO,iBAAiB,OAAO,EAAE,IAAI,EAAEA,YAAW;AAAA,QACpD;AAEA,eAAOA;AAAA,MACT;AAEA,aAAO,KAAK,WAAW;AAAA,IACzB;AAAA,EA1Be;AAAA,EAIf,IAAI,YAAqD;AACvD,QAAI,MAAM,QAAQ,UAAU,GAAG;AAC7B,WAAK,YAAY,KAAK,GAAG,UAAU;AAAA,IACrC,OAAO;AACL,WAAK,YAAY,KAAK,UAAU;AAAA,IAClC;AAAA,EACF;AAiBF;;;AClDA,IAAAC,oBAAsB;;;ACEtB,mBAAoC;;;ACHpC,0BAAyB;AAmBrB;AALJ,IAAM,mBAAmB,CAAC,EAAE,UAAU,SAAS,MAA6B;AAC1E,QAAM,SAAS,iBAAiB,CAAC,UAAU,MAAM,UAAU,SAAS,MAAM;AAC1E,QAAM,kBAAc,oBAAAC,SAAa,SAAS,MAAM,GAAG,SAAS,EAAE;AAE9D,aACE,wBAAC,oBAAa,QAAgB,eAAc,MAAK,UAAU,aAAa,eAAc,QACnF,UACH;AAEJ;;;ACzBA,YAAuB;AA+CnB,IAAAC,sBAAA;AA7BJ,IAAM,QAAQ,CAAC,EAAE,UAAU,OAAO,MAAkB;AAClD,QAAM,EAAE,aAAa,IAAI,iBAAiB,CAAC,UAAU,MAAM,UAAU,KAAK;AAC1E,QAAM,CAAC,aAAa,cAAc,IAAU,eAA2B;AACvE,QAAM,EAAE,OAAO,IAAI,QAAQ;AAC3B,QAAM,WAAW,YAAY;AAG7B,EAAM,gBAAU,MAAM;AACpB,UAAM,eAAe,OAAO,WAAW,8BAA8B;AACrE,mBAAe,aAAa,UAAU,SAAS,OAAO;AAEtD,UAAM,WAAW,CAAC,UAA+B;AAC/C,qBAAe,MAAM,UAAU,SAAS,OAAO;AAAA,IACjD;AACA,iBAAa,iBAAiB,UAAU,QAAQ;AAGhD,WAAO,MAAM;AACX,mBAAa,oBAAoB,UAAU,QAAQ;AAAA,IACrD;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,EAAM,gBAAU,MAAM;AACpB,aAAS,mBAAmB,OAAO,KAAK,MAAM,CAAC,CAAC;AAAA,EAClD,GAAG,CAAC,UAAU,MAAM,CAAC;AAErB,QAAM,oBAAoB,iBAAiB,WAAW,cAAc;AAEpE,aACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MAMA,OAAO,iCAAS,qBAAqB;AAAA,MAEpC;AAAA;AAAA,YACD,yBAAC,eAAY;AAAA;AAAA;AAAA,EACf;AAEJ;AAEA,IAAM,cAAc;AAAA;AAAA,kBAEF,CAAC,EAAE,MAAM,MAAM,MAAM,OAAO,UAAU;AAAA;AAAA;;;ACH9B,IAAAC,sBAAA;AAzC1B,IAAM,cAAc,IAAI,YAAY;AAAA,EAClC,gBAAgB;AAAA,IACd,SAAS;AAAA,MACP,sBAAsB;AAAA,IACxB;AAAA,EACF;AACF,CAAC;AAQD,IAAM,YAAY,CAAC,EAAE,UAAU,QAAQ,MAAM,MAAsB;AACjE,aACE;AAAA,IAAC;AAAA;AAAA,MACC,YAAY,OAAO,QAAQ;AAAA,MAC3B,cAAc,OAAO;AAAA,MACrB,SAAS,OAAO;AAAA,MAChB,QAAQ,OAAO,QAAQ;AAAA,MACvB,MAAM,OAAO,OAAO;AAAA,MACpB,4BAA4B,OAAO;AAAA,MACnC,WAAW,OAAO;AAAA,MAClB,SAAS,OAAO;AAAA,MAChB,MAAM,OAAO;AAAA,MACb,iBAAiB,OAAO;AAAA,MACxB,kBAAkB,CAAC,MAAM,iBAAiB,OAAO,iBAAiB,MAAM,cAAc,KAAK;AAAA,MAC3F,eAAe,OAAO;AAAA,MACtB,UAAU,OAAO,OAAO;AAAA,MAExB,uCAAC,oBAAS,OACR,uCAAC,uBAAoB,QAAQ,aAC3B,uCAAC,gBACC,uCAAC,mBACC,uCAAC,oBAAiB,UAAU,OAAO,eAAe,cAChD,uCAAC,SAAM,QAAQ,OAAO,eAAe,QACnC,uCAAC,yBACC,uCAAC,oBACC,uCAAC,sBACC,uCAAC,6BACC;AAAA,QAAC;AAAA;AAAA,UACC,iBAAiB,OAAO,eAAe;AAAA,UACvC,iBAAiB,OAAO,eAAe;AAAA,UACvC,yBAAyB,OAAO,eAAe,cAAc;AAAA,UAE5D;AAAA;AAAA,MACH,GACF,GACF,GACF,GACF,GACF,GACF,GACF,GACF,GACF,GACF;AAAA;AAAA,EACF;AAEJ;;;AHhD0B,IAAAC,sBAAA;AAX1B,IAAM,MAAM,CAAC,EAAE,QAAQ,MAAM,MAAgB;AAC3C,8BAAU,MAAM;AACd,UAAM,WAAW,aAAa,QAAQ,0BAA0B,KAAK;AAErE,QAAI,UAAU;AACZ,eAAS,gBAAgB,OAAO;AAAA,IAClC;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,aACE,yBAAC,aAAU,QAAgB,OACzB,uCAAC,yBAAS,cAAU,yBAAC,KAAK,SAAL,EAAa,GAChC,uCAAC,UAAO,GACV,GACF;AAEJ;;;AIaY,IAAAC,sBAAA;AA9BZ,IAAM,eAAe,MAAM;AACzB,QAAM,QAAQ,cAAc;AAC5B,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,EAAE,KAAK,IAAI,aAAa;AAE9B,MAAI,iBAAiB,OAAO;AAC1B,YAAQ,MAAM,KAAK;AAEnB,UAAM,cAAc,YAAY;AAC9B,YAAM,KAAK;AAAA;AAAA,EAEf,MAAM,KAAK;AAAA;AAAA,OAEN;AAAA,IACH;AAEA,eACE,yBAAC,QAAK,QAAO,QACX,uCAAC,QAAK,YAAW,UAAS,QAAO,QAAO,gBAAe,UACrD;AAAA,MAAC;AAAA;AAAA,QACC,KAAK;AAAA,QACL,SAAS;AAAA,QACT,WAAU;AAAA,QACV,OAAM;AAAA,QACN,QAAO;AAAA,QACP,aAAY;AAAA,QACZ,YAAW;AAAA,QACX,WAAS;AAAA,QACT,UAAS;AAAA,QAET;AAAA,wCAAC,QAAK,WAAU,UAAS,KAAK,GAC5B;AAAA,yCAAC,gBAAc,OAAM,QAAO,QAAO,QAAO,MAAK,aAAY;AAAA,gBAC3D,yBAAC,cAAW,UAAU,GAAG,YAAW,QAAO,WAAU,UAClD,wBAAc;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YAClB,CAAC,GACH;AAAA,gBACA,yBAAC,cAAW,SAAQ,SAAQ,WAAU,UACnC;AAAA,cACC;AAAA,gBACE,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAClB;AAAA,cACA;AAAA,gBACE,UACE;AAAA,kBAAC;AAAA;AAAA,oBACC,YAAU;AAAA,oBAEV,SAAO;AAAA,oBACP,MAAK;AAAA,oBACL;AAAA;AAAA,gBAAkB;AAAA,cAExB;AAAA,YACF,GACF;AAAA,aACF;AAAA,cAEA,0BAAC,QAAK,KAAK,GAAG,WAAU,UAAS,OAAM,QACrC;AAAA,yCAAC,eAAY,SAAS,MAAM;AAAA,YAAC,GAAG,OAAM,QAAO,YAAW,IAAG,SAAQ,UACjE,uCAAC,aAAW,gBAAM,SAAQ,GAC5B;AAAA,gBACA,yBAAC,UAAO,SAAS,aAAa,SAAQ,YAAW,eAAW,yBAAC,iBAAU,GACpE,wBAAc;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YAClB,CAAC,GACH;AAAA,aACF;AAAA;AAAA;AAAA,IACF,GACF,GACF;AAAA,EAEJ;AAEA,QAAM;AACR;AAEA,IAAM,cAAc,GAAO,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUhC,IAAM,YAAY,GAA4B,UAAU;AAAA;AAAA,WAE7C,CAAC,EAAE,MAAM,MAAM,MAAM,OAAO,SAAS;AAAA;;;AC3F5C,IAAAC,sBAAA;AAJG,IAAM,eAAe,MAAM;AAChC,QAAM,EAAE,cAAc,IAAI,QAAQ;AAElC,aACE,0BAAC,KAAK,MAAL,EAAU,YAAW,SACpB;AAAA;AAAA,MAAC,QAAQ;AAAA,MAAR;AAAA,QACC,IAAG;AAAA,QACH,OAAO,cAAc;AAAA,UACnB,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC;AAAA;AAAA,IACH;AAAA,QACA,yBAAC,QAAQ,SAAR,EACC;AAAA,MAAC;AAAA;AAAA,QACC,YACE,yBAAC,cAAW,KAAKC,OAAM,SAAQ,aAAY,aAAS,yBAAC,iBAAW,GAAI,IAAG,KACpE,wBAAc;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC,GACH;AAAA,QAEF,SAAS,cAAc;AAAA,UACrB,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC;AAAA,QACD,WAAS;AAAA,QACT,UAAM,yBAAC,gBAAc,OAAM,SAAQ;AAAA,QACnC,QAAO;AAAA;AAAA,IACT,GACF;AAAA,KACF;AAEJ;;;AC1CO,IAAMC,eAAc,MAAqB;AAAA,EAC9C,GAAI,OAAO,OAAO,SAAS,UAAU,OAAO,OAAO,SAAS,UAAU,IAClE;AAAA,IACE;AAAA,MACE,MAAM;AAAA,MACN,MAAM,YAAY;AAChB,cAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAA4B;AAEvE,eAAO;AAAA,UACL,WAAW;AAAA,QACb;AAAA,MACF;AAAA,IACF;AAAA,EACF,IACA,CAAC;AAAA,EACL,GAAI,OAAO,OAAO,SAAS,UAAU,OAAO,OAAO,SAAS,GAAG,IAC3D;AAAA,IACE;AAAA,MACE,MAAM;AAAA,MACN,MAAM,YAAY;AAChB,cAAM,EAAE,aAAa,IAAI,MAAM,OAAO,gCAA0B;AAEhE,eAAO;AAAA,UACL,WAAW;AAAA,QACb;AAAA,MACF;AAAA,IACF;AAAA,EACF,IACA,CAAC;AACP;;;ACJU,IAAAC,sBAAA;AAXV,IAAM,iBAAiB,MAAM;AAC3B,QAAM,WAAW,YAAY;AAC7B,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,EAAE,yBAAyB,eAAe,IAAI,mBAAmB;AAEvE,QAAM,CAAC,gBAAgB,EAAE,MAAM,CAAC,IAAI,0BAA0B;AAE9D,aACE,yBAAC,yBACC,wCAAC,QACC;AAAA,kCAAC,iBACC;AAAA,oCAAC,UACC;AAAA,qCAAC,QAAK;AAAA,YACN,yBAAC,OAAI,YAAY,GAAG,eAAe,GACjC,uCAAC,cAAW,KAAI,MAAK,SAAQ,SAC1B,wBAAc;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC,GACH,GACF;AAAA,QACC,YACC,yBAAC,cAAW,IAAG,qBAAoB,MAAK,SAAQ,UAAU,IAAI,WAAU,aACrE,2BAAiB,KAAK,IACnB,eAAe,KAAK,IACpB,cAAc;AAAA,UACZ,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC,GACP,IACE;AAAA,SACN;AAAA,UACA;AAAA,QAAC;AAAA;AAAA,UACC,QAAO;AAAA,UACP,eAAe;AAAA,YACb,OAAO;AAAA,UACT;AAAA,UACA,UAAU,OAAO,SAAS;AACxB,kBAAM,MAAM,MAAM,eAAe,IAAI;AAErC,gBAAI,EAAE,WAAW,MAAM;AACrB,uBAAS,+BAA+B;AAAA,YAC1C;AAAA,UACF;AAAA,UACA,kBAAsBC,QAAO,EAAE,MAAM;AAAA,YACnC,OACGA,QAAO,EACP,MAAM,YAAiB,KAAK,EAC5B,SAAS;AAAA,cACR,IAAI,YAAiB,SAAS;AAAA,cAC9B,gBAAgB;AAAA,YAClB,CAAC,EACA,SAAS;AAAA,UACd,CAAC;AAAA,UAED,wCAAC,QAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GAChD;AAAA;AAAA,cACC;AAAA,gBACE,OAAO,cAAc,EAAE,IAAI,yBAAyB,gBAAgB,QAAQ,CAAC;AAAA,gBAC7E,MAAM;AAAA,gBACN,aAAa,cAAc;AAAA,kBACzB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAClB,CAAC;AAAA,gBACD,UAAU;AAAA,gBACV,MAAM;AAAA,cACR;AAAA,YACF,EAAE,IAAI,CAAC,cACL,yBAAC,yBAAgC,GAAG,SAAhB,MAAM,IAAiB,CAC5C;AAAA,gBACD,yBAAC,UAAO,MAAK,UAAS,WAAS,MAC5B,wBAAc;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YAClB,CAAC,GACH;AAAA,aACF;AAAA;AAAA,MACF;AAAA,OACF;AAAA,QACA,yBAAC,QAAK,gBAAe,UACnB,uCAAC,OAAI,YAAY,GACf,uCAAC,QAAK,KAAK,SAAS,IAAG,eACpB,wBAAc,EAAE,IAAI,mBAAmB,gBAAgB,oBAAoB,CAAC,GAC/E,GACF,GACF;AAAA,KACF,GACF;AAEJ;;;AC3FU,IAAAC,sBAAA;AAPV,IAAM,wBAAwB,MAAM;AAClC,QAAM,EAAE,cAAc,IAAI,QAAQ;AAElC,aACE,yBAAC,yBACC,wCAAC,QACC;AAAA,iCAAC,iBACC,wCAAC,UACC;AAAA,mCAAC,QAAK;AAAA,UACN,yBAAC,OAAI,YAAY,GAAG,eAAe,GACjC,uCAAC,cAAW,KAAI,MAAK,SAAQ,SAC1B,wBAAc;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAClB,CAAC,GACH,GACF;AAAA,UACA,yBAAC,cACE,wBAAc;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAClB,CAAC,GACH;AAAA,UACA,yBAAC,OAAI,YAAY,GACf,uCAAC,cACE,wBAAc;AAAA,QACb,IAAI;AAAA,QACJ,gBACE;AAAA,MACJ,CAAC,GACH,GACF;AAAA,OACF,GACF;AAAA,QACA,yBAAC,QAAK,gBAAe,UACnB,uCAAC,OAAI,YAAY,GACf,uCAAC,QAAK,KAAK,SAAS,IAAG,eACpB,wBAAc,EAAE,IAAI,oBAAoB,gBAAgB,UAAU,CAAC,GACtE,GACF,GACF;AAAA,KACF,GACF;AAEJ;;;ACvDA,IAAAC,SAAuB;AA6Bb,IAAAC,sBAAA;AAhBV,IAAM,OAAO,MAAM;AACjB,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,EAAE,QAAQ,aAAa,IAAI,YAAY;AAC7C,QAAM,QAAc,eAAQ,MAAM,IAAI,gBAAgB,YAAY,GAAG,CAAC,YAAY,CAAC;AAEnF,QAAM,UACJ,MAAM,IAAI,MAAM,KAChB,cAAc;AAAA,IACZ,IAAI;AAAA,IACJ,gBAAgB;AAAA,EAClB,CAAC;AAEH,aACE,yBAAC,yBACC,wCAAC,QACC;AAAA,iCAAC,iBACC,wCAAC,UACC;AAAA,mCAAC,QAAK;AAAA,UACN,yBAAC,OAAI,YAAY,GAAG,eAAe,GACjC,uCAAC,cAAW,KAAI,MAAK,SAAQ,SAC1B,wBAAc,EAAE,IAAI,8BAA8B,gBAAgB,UAAU,CAAC,GAChF,GACF;AAAA,UACA,yBAAC,cAAY,mBAAQ;AAAA,UACrB,yBAAC,OAAI,YAAY,GACf,uCAAC,cACE,wBAAc;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAClB,CAAC,GACH,GACF;AAAA,OACF,GACF;AAAA,QACA,yBAAC,QAAK,gBAAe,UACnB,uCAAC,OAAI,YAAY,GACf,uCAAC,QAAK,KAAK,SAAS,IAAG,eACpB,wBAAc,EAAE,IAAI,oBAAoB,gBAAgB,UAAU,CAAC,GACtE,GACF,GACF;AAAA,KACF,GACF;AAEJ;;;ACzDA,IAAAC,SAAuB;AAGvB,kBAAiB;AA0TN,IAAAC,uBAAA;AA3RX,IAAM,uBAA2BC,QAAO,EAAE,MAAM;AAAA,EAC9C,WAAeA,QAAO,EAAE,KAAK,EAAE,SAAS,YAAiB,QAAQ,EAAE,SAAS;AAAA,EAC5E,UAAcA,QAAO,EAAE,SAAS;AAAA,EAChC,UACGA,QAAO,EACP,IAAI,GAAG;AAAA,IACN,IAAI,YAAiB,UAAU;AAAA,IAC/B,gBAAgB;AAAA,IAChB,QAAQ,EAAE,KAAK,EAAE;AAAA,EACnB,CAAC,EACA;AAAA,IACC;AAAA,IACA;AAAA,MACE,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,SAAU,OAAO;AACf,UAAI,CAAC,SAAS,OAAO,UAAU,SAAU,QAAO;AAEhD,YAAM,WAAW,YAAY,KAAK;AAClC,aAAO,YAAY;AAAA,IACrB;AAAA,EACF,EACC,QAAQ,SAAS;AAAA,IAChB,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,QAAQ,SAAS;AAAA,IAChB,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,QAAQ,MAAM;AAAA,IACb,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AAAA,EACZ,iBACGA,QAAO,EACP,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,MAAM,CAAK,OAAI,UAAU,GAAG,IAAI,GAAG;AAAA,IAClC,IAAI;AAAA,IACJ,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AAAA,EACZ,mBAAuBA,QAAO,EAAE,SAAS;AAAA,IACvC,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC;AACH,CAAC;AAED,IAAM,wBAA4BA,QAAO,EAAE,MAAM;AAAA,EAC/C,WACGA,QAAO,EACP,KAAK,EACL,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AAAA,EACZ,UAAcA,QAAO,EAAE,SAAS;AAAA,EAChC,UACGA,QAAO,EACP,IAAI,GAAG;AAAA,IACN,IAAI,YAAiB,UAAU;AAAA,IAC/B,gBAAgB;AAAA,IAChB,QAAQ,EAAE,KAAK,EAAE;AAAA,EACnB,CAAC,EACA;AAAA,IACC;AAAA,IACA;AAAA,MACE,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,SAAU,OAAO;AACf,UAAI,CAAC,MAAO,QAAO;AACnB,aAAO,IAAI,YAAY,EAAE,OAAO,KAAK,EAAE,UAAU;AAAA,IACnD;AAAA,EACF,EACC,QAAQ,SAAS;AAAA,IAChB,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,QAAQ,SAAS;AAAA,IAChB,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,QAAQ,MAAM;AAAA,IACb,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AAAA,EACZ,iBACGA,QAAO,EACP,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS,EACT,MAAM,CAAK,OAAI,UAAU,GAAG,IAAI,GAAG;AAAA,IAClC,IAAI;AAAA,IACJ,gBAAgB;AAAA,EAClB,CAAC;AAAA,EACH,OACGA,QAAO,EACP,MAAM;AAAA,IACL,IAAI,YAAiB,MAAM;AAAA,IAC3B,gBAAgB;AAAA,EAClB,CAAC,EACA,OAAO,EACP,UAAU;AAAA,IACT,IAAI,YAAiB,UAAU;AAAA,IAC/B,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AACd,CAAC;AAgBD,IAAM,WAAW,CAAC,EAAE,SAAS,MAAqB;AAChD,QAAM,EAAE,mBAAmB,IAAI,gBAAgB;AAC/C,QAAM,WAAW,YAAY;AAC7B,QAAM,CAAC,aAAa,cAAc,IAAU,gBAAS,CAAC;AACtD,QAAM,CAAC,UAAU,WAAW,IAAU,gBAAiB;AACvD,QAAM,EAAE,WAAW,IAAI,YAAY;AACnC,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,aAAa,cAAc,YAAY,CAAC,UAAU,MAAM,UAAU;AACxE,QAAM,EAAE,QAAQ,aAAa,IAAI,YAAY;AAC7C,QAAM,QAAc,eAAQ,MAAM,IAAI,gBAAgB,YAAY,GAAG,CAAC,YAAY,CAAC;AACnF,QAAM,QAAQ,SAAS,iBAAiB;AACxC,QAAM;AAAA,IACJ,yBAAyB;AAAA,IACzB,iCAAiC;AAAA,EACnC,IAAI,mBAAmB;AACvB,QAAM,EAAE,qBAAqB,IAAI,qBAAqB;AAEtD,QAAM,oBAAoB,MAAM,IAAI,mBAAmB;AAEvD,QAAM,EAAE,MAAM,UAAU,MAAM,IAAI,4BAA4B,mBAA6B;AAAA,IACzF,MAAM,CAAC;AAAA,EACT,CAAC;AAED,EAAM,iBAAU,MAAM;AACpB,QAAI,OAAO;AACT,YAAM,UAAkB,iBAAiB,KAAK,IAC1C,eAAe,KAAK,IACnB,MAAM,WAAW;AAEtB,yBAAmB;AAAA,QACjB,MAAM;AAAA,QACN;AAAA,MACF,CAAC;AAED,eAAS,mBAAmB,mBAAmB,OAAO,CAAC,EAAE;AAAA,IAC3D;AAAA,EACF,GAAG,CAAC,OAAO,gBAAgB,UAAU,kBAAkB,CAAC;AAExD,QAAM,CAAC,aAAa,IAAI,yBAAyB;AACjD,QAAM,CAAC,YAAY,IAAI,wBAAwB;AAC/C,QAAM,WAAW,iBAAiB;AAElC,QAAM,sBAAsB,OAC1B,EAAE,MAAM,GAAG,KAAK,GAChB,kBACG;AACH,UAAM,MAAM,MAAM,cAAc,IAAI;AAEpC,QAAI,UAAU,KAAK;AACjB,eAAS,MAAM,EAAE,OAAO,IAAI,KAAK,MAAM,CAAC,CAAC;AAEzC,YAAM,EAAE,MAAM,IAAI,IAAI,KAAK;AAE3B,UAAI,OAAO;AACT,cAAM,mBAAmB,MAAM,KAAK,CAAC,EAAE,KAAK,MAAM,SAAS,oBAAoB;AAE/E,YAAI,kBAAkB;AACpB,uBAAa,QAAQ,uBAAuB,KAAK,UAAU,KAAK,CAAC;AACjE,qBAAW,KAAK;AAChB,qBAAW,qBAAqB;AAAA,QAClC;AAAA,MACF;AAEA,UAAI,MAAM;AAER,6BAAqB,CAAC,OAAO,EAAE,GAAG,GAAG,SAAS,KAAK,EAAE;AAErD,iBAAS;AAAA,UACP,UAAU;AAAA,UACV,QAAQ,aAAa,IAAI;AAAA,QAC3B,CAAC;AAAA,MACH,OAAO;AACL,iBAAS,GAAG;AAAA,MACd;AAAA,IACF,OAAO;AACL,UAAI,iBAAiB,IAAI,KAAK,GAAG;AAC/B,mBAAW,wBAAwB;AAEnC,YAAI,IAAI,MAAM,SAAS,mBAAmB;AACxC,wBAAc,uBAAuB,IAAI,KAAK,CAAC;AAC/C;AAAA,QACF;AAEA,oBAAY,eAAe,IAAI,KAAK,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAEA,QAAM,qBAAqB,OACzB,EAAE,MAAM,GAAG,KAAK,GAChB,kBACG;AACH,UAAM,MAAM,MAAM,aAAa,IAAI;AAEnC,QAAI,UAAU,KAAK;AACjB,eAAS,MAAM,EAAE,OAAO,IAAI,KAAK,MAAM,CAAC,CAAC;AAEzC,UAAI,MAAM;AAER,6BAAqB,CAAC,OAAO,EAAE,GAAG,GAAG,SAAS,KAAK,EAAE;AAErD,iBAAS;AAAA,UACP,UAAU;AAAA,UACV,QAAQ,aAAa,QAAQ;AAAA,QAC/B,CAAC;AAAA,MACH,OAAO;AACL,iBAAS,GAAG;AAAA,MACd;AAAA,IACF,OAAO;AACL,UAAI,iBAAiB,IAAI,KAAK,GAAG;AAC/B,mBAAW,wBAAwB;AAEnC,YAAI,IAAI,MAAM,SAAS,mBAAmB;AACxC,wBAAc,uBAAuB,IAAI,KAAK,CAAC;AAC/C;AAAA,QACF;AAEA,oBAAY,eAAe,IAAI,KAAK,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAEA,MACE,CAAC,SACA,MAAM,OAAO,aAAa,cAAc,MAAM,OAAO,aAAa,kBACnE;AACA,eAAO,0BAAC,YAAS,IAAG,KAAI;AAAA,EAC1B;AAEA,QAAM,sBAAsB,MAAM,OAAO,aAAa;AAEtD,QAAM,SAAS,sBAAsB,wBAAwB;AAE7D,aACE,0BAAC,yBACC,yCAAC,iBACC;AAAA,mCAAC,QAAK,WAAU,UAAS,YAAW,UAAS,KAAK,GAChD;AAAA,oCAAC,QAAK;AAAA,UAEN,0BAAC,cAAW,KAAI,MAAK,SAAQ,SAAQ,WAAU,UAC5C,wBAAc;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAClB,CAAC,GACH;AAAA,UACA,0BAAC,cAAW,SAAQ,WAAU,WAAU,cAAa,WAAU,UAC5D,wBAAc;AAAA,QACb,IAAI;AAAA,QACJ,gBACE;AAAA,MACJ,CAAC,GACH;AAAA,MACC,eACC,0BAAC,cAAW,IAAG,qBAAoB,MAAK,SAAQ,UAAU,IAAI,WAAU,aACrE,oBACH,IACE;AAAA,OACN;AAAA,QACA;AAAA,MAAC;AAAA;AAAA,QACC,QAAO;AAAA,QACP,eACE;AAAA,UACE,YAAW,qCAAU,cAAa;AAAA,UAClC,WAAU,qCAAU,aAAY;AAAA,UAChC,QAAO,qCAAU,UAAS;AAAA,UAC1B,UAAU;AAAA,UACV,iBAAiB;AAAA,UACjB,mBAAmB,qBAAqB;AAAA,UACxC,MAAM;AAAA,QACR;AAAA,QAEF,UAAU,OAAO,MAAM,YAAY;AACjC,gBAAM,iBAAiB,cAAc,IAAI;AAEzC,cAAI;AACF,kBAAM,OAAO,SAAS,gBAAgB,EAAE,YAAY,MAAM,CAAC;AAE3D,gBAAI,cAAc,KAAK,qBAAqB;AAC1C,yBAAW,iCAAiC,EAAE,OAAO,YAAY,SAAS,EAAE,CAAC;AAAA,YAC/E;AAEA,gBAAI,eAAe,mBAAmB;AACpC;AAAA,gBACE;AAAA,kBACE,cAAU,YAAAC,SAAK,gBAAgB;AAAA,oBAC7B;AAAA,oBACA;AAAA,oBACA;AAAA,oBACA;AAAA,kBACF,CAAC;AAAA,kBACD,mBAAmB,eAAe;AAAA,kBAClC,MAAM,eAAe;AAAA,gBACvB;AAAA,gBACA,QAAQ;AAAA,cACV;AAAA,YACF,OAAO;AACL,oBAAM;AAAA,oBACJ,YAAAA,SAAK,gBAAgB,CAAC,qBAAqB,iBAAiB,CAAC;AAAA,gBAC7D,QAAQ;AAAA,cACV;AAAA,YACF;AAAA,UACF,SAAS,KAAK;AACZ,gBAAI,eAAe,iBAAiB;AAClC,sBAAQ;AAAA,gBACN,IAAI,MAAM,OAA+B,CAAC,KAAK,EAAE,SAAS,KAAK,MAAM;AACnE,sBAAI,QAAQ,OAAO,YAAY,UAAU;AACvC,wBAAI,IAAI,IAAI,cAAc,OAAO;AAAA,kBACnC;AACA,yBAAO;AAAA,gBACT,GAAG,CAAC,CAAC;AAAA,cACP;AAAA,YACF;AACA,2BAAe,cAAc,CAAC;AAAA,UAChC;AAAA,QACF;AAAA,QAEA,yCAAC,QAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GAAG,WAAW,GAC/D;AAAA,wCAAC,KAAK,MAAL,EAAU,KAAK,GACb;AAAA,YACC;AAAA,cACE,OAAO,cAAc;AAAA,gBACnB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAClB,CAAC;AAAA,cACD,MAAM;AAAA,cACN,UAAU;AAAA,cACV,MAAM;AAAA,cACN,MAAM;AAAA,YACR;AAAA,YACA;AAAA,cACE,OAAO,cAAc;AAAA,gBACnB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAClB,CAAC;AAAA,cACD,MAAM;AAAA,cACN,MAAM;AAAA,cACN,MAAM;AAAA,YACR;AAAA,YACA;AAAA,cACE,UAAU,CAAC;AAAA,cACX,OAAO,cAAc;AAAA,gBACnB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAClB,CAAC;AAAA,cACD,MAAM;AAAA,cACN,UAAU;AAAA,cACV,MAAM;AAAA,cACN,MAAM;AAAA,YACR;AAAA,YACA;AAAA,cACE,MAAM,cAAc;AAAA,gBAClB,IAAI;AAAA,gBACJ,gBACE;AAAA,cACJ,CAAC;AAAA,cACD,OAAO,cAAc;AAAA,gBACnB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAClB,CAAC;AAAA,cACD,MAAM;AAAA,cACN,UAAU;AAAA,cACV,MAAM;AAAA,cACN,MAAM;AAAA,YACR;AAAA,YACA;AAAA,cACE,OAAO,cAAc;AAAA,gBACnB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAClB,CAAC;AAAA,cACD,MAAM;AAAA,cACN,UAAU;AAAA,cACV,MAAM;AAAA,cACN,MAAM;AAAA,YACR;AAAA,YACA;AAAA,cACE,OAAO;AAAA,gBACL;AAAA,kBACE,IAAI;AAAA,kBACJ,gBACE;AAAA,gBACJ;AAAA,gBACA;AAAA,kBACE,WACE,0BAAC,KAAE,QAAO,UAAS,MAAK,2BAA0B,KAAI,cACnD,wBAAc;AAAA,oBACb,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAClB,CAAC,GACH;AAAA,kBAEF,YACE,0BAAC,KAAE,QAAO,UAAS,MAAK,6BAA4B,KAAI,cACrD,wBAAc;AAAA,oBACb,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAClB,CAAC,GACH;AAAA,gBAEJ;AAAA,cACF;AAAA,cACA,MAAM;AAAA,cACN,MAAM;AAAA,cACN,MAAM;AAAA,YACR;AAAA,UACF,EAAE,IAAI,CAAC,EAAE,MAAM,GAAG,MAAM,UACtB,0BAAC,KAAK,MAAL,EAA2B,KAAK,MAAM,WAAU,UAAS,YAAW,WACnE,wCAAC,yBAAe,GAAG,OAAO,KADZ,MAAM,IAEtB,CACD,GACH;AAAA,cACA,0BAAC,UAAO,WAAS,MAAC,MAAK,KAAI,MAAK,UAC7B,wBAAc;AAAA,YACb,IAAI;AAAA,YACJ,gBAAgB;AAAA,UAClB,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,KACC,+BAAO,OAAO,cAAa,kBAC1B,0BAAC,OAAI,YAAY,GACf,wCAAC,QAAK,gBAAe,UACnB,wCAAC,QAAK,KAAK,SAAS,IAAG,eACpB,wBAAc;AAAA,MACb,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB,CAAC,GACH,GACF,GACF;AAAA,KAEJ,GACF;AAEJ;AAmBA,SAAS,cAAc,MAA0B;AAC/C,SAAO,OAAO,QAAQ,IAAI,EAAE;AAAA,IAC1B,CAAC,KAAK,CAAC,KAAK,KAAK,MAAM;AAOrB,UAAI,CAAC,CAAC,YAAY,iBAAiB,EAAE,SAAS,GAAG,KAAK,OAAO,UAAU,UAAU;AAC/E,YAAI,GAA+B,IAAI,MAAM,KAAK;AAElD,YAAI,QAAQ,YAAY;AACtB,cAAI,GAAG,IAAI,SAAS;AAAA,QACtB;AAAA,MACF,OAAO;AACL,YAAI,GAAmB,IAAI;AAAA,MAC7B;AAEA,aAAO;AAAA,IACT;AAAA,IACA,CAAC;AAAA,EASH;AACF;AAEA,IAAM,IAAI,GAAO;AAAA,WACN,CAAC,EAAE,MAAM,MAAM,MAAM,OAAO,UAAU;AAAA;;;ACjkBjD,IAAAC,SAAuB;AAyGZ,IAAAC,uBAAA;AAjFX,IAAM,wBAA4BC,QAAO,EAAE,MAAM;AAAA,EAC/C,UACGA,QAAO,EACP,IAAI,GAAG;AAAA,IACN,IAAI,YAAiB,UAAU;AAAA,IAC/B,gBAAgB;AAAA,IAChB,QAAQ,EAAE,KAAK,EAAE;AAAA,EACnB,CAAC,EAEA;AAAA,IACC;AAAA,IACA;AAAA,MACE,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,SAAU,OAAO;AACf,UAAI,CAAC,SAAS,OAAO,UAAU,SAAU,QAAO;AAEhD,YAAM,WAAW,YAAY,KAAK;AAClC,aAAO,YAAY;AAAA,IACrB;AAAA,EACF,EACC,QAAQ,SAAS;AAAA,IAChB,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,QAAQ,SAAS;AAAA,IAChB,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,QAAQ,MAAM;AAAA,IACb,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,EACF,CAAC,EACA,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AAAA,EACZ,iBACGA,QAAO,EACP,SAAS;AAAA,IACR,IAAI,YAAiB,SAAS;AAAA,IAC9B,gBAAgB;AAAA,EAClB,CAAC,EACA,MAAM,CAAK,OAAI,UAAU,GAAG,IAAI,GAAG;AAAA,IAClC,IAAI;AAAA,IACJ,gBAAgB;AAAA,EAClB,CAAC,EACA,SAAS;AACd,CAAC;AAED,IAAM,gBAAgB,MAAM;AAC1B,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,WAAW,iBAAiB;AAClC,QAAM,WAAW,YAAY;AAC7B,QAAM,EAAE,QAAQ,aAAa,IAAI,YAAY;AAC7C,QAAM,QAAc,eAAQ,MAAM,IAAI,gBAAgB,YAAY,GAAG,CAAC,YAAY,CAAC;AACnF,QAAM,EAAE,yBAAyB,eAAe,IAAI,mBAAmB;AAEvE,QAAM,CAAC,eAAe,EAAE,MAAM,CAAC,IAAI,yBAAyB;AAE5D,QAAM,eAAe,OAAO,SAAwC;AAClE,UAAM,MAAM,MAAM,cAAc,IAAI;AAEpC,QAAI,UAAU,KAAK;AACjB,eAAS,MAAM,EAAE,OAAO,IAAI,KAAK,MAAM,CAAC,CAAC;AACzC,eAAS,GAAG;AAAA,IACd;AAAA,EACF;AAKA,MAAI,CAAC,MAAM,IAAI,MAAM,GAAG;AACtB,eAAO,0BAAC,YAAS,IAAG,eAAc;AAAA,EACpC;AAEA,aACE,0BAAC,yBACC,yCAAC,QACC;AAAA,mCAAC,iBACC;AAAA,qCAAC,UACC;AAAA,sCAAC,QAAK;AAAA,YACN,0BAAC,OAAI,YAAY,GAAG,eAAe,GACjC,wCAAC,cAAW,KAAI,MAAK,SAAQ,SAC1B,wBAAc;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC,GACH,GACF;AAAA,QACC,YACC,0BAAC,cAAW,IAAG,qBAAoB,MAAK,SAAQ,UAAU,IAAI,WAAU,aACrE,2BAAiB,KAAK,IACnB,eAAe,KAAK,IACpB,cAAc;AAAA,UACZ,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC,GACP,IACE;AAAA,SACN;AAAA,UACA;AAAA,QAAC;AAAA;AAAA,UACC,QAAO;AAAA,UACP,eAAe;AAAA,YACb,UAAU;AAAA,YACV,iBAAiB;AAAA,UACnB;AAAA,UACA,UAAU,CAAC,WAAW;AAEpB,yBAAa,EAAE,UAAU,OAAO,UAAU,oBAAoB,MAAM,IAAI,MAAM,EAAG,CAAC;AAAA,UACpF;AAAA,UACA,kBAAkB;AAAA,UAElB,yCAAC,QAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GAChD;AAAA;AAAA,cACC;AAAA,gBACE,MAAM,cAAc;AAAA,kBAClB,IAAI;AAAA,kBACJ,gBACE;AAAA,gBACJ,CAAC;AAAA,gBACD,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAClB,CAAC;AAAA,gBACD,MAAM;AAAA,gBACN,UAAU;AAAA,gBACV,MAAM;AAAA,cACR;AAAA,cACA;AAAA,gBACE,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAClB,CAAC;AAAA,gBACD,MAAM;AAAA,gBACN,UAAU;AAAA,gBACV,MAAM;AAAA,cACR;AAAA,YACF,EAAE,IAAI,CAAC,cACL,0BAAC,yBAAgC,GAAG,SAAhB,MAAM,IAAiB,CAC5C;AAAA,gBACD,0BAAC,UAAO,WAAS,MAAC,MAAK,UACpB,wBAAc;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YAClB,CAAC,GACH;AAAA,aACF;AAAA;AAAA,MACF;AAAA,OACF;AAAA,QACA,0BAAC,QAAK,gBAAe,UACnB,wCAAC,OAAI,YAAY,GACf,wCAAC,QAAK,KAAK,SAAS,IAAG,eACpB,wBAAc,EAAE,IAAI,mBAAmB,gBAAgB,oBAAoB,CAAC,GAC/E,GACF,GACF;AAAA,KACF,GACF;AAEJ;;;AC5KO,IAAM,QAAQ;AAAA,EACnB,mBAAmB;AAAA,EACnB,2BAA2B;AAAA;AAAA;AAAA,EAG3B,OAAO,MAAM;AAAA,EACb,MAAM;AAAA,EACN,UAAU;AAAA,EACV,kBAAkB;AAAA,EAClB,kBAAkB;AAAA,EAClB,WAAW,MAAM;AACnB;;;ACSW,IAAAC,uBAAA;AA3BX,IAAM,WAAW,MAAM;AACrB,QAAM,EAAE,OAAO,IAAI,YAAY;AAC/B,QAAM,QAAQ,SAAS,iBAAiB;AACxC,QAAM,WAAW,+BAAO,OAAO;AAC/B,QAAM,EAAE,KAAK,IAAI,aAAa;AAC9B,QAAM,EAAE,SAAS,IAAI,QAAQ,CAAC;AAC9B,QAAMC,SAAQ;AAAA,IACZ;AAAA,IACA,aAAa,MAAM,OAAO,qBAA0D,GAAG;AAAA,EACzF;AACA,QAAM,QAAQ;AAAA,IACZ;AAAA,IACA,aAAa,MAAM,OAAO,yBAAmD,GAAG;AAAA,IAChF;AAAA,MACE,QAAQ,SAAS,SAAS;AACxB,eAAO;AAAA,UACL,GAAG;AAAA,UACH,GAAG;AAAA,QACL;AAAA,MACF;AAAA,MACA,cAAc;AAAA,IAChB;AAAA,EACF;AAEA,QAAM,EAAE,MAAM,IAAI,QAAQ,YAAY,CAAC,SAAS,IAAI;AAEpD,MAAI,CAAC,YAAY,CAAC,OAAO;AACvB,eAAO,0BAAC,YAAS,IAAG,KAAI;AAAA,EAC1B;AAEA,QAAM,YAAY,MAAM,QAAgC;AAIxD,MAAI,CAAC,WAAW;AACd,eAAO,0BAAC,YAAS,IAAG,KAAI;AAAA,EAC1B;AAGA,MAAI,aAAa,oBAAoB,aAAa,cAAc,OAAO;AACrE,eAAO,0BAAC,YAAS,IAAG,KAAI;AAAA,EAC1B;AAGA,MAAI,YAAY,aAAa,oBAAoB,OAAO;AACtD,eAAO,0BAAC,YAAS,IAAG,KAAI;AAAA,EAC1B;AAGA,MAAI,CAAC,YAAY,aAAa,kBAAkB;AAC9C,eACE;AAAA,MAAC;AAAA;AAAA,QACC,IAAI;AAAA,UACF,UAAU;AAAA;AAAA;AAAA,UAGV;AAAA,QACF;AAAA;AAAA,IACF;AAAA,EAEJ;AAEA,MAAIA,UAAS,aAAa,SAAS;AAEjC,eAAO,0BAACA,QAAA,EAAM;AAAA,EAChB,WAAW,aAAa,WAAW,CAACA,QAAO;AAEzC,WAAO;AAAA,EACT;AAEA,aAAO,0BAAC,aAAU,UAAoB;AACxC;;;AClFO,IAAM,YAA2B;AAAA,EACtC;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAAwB;AAEnE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,oBAAoB,IAAI,MAAM,OAAO,0BAA0B;AAEvE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,oBAAoB,IAAI,MAAM,OAAO,0BAA0B;AAEvE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAAwB;AAEnE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAAwB;AAEnE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAAwB;AAEnE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,oBAAoB,IAAI,MAAM,OAAO,0BAA6B;AAE1E,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,cAAc,MAAM,OAAO,wBAA2B;AAE5D,aAAO;AAAA,QACL,WAAW,YAAY;AAAA,MACzB;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAA2B;AAEtE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAA4B;AAEvE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,oBAAoB,IAAI,MAAM,OAAO,0BAA8B;AAE3E,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,4BAAyC;AAEpF,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,oBAAoB,IAAI,MAAM,OAAO,0BAAmC;AAEhF,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAAiC;AAE5E,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,wBAAiC;AAE5E,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,0BAA0B,IAAI,MAAM,OAAO,gCAA0B;AAE7E,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EAEA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,kBAAkB,IAAI,MAAM,OAAO,iCAA2B;AAEtE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,qBAAqB,IAAI,MAAM,OAAO,oCAA8B;AAE5E,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AAAA,IACE,MAAM,YAAY;AAChB,YAAM,EAAE,uBAAuB,IAAI,MAAM,OAAO,sCAAgC;AAEhF,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,MAAM;AAAA,EACR;AACF;;;ACtKa,IAAAC,uBAAA;AAfb,IAAM,qBAAqB,MAAqB;AAAA,EAC9C;AAAA,IACE,MAAM;AAAA,IACN,MAAM,YAAY;AAChB,YAAM,EAAE,mBAAmB,IAAI,MAAM,OAAO,2BAAqB;AAEjE,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAEA,GAAG,YAAgB;AAAA,EACnB;AAAA,IACE,MAAM;AAAA,IACN,aAAS,0BAAC,YAAS;AAAA,EACrB;AACF;AAEA,IAAM,mBAAmB,MAAqB;AAAA,EAC5C;AAAA,IACE,OAAO;AAAA,IACP,MAAM,YAAY;AAChB,YAAM,EAAE,SAAS,IAAI,MAAM,OAAO,wBAAuB;AAEzD,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,EACF;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,MAAM,YAAY;AAChB,YAAM,EAAE,YAAY,IAAI,MAAM,OAAO,2BAAqB;AAE1D,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,EACF;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,MAAM,YAAY;AAChB,YAAM,EAAE,yBAAyB,IAAI,MAAM,OAAO,+BAAqC;AAEvF,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,EACF;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,MAAM,YAAY;AAChB,YAAM,EAAE,OAAO,IAAI,MAAM,OAAO,sBAAyB;AAEzD,aAAO;AAAA,QACL,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,UAAU;AAAA,MACR;AAAA,QACE,MAAM;AAAA,QACN,MAAM,YAAY;AAChB,gBAAM,EAAE,oBAAoB,IAAI,MAAM,OACpC,mCACF;AAEA,iBAAO;AAAA,YACL,WAAW;AAAA,UACb;AAAA,QACF;AAAA,MACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAWA,GAAG,CAAC,GAAGC,aAAoB,GAAG,GAAG,SAAS,EAAE;AAAA,QAC1C,CAAC,OAAO,OAAO,aAAa,SAAS,UAAU,CAAC,QAAQ,IAAI,SAAS,MAAM,IAAI,MAAM;AAAA,MACvF;AAAA,IACF;AAAA,EACF;AACF;;;AhBHgB,IAAAC,uBAAA;AA3ChB,IAAM,SAAN,MAAa;AAAA,EAeX,YAAY,eAA8B;AAd1C,wBAAQ,WAAyB,CAAC;AAClC,wBAAQ,UAAyB;AACjC,wBAAQ,SAAuC,CAAC;AAChD,wBAAQ,aAA8C;AAAA,MACpD,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,WAAW;AAAA,UACT,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB;AAAA,QACA,OAAO,CAAC;AAAA,MACV;AAAA,IACF;AAoEA,wBAAO,eAAc,CACnB,SAGG;AA3IP,UAAAC,KAAA;AA4II,4BAAAC,SAAU,KAAK,IAAI,IAAI,KAAK,UAAU,cAAc,8BAA8B;AAClF,4BAAAA;AAAA,QACE,OAAO,KAAK,OAAO;AAAA,QACnB,IACE,KAAK,UAAU,cACjB,uDAAuD,OAAO,KAAK,EAAE;AAAA,MACvE;AACA,4BAAAA;AAAA,UACED,MAAA,KAAK,cAAL,gBAAAA,IAAgB,SAAM,UAAK,cAAL,mBAAgB;AAAA,QACtC,IAAI,KAAK,UAAU,cAAc;AAAA,MACnC;AACA,4BAAAC;AAAA,QACE,CAAC,KAAK,aAAc,KAAK,aAAa,OAAO,KAAK,cAAc;AAAA,QAChE,IAAI,KAAK,UAAU,cAAc;AAAA,MACnC;AAEA,UACE,CAAC,KAAK,aACL,KAAK,aACJ,OAAO,KAAK,cAAc;AAAA,MAE1B,KAAK,UAAU,OAAO,WAAW,MAAM,iBACzC;AACA,gBAAQ;AAAA,UACN;AAAA,SACC,KAAK,UAAU,cAAc,qFAAqF,KAAK,UAAU,cAAc;AAAA,QAChJ,KAAK;AAAA,QACP;AAAA,MACF;AAEA,UAAI,KAAK,GAAG,WAAW,GAAG,GAAG;AAC3B,gBAAQ;AAAA,UACN,IAAI,KAAK,UAAU,cAAc;AAAA,QACnC;AAEA,aAAK,KAAK,KAAK,GAAG,MAAM,CAAC;AAAA,MAC3B;AAEA,YAAM,EAAE,WAAW,GAAG,SAAS,IAAI;AAEnC,UAAI,WAAW;AACb,aAAK,QAAQ,KAAK;AAAA,UAChB,MAAM,GAAG,KAAK,EAAE;AAAA,UAChB,MAAM,YAAY;AAChB,kBAAM,MAAM,MAAM,UAAU;AAE5B,gBAAI,aAAa,KAAK;AACpB,qBAAO,EAAE,WAAW,IAAI,QAAQ;AAAA,YAClC,OAAO;AACL,qBAAO,EAAE,WAAW,IAAI;AAAA,YAC1B;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AAEA,WAAK,KAAK,KAAK,QAAQ;AAAA,IACzB;AAqEA,wBAAQ,sBAAqB,CAAC,WAAmB,SAA+B;AAzQlF,UAAAD,KAAA;AA0QI,4BAAAC,SAAU,KAAK,UAAU,SAAS,GAAG,4BAA4B;AAEjE,4BAAAA,SAAU,KAAK,IAAI,IAAI,KAAK,UAAU,cAAc,8BAA8B;AAClF,4BAAAA;AAAA,UACED,MAAA,KAAK,cAAL,gBAAAA,IAAgB,SAAM,UAAK,cAAL,mBAAgB;AAAA,QACtC,IAAI,KAAK,UAAU,cAAc;AAAA,MACnC;AACA,4BAAAC,SAAU,KAAK,IAAI,IAAI,KAAK,UAAU,cAAc,8BAA8B;AAClF,4BAAAA;AAAA,QACE,CAAC,KAAK,aAAc,KAAK,aAAa,OAAO,KAAK,cAAc;AAAA,QAChE,IAAI,KAAK,UAAU,cAAc;AAAA,MACnC;AAEA,UACE,CAAC,KAAK,aACL,KAAK,aACJ,OAAO,KAAK,cAAc;AAAA,MAE1B,KAAK,UAAU,OAAO,WAAW,MAAM,iBACzC;AACA,gBAAQ;AAAA,UACN;AAAA,SACC,KAAK,UAAU,cAAc,yFAAyF,KAAK,UAAU,cAAc;AAAA,QACpJ,KAAK;AAAA,QACP;AAAA,MACF;AAEA,UAAI,KAAK,GAAG,WAAW,GAAG,GAAG;AAC3B,gBAAQ;AAAA,UACN,IAAI,KAAK,UAAU,cAAc;AAAA,QACnC;AAEA,aAAK,KAAK,KAAK,GAAG,MAAM,CAAC;AAAA,MAC3B;AAEA,UAAI,KAAK,GAAG,MAAM,GAAG,EAAE,CAAC,MAAM,YAAY;AACxC,gBAAQ;AAAA,UACN,IAAI,KAAK,UAAU,cAAc;AAAA,QACnC;AAEA,aAAK,KAAK,KAAK,GAAG,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,MAChD;AAEA,YAAM,EAAE,WAAW,GAAG,SAAS,IAAI;AAEnC,YAAM,gBAAgB,KAAK,QAAQ,UAAU,CAAC,UAAU,MAAM,SAAS,YAAY;AAMnF,UAAI,CAAC,eAAe;AAClB,gBAAQ;AAAA,UACN;AAAA,QACF;AACA;AAAA,MACF,WAAW,CAAC,KAAK,QAAQ,aAAa,EAAE,UAAU;AAChD,aAAK,QAAQ,aAAa,EAAE,WAAW,CAAC;AAAA,MAC1C;AAEA,UAAI,WAAW;AACb,aAAK,QAAQ,aAAa,EAAE,SAAU,KAAK;AAAA,UACzC,MAAM,GAAG,KAAK,EAAE;AAAA,UAChB,MAAM,YAAY;AAChB,kBAAM,MAAM,MAAM,UAAU;AAE5B,gBAAI,aAAa,KAAK;AACpB,qBAAO,EAAE,WAAW,IAAI,QAAQ;AAAA,YAClC,OAAO;AACL,qBAAO,EAAE,WAAW,IAAI;AAAA,YAC1B;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AAEA,WAAK,UAAU,SAAS,EAAE,MAAM,KAAK,QAAQ;AAAA,IAC/C;AAhRE,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,OAAO;AACT,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK;AAAA,EACd;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,aAAa,QAAmB,EAAE,QAAQ,GAAG,KAAK,IAAmB,CAAC,GAAG;AACvE,UAAM,SAAS;AAAA,MACb;AAAA,QACE,MAAM;AAAA,QACN,kBACE,0BAAC,oBAAS,OAAO,OAAO,OACtB,wCAAC,oBAAiB,UAAU,OAAO,eAAe,cAChD,wCAAC,SAAM,QAAQ,OAAO,eAAe,QACnC,wCAAC,gBAAa,GAChB,GACF,GACF;AAAA,QAEF,aAAS,0BAAC,OAAI,QAAgB,OAAO,OAAO,OAAQ;AAAA,QACpD,UAAU;AAAA,UACR,GAAG,mBAAmB;AAAA,UACtB;AAAA,YACE,MAAM;AAAA,YACN,MAAM,YAAY;AAChB,oBAAM,EAAE,mBAAmB,IAAI,MAAM,OAAO,mCAAmC;AAE/E,qBAAO;AAAA,gBACL,WAAW;AAAA,cACb;AAAA,YACF;AAAA,YACA,UAAU;AAAA,cACR,GAAG,KAAK;AAAA,cACR;AAAA,gBACE,MAAM;AAAA,gBACN,aAAS,0BAAC,gBAAa;AAAA,cACzB;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAI,QAAQ;AACV,WAAK,SAAS,mBAAmB,QAAQ,IAAI;AAAA,IAC/C,OAAO;AACL,WAAK,SAAS,oBAAoB,QAAQ,IAAI;AAAA,IAChD;AAEA,WAAO,KAAK;AAAA,EACd;AAAA,EA6EO,gBACL,SAIA,MACM;AAxNV,QAAAD,KAAA;AAyNI,QAAI,OAAO,YAAY,YAAY,WAAW,SAAS;AAIrD,4BAAAC,SAAU,QAAQ,IAAI,8BAA8B;AACpD,4BAAAA;AAAA,UACED,MAAA,QAAQ,cAAR,gBAAAA,IAAmB,SAAM,aAAQ,cAAR,mBAAmB;AAAA,QAC5C;AAAA,MACF;AACA,4BAAAC,SAAU,KAAK,SAAS,QAAQ,EAAE,MAAM,QAAW,kCAAkC;AACrF,4BAAAA,SAAU,MAAM,QAAQ,QAAQ,KAAK,GAAG,yCAAyC;AAEjF,WAAK,SAAS,QAAQ,EAAE,IAAI,EAAE,GAAG,SAAS,OAAO,CAAC,EAAE;AAEpD,cAAQ,MAAM,QAAQ,CAACC,UAAS;AAC9B,aAAK,mBAAmB,QAAQ,IAAIA,KAAI;AAAA,MAC1C,CAAC;AAAA,IACH,WAAW,OAAO,YAAY,YAAY,MAAM;AAI9C,4BAAAD,SAAU,QAAQ,IAAI,8BAA8B;AACpD,4BAAAA;AAAA,UACE,aAAQ,cAAR,mBAAmB,SAAM,aAAQ,cAAR,mBAAmB;AAAA,QAC5C;AAAA,MACF;AACA,4BAAAA,SAAU,KAAK,SAAS,QAAQ,EAAE,MAAM,QAAW,kCAAkC;AAErF,WAAK,SAAS,QAAQ,EAAE,IAAI,EAAE,GAAG,SAAS,OAAO,CAAC,EAAE;AAEpD,UAAI,MAAM,QAAQ,IAAI,GAAG;AACvB,aAAK,QAAQ,CAAC,MAAM,KAAK,mBAAmB,QAAQ,IAAI,CAAC,CAAC;AAAA,MAC5D,OAAO;AACL,aAAK,mBAAmB,QAAQ,IAAI,IAAI;AAAA,MAC1C;AAAA,IACF,WAAW,OAAO,YAAY,YAAY,MAAM;AAC9C,UAAI,MAAM,QAAQ,IAAI,GAAG;AACvB,aAAK,QAAQ,CAAC,MAAM,KAAK,mBAAmB,SAAS,CAAC,CAAC;AAAA,MACzD,OAAO;AACL,aAAK,mBAAmB,SAAS,IAAI;AAAA,MACvC;AAAA,IACF,OAAO;AACL,YAAM,IAAI;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAuFA,SAAS,OAA2D;AAClE,QAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,WAAK,UAAU,CAAC,GAAG,KAAK,SAAS,GAAG,KAAK;AAAA,IAC3C,WAAW,OAAO,UAAU,YAAY,UAAU,MAAM;AACtD,WAAK,QAAQ,KAAK,KAAK;AAAA,IACzB,WAAW,OAAO,UAAU,YAAY;AACtC,WAAK,UAAU,MAAM,KAAK,OAAO;AAAA,IACnC,OAAO;AACL,YAAM,IAAI;AAAA,QACR,4FAA4F;AAAA,UAC1F;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;AAWA,IAAM,mBAAmB,CAAC,UAA2B;AACnD,QAAM,aAAa,OAAO;AAE1B,MAAI,eAAe,UAAU;AAC3B,QAAI,UAAU,KAAM,QAAO;AAC3B,QAAI,MAAM,QAAQ,KAAK,EAAG,QAAO;AACjC,QAAI,iBAAiB,UAAU,MAAM,YAAY,SAAS,UAAU;AAClE,aAAO,MAAM,YAAY;AAAA,IAC3B;AAAA,EACF;AAEA,SAAO;AACT;;;AiBlYA,IAAAE,oBAAsB;AA6BtB,IAAM,UAAN,MAAc;AAAA,EAGZ,cAAc;AAFd;AAMA,oCAAW,CAAC,WAAsC;AAChD,UAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,eAAO,QAAQ,CAAC,cAAc;AAC5B,eAAK,SAAS,SAAS;AAAA,QACzB,CAAC;AAAA,MACH,OAAO;AACL,8BAAAC,SAAU,OAAO,IAAI,wBAAwB;AAC7C,8BAAAA,SAAU,OAAO,WAAW,8BAA8B;AAC1D,8BAAAA,SAAU,OAAO,OAAO,0BAA0B;AAClD,8BAAAA,SAAU,OAAO,MAAM,0BAA0B;AAGjD,cAAM,EAAE,IAAI,UAAU,GAAG,cAAc,IAAI;AAC3C,cAAM,MAAiB,WAAW,WAAW,QAAQ,IAAI,EAAE,KAAK,WAAW,EAAE;AAE7E,aAAK,QAAQ,GAAG,IAAI,EAAE,GAAG,eAAe,IAAI;AAAA,MAC9C;AAAA,IACF;AAEA,kCAAS,MAAM;AACb,aAAO,OAAO,OAAO,KAAK,OAAO;AAAA,IACnC;AAxBE,SAAK,UAAU,CAAC;AAAA,EAClB;AAwBF;;;AC5CA,IAAM,iBAAiB;AAAA,EACrB,CAAC,SAAS,WAAW,GAAG,SAAS;AAAA,EACjC,WAAW;AACb;AAEA,IAAM,6BACJ,CAAC,gBACD,CAAC,SACD,IAAI,SAAS;AACX,QAAM,QAAQ,KAAK,GAAG,IAAI;AAE1B,QAAM,gBAAyC,CAAC;AAEhD,SAAO;AAAA,IACL,GAAG;AAAA,IACH;AAAA,IACA,eAAe,CAAC,KAAa,iBAA0B;AACrD,oBAAc,GAAG,IAAI;AACrB,YAAM;AAAA;AAAA,QAEJ,gBAAgB;AAAA,UACd,GAAG;AAAA,UACH,GAAG;AAAA,QACL,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;AAUF,IAAM,qBAAqB,CACzB,iBAA+B,CAAC,GAChC,iBAA0C,CAAC,GAC3C,mBAA4C,CAAC,MAC1C;AACH,QAAM,eAAe,EAAE,GAAG,gBAAgB,GAAG,iBAAiB;AAE9D,QAAM,2BAA2B,CAAC;AAIlC,MAAI,OAAiC;AACnC,6BAAyB,oBAAoB;AAC7C,6BAAyB,iBAAiB;AAAA,EAC5C;AAEA,QAAM,QAAQ,eAAe;AAAA,IAC3B,gBAAgB;AAAA,MACd,WAAW,eAAe;AAAA,IAC5B;AAAA,IACA,SAAS;AAAA,IACT,UAAU;AAAA,IACV,YAAY,CAAC,yBAAyB;AAAA,MACpC,GAAG,qBAAqB,wBAAwB;AAAA,MAChD;AAAA,MACA,SAAS;AAAA,MACT,GAAG,eAAe,IAAI,CAAC,MAAM,EAAE,CAAC;AAAA,IAClC;AAAA,IACA,WAAW,CAAC,2BAA2B,YAAY,CAAC;AAAA,EACtD,CAAC;AAED,SAAO;AACT;AAEA,IAAM,iCACJ,CAAC,EAAE,SAAS,MACZ,CAAC,SACD,CAAC,WAAW;AA1Fd,MAAAC;AA4FI,MAAI,WAAW,MAAM,OAAKA,MAAA,OAAO,YAAP,gBAAAA,IAAgB,YAAW,KAAK;AACxD,aAAS,OAAO,CAAC;AACjB,WAAO,SAAS,OAAO;AACvB;AAAA,EACF;AAEA,SAAO,KAAK,MAAM;AACpB;;;AC5FK,IAAM,aAAa,MAAM;AAC9B,QAAM,YAAuB,CAAC;AAE9B,SAAO;AAAA,IACL,SAAS,IAAa;AACpB,gBAAU,KAAK,EAAE;AAAA,IACnB;AAAA,IACA,OAAO,SAAkB;AACvB,gBAAU,OAAO,UAAU,QAAQ,OAAO,GAAG,CAAC;AAAA,IAChD;AAAA,IACA,aAAgB,MAAS,OAAe;AACtC,aAAO,UAAU,OAAO,CAAC,KAAK,OAAO,GAAG,KAAK,KAAK,GAAG,IAAI;AAAA,IAC3D;AAAA,IACA,MAAM,kBAAqB,MAAS,OAAe;AACjD,UAAI,SAAS;AAEb,iBAAW,MAAM,WAAW;AAC1B,iBAAS,MAAM,GAAG,QAAQ,KAAK;AAAA,MACjC;AAEA,aAAO;AAAA,IACT;AAAA,IACA,aAA8B,MAAS;AACrC,aAAO,UAAU,IAAI,CAAC,OAAO,GAAG,GAAG,IAAI,CAAC;AAAA,IAC1C;AAAA,IACA,MAAM,kBAAmC,MAAS;AAChD,YAAM,SAAS,CAAC;AAEhB,iBAAW,MAAM,WAAW;AAC1B,eAAO,KAAK,MAAM,GAAG,GAAG,IAAI,CAAC;AAAA,MAC/B;AAEA,aAAO;AAAA,IACT;AAAA,IACA,eAAgC,MAAS;AACvC,aAAO,QAAQ;AAAA,QACb,UAAU,IAAI,CAAC,OAAO;AACpB,iBAAO,GAAG,GAAG,IAAI;AAAA,QACnB,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;;;ACjDO,IAAM,sBAAsB;AAAA,EACjC,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,WAAW;AAAA,EACX,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AACN;;;AxBicW,IAAAC,uBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AArcX,IAAM;AAAA,EACJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,IAAI;AAmDJ,IAAM,YAAN,MAAgB;AAAA,EAqCd,YAAY,EAAE,QAAQ,WAAW,IAA8B,CAAC,GAAG;AApCnE;AACA,mCAAkC,CAAC;AACnC,qCAA2D,CAAC;AAE5D,iCAAQ;AAAA,MACN,gBAAgB,CAAC;AAAA,IACnB;AAEA,wCAA4D,CAAC;AAE7D,0CAAiB;AAAA,MACf,UAAUC;AAAA,MACV,MAAM,EAAE,SAAS,GAAG;AAAA,MACpB,SAAS,CAAC,IAAI;AAAA,MACd,UAAUA;AAAA,MACV,eAAe,EAAE,UAAU,KAAK;AAAA,MAChC,QAAQ,EAAE,OAAO,YAAY,MAAM,UAAU;AAAA,MAC7C,cAAc,CAAC;AAAA,MACf,WAAW;AAAA,IACb;AAKA;AAAA;AAAA;AAAA,gCAAO,IAAI,KAAK;AAChB;AACA,mCAAmB;AAAA,MACjB,YAAY,CAAC;AAAA,MACb,QAAQ,CAAC;AAAA,IACX;AACA,uCAA0D,CAAC;AAC3D,oCAA8B,CAAC;AAC/B,iCAAsB;AACtB,wCAAe,IAAI,aAAa;AAChC,mCAAU,IAAI,QAAQ;AAetB,yCAAgB,CAAC,eAAwC;AACvD,UAAI,MAAM,QAAQ,UAAU,GAAG;AAC7B,mBAAW,IAAI,CAAC,SAAS;AACvB,gCAAAC,SAAU,KAAK,WAAW,8BAA8B;AACxD,gCAAAA,SAAU,KAAK,MAAM,yBAAyB;AAE9C,eAAK,QAAQ,WAAW,KAAK,IAAI,IAAI,KAAK;AAAA,QAC5C,CAAC;AAAA,MACH,OAAO;AACL,8BAAAA,SAAU,WAAW,WAAW,8BAA8B;AAC9D,8BAAAA,SAAU,WAAW,MAAM,yBAAyB;AAEpD,aAAK,QAAQ,WAAW,WAAW,IAAI,IAAI,WAAW;AAAA,MACxD;AAAA,IACF;AAEA,qCAAY,CAAC,WAA4B;AACvC,UAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,eAAO,IAAI,CAAC,UAAU;AACpB,gCAAAA,SAAU,MAAM,WAAW,8BAA8B;AACzD,gCAAAA,SAAU,MAAM,MAAM,yBAAyB;AAE/C,eAAK,QAAQ,OAAO,MAAM,IAAI,IAAI,MAAM;AAAA,QAC1C,CAAC;AAAA,MACH,OAAO;AACL,8BAAAA,SAAU,OAAO,WAAW,8BAA8B;AAC1D,8BAAAA,SAAU,OAAO,MAAM,yBAAyB;AAEhD,aAAK,QAAQ,OAAO,OAAO,IAAI,IAAI,OAAO;AAAA,MAC5C;AAAA,IACF;AAEA,0CAAiB,CAAC,gBAA0C;AAC1D,kBAAY,QAAQ,CAAC,eAAe;AAClC,aAAK,YAAY,KAAK,UAAU;AAAA,MAClC,CAAC;AAAA,IACH;AAEA,6CAAoB,CAAC,MAAyC;AAC5D,UAAI,MAAM,QAAQ,CAAC,GAAG;AACpB,aAAK,KAAK,IAAI,CAAC;AAAA,MACjB,OAAO;AACL,aAAK,KAAK,IAAI,CAAC;AAAA,MACjB;AAAA,IACF;AAEA,uCAAc,CAAC,aAAgC;AAK7C,aAAO,QAAQ,QAAQ,EAAE,QAAQ,CAAC,CAAC,MAAMC,QAAO,MAAM;AACpD,aAAK,SAAS,IAAI,IAAIA;AAAA,MACxB,CAAC;AAAA,IACH;AAEA,uCAAc,CAAC,SACb,KAAK,OAAO,YAAY,IAAI;AAM9B;AAAA;AAAA;AAAA;AAAA,4CAAmB,CAAC,WAAmB,UAAkC;AACvE,4BAAAD,SAAU,MAAM,QAAQ,KAAK,GAAG,yCAAyC;AAEzE,WAAK,OAAO,gBAAgB,WAAW,KAAK;AAAA,IAC9C;AAMA;AAAA;AAAA;AAAA;AAAA,gDAAuB,CACrB,SACA,UACG,KAAK,OAAO,gBAAgB,SAAS,KAAK;AAE/C,2CAAkB,CAChB,WACA,SACG;AACH,WAAK,OAAO,gBAAgB,WAAW,IAAI;AAAA,IAC7C;AA8BA,sDAA6B,CAAC,iBAAkE;AA7PlG,UAAAE,KAAA;AA8PI,UAAI,aAAa,SAAS;AACxB,aAAK,eAAe,UAAU;AAAA,UAC5B;AAAA,UACA,KAAIA,MAAA,aAAa,YAAb,gBAAAA,IAAsB,OAAO,CAAC,QAAQ,QAAQ,UAAS,CAAC;AAAA,QAC9D;AAAA,MACF;AAEA,WAAI,kBAAa,SAAb,mBAAmB,MAAM;AAC3B,aAAK,eAAe,WAAW,aAAa,KAAK;AAAA,MACnD;AAEA,WAAI,kBAAa,SAAb,mBAAmB,MAAM;AAC3B,aAAK,eAAe,WAAW,aAAa,KAAK;AAAA,MACnD;AAEA,WAAI,kBAAa,SAAb,mBAAmB,SAAS;AAC9B,aAAK,eAAe,KAAK,UAAU,aAAa,KAAK;AAAA,MACvD;AAEA,UAAI,aAAa,OAAO;AACtB,cAAMC,aAAY,aAAa,MAAM;AACrC,cAAMC,cAAa,aAAa,MAAM;AAEtC,YAAI,CAACD,cAAa,CAACC,aAAY;AAC7B,kBAAQ;AAAA,YACN,kSAAkS,KAAK;AAAA,UACzS;AACA,2BAAAC,SAAM,KAAK,eAAe,OAAO,OAAO,aAAa,KAAK;AAAA,QAC5D;AAEA,YAAID,YAAY,kBAAAC,SAAM,KAAK,eAAe,OAAO,OAAOD,WAAU;AAElE,YAAID,WAAW,kBAAAE,SAAM,KAAK,eAAe,OAAO,MAAMF,UAAS;AAAA,MACjE;AAEA,YAAI,kBAAa,kBAAb,mBAA4B,cAAa,QAAW;AACtD,aAAK,eAAe,cAAc,WAAW,aAAa,cAAc;AAAA,MAC1E;AAEA,UAAI,aAAa,cAAc,QAAW;AACxC,aAAK,eAAe,YAAY,aAAa;AAAA,MAC/C;AAAA,IACF;AAEA,sCAAa,CAAC,SAAiB;AAC7B,WAAK,UAAU,IAAI,IAAI,WAAW;AAAA,IACpC;AAEA,sDAA6B,CAC3B,YACA,eACA,cAC6B;AAC7B,UAAI;AAEF,eAAO,KAAK,MAAM,eAAe,UAAU,EAAE,aAAa,EAAE,SAAS,KAAK,CAAC;AAAA,MAC7E,SAAS,KAAK;AACZ,gBAAQ,MAAM,iCAAiC,GAAG;AAElD,eAAO,CAAC;AAAA,MACV;AAAA,IACF;AAEA,qCAAY,CAAC,aAAiC,KAAK,QAAQ,QAAQ;AAuHnE,wCAAe,CAAC,MAAc,OAAgB;AAC5C,4BAAAH;AAAA,QACE,KAAK,UAAU,IAAI;AAAA,QACnB,YAAY,IAAI;AAAA,MAClB;AACA,WAAK,UAAU,IAAI,EAAE,SAAS,EAAE;AAAA,IAClC;AAEA,0CAAiB,CAAC,eAA6B;AAC7C,YAAM,SAAS,IAAI,OAAO,UAAU;AAEpC,WAAK,QAAQ,OAAO,QAAQ,IAAI;AAAA,IAClC;AAEA,yCAAgB,CAAC,MAAc,eAAe,UAC5C,eAAe,KAAK,UAAU,IAAI,EAAE,eAAe,IAAI,KAAK,UAAU,IAAI,EAAE,UAAU;AAExF,4CAAmB,CAAK,MAAc,cAAiB,UAAkB;AACvE,aAAO,KAAK,UAAU,IAAI,EAAE,aAAa,cAAc,KAAK;AAAA,IAC9D;AAEA,2CAAkB,CAAC,SAAiB,KAAK,UAAU,IAAI,EAAE,YAAY;AAzUnE,SAAK,aAAa,cAAc,CAAC;AAEjC,SAAK,2BAA2B,UAAU,CAAC,CAAC;AAE5C,SAAK,WAAW,sBAAsB;AACtC,SAAK,WAAW,6BAA6B;AAC7C,SAAK,WAAW,yBAAyB;AACzC,SAAK,WAAW,uBAAuB;AAEvC,SAAK,SAAS,IAAI,OAAO,iBAAiB,CAAC;AAAA,EAC7C;AAAA,EAuFA,MAAM,UAAU,iBAA2B;AACzC,WAAO,KAAK,KAAK,UAAU,EAAE,QAAQ,CAAC,WAAW;AAC/C,YAAM,YAAY,KAAK,WAAW,MAAM,EAAE;AAE1C,UAAI,WAAW;AACb,kBAAU;AAAA,UACR,iBAAiB,KAAK;AAAA,UACtB,kBAAkB,KAAK;AAAA,UACvB,WAAW,KAAK;AAAA,UAChB,cAAc,KAAK;AAAA,QACrB,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAED,YAAI,kBAAAM,SAAW,eAAe,GAAG;AAC/B,sBAAgB;AAAA,QACd,eAAe,KAAK;AAAA,QACpB,WAAW,KAAK;AAAA,QAChB,aAAa,KAAK;AAAA,QAClB,aAAa,KAAK;AAAA,QAClB,iBAAiB,KAAK;AAAA,QACtB,kBAAkB,KAAK;AAAA,QACvB,WAAW,KAAK;AAAA,QAChB,cAAc,KAAK;AAAA,MACrB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAoEA,MAAM,SAAS,gBAA0B;AACvC,SAAK,QAAQ,SAAS;AAAA,MACpB;AAAA,QACE,MAAM;AAAA,QACN,OAAO;AAAA,UACL,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB;AAAA,QACA,WAAW,YAAY;AACrB,gBAAM,EAAE,cAAc,IAAI,MAAM,OAAO,uBAAsB;AAC7D,iBAAO;AAAA,QACT;AAAA,QACA,UAAU;AAAA,QACV,IAAI;AAAA,QACJ,MAAM;AAAA,UACJ,OAAO;AAAA,YACL,IAAI;AAAA,YACJ,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,WAAO,KAAK,KAAK,UAAU,EAAE,QAAQ,CAAC,WAAW;AAC/C,WAAK,WAAW,MAAM,EAAE,SAAS,IAAI;AAAA,IACvC,CAAC;AAED,YAAI,kBAAAA,SAAW,cAAc,GAAG;AAC9B,qBAAe,IAAI;AAAA,IACrB;AAAA,EACF;AAAA,EAEA,MAAM,iBAAiB;AACrB,UAAM,eAAe,MAAM,QAAQ;AAAA,MACjC,KAAK,eAAe,QAAQ,IAAI,OAAO,WAAW;AAChD,YAAI;AACF,gBAAM,EAAE,SAAS,KAAK,IAAI,MAAa,6CAAkB,MAAM;AAE/D,iBAAO,EAAE,MAAM,OAAO;AAAA,QACxB,QAAQ;AACN,cAAI;AACF,kBAAM,EAAE,SAAS,KAAK,IAAI,MAAa,+CAAkB,MAAM;AAC/D,mBAAO,EAAE,MAAM,OAAO;AAAA,UACxB,QAAQ;AACN,mBAAO,EAAE,MAAM,MAAM,OAAO;AAAA,UAC9B;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,aAAa,OAAqD,CAAC,KAAK,YAAY;AACzF,UAAI,QAAQ,MAAM;AAChB,YAAI,QAAQ,MAAM,IAAI,QAAQ;AAAA,MAChC;AAEA,aAAO;AAAA,IACT,GAAG,CAAC,CAAC;AAAA,EACP;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,UAAU,qBAA6D,CAAC,GAAG;AAC/E,UAAM,oBAAoB,MAAM,KAAK,eAAe;AAEpD,UAAM,kBAAkB,OAAO,KAAK,KAAK,UAAU,EAChD,IAAI,CAAC,WAAW;AACf,YAAM,gBAAgB,KAAK,WAAW,MAAM,EAAE;AAE9C,UAAI,eAAe;AACjB,eAAO,cAAc,EAAE,SAAS,KAAK,eAAe,QAAQ,CAAC;AAAA,MAC/D;AAEA,aAAO;AAAA,IACT,CAAC,EACA,OAAO,CAAC,MAAM,CAAC;AAElB,UAAM,eAAgB,MAAM,QAAQ,IAAI,eAAe;AACvD,UAAM,cAAc,aAAa;AAAA,MAC/B,CAAC,KAAK,uBAAuB;AAC3B,cAAM,cAAc,mBAAmB;AAAA,UACrC,CAAC,MAAM,YAAY;AACjB,iBAAK,QAAQ,MAAM,IAAI,QAAQ;AAE/B,mBAAO;AAAA,UACT;AAAA,UACA,CAAC;AAAA,QACH;AAEA,eAAO,KAAK,WAAW,EAAE,QAAQ,CAAC,WAAW;AAC3C,cAAI,MAAM,IAAI,EAAE,GAAG,IAAI,MAAM,GAAG,GAAG,YAAY,MAAM,EAAE;AAAA,QACzD,CAAC;AAED,eAAO;AAAA,MACT;AAAA,MACA,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,KAAK,eAAe,QAAQ,OAE9C,CAAC,KAAK,YAAY;AACnB,UAAI,OAAO,IAAI;AAAA,QACb,GAAG,kBAAkB,OAAO;AAAA,QAC5B,GAAI,YAAY,OAAO,KAAK,CAAC;AAAA,QAC7B,GAAI,mBAAmB,OAAO,KAAK,CAAC;AAAA,MACtC;AAEA,aAAO;AAAA,IACT,GAAG,CAAC,CAAC;AAEL,SAAK,eAAe,eAAe;AAEnC,WAAO,QAAQ,QAAQ;AAAA,EACzB;AAAA,EAyBA,SAAS;AACP,UAAM,kBAAc,YAAAC,SAAK,qBAAqB,KAAK,eAAe,WAAW,CAAC,CAAC;AAC/E,UAAM,SAAU,aAAa,QAAQ,0BAA0B,KAC7D;AAEF,SAAK,QAAQ;AAAA,MACX;AAAA,QACE,WAAW;AAAA,UACT,iBAAa,aAAAF,SAAM,CAAC,GAAG,sBAAsB,oBAAoB;AAAA,UACjE,OAAO;AAAA,YACL,iBAAiB,CAAC;AAAA,YAClB,cAAe,aAAa,QAAQ,uBAAuB,KAAK;AAAA,UAClE;AAAA,UACA,UAAU;AAAA,YACR,QAAQ,YAAY,MAAM,IAAI,SAAS;AAAA,YACvC;AAAA,UACF;AAAA,UACA,OAAO,eAAe;AAAA,QACxB;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,IACP;AAEA,UAAM,SAAS,KAAK,OAAO,aAAa,MAAM;AAAA,MAC5C,UAAU,YAAY;AAAA,IACxB,CAAC;AAED,eAAO,0BAAC,kBAAe,QAAgB;AAAA,EACzC;AACF;;;ADtdA,IAAM,cAAc,OAClB,WACA,EAAE,SAAS,gBAAgB,SAAS,MACjC;AAtBL,MAAAG,KAAA;AAuBE,MAAI,CAAC,WAAW;AACd,UAAM,IAAI,MAAM,yEAAyE;AAAA,EAC3F;AAEA,SAAO,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOd,YAAY,kBAAkB,QAAQ,IAAI,wBAAwB;AAAA,IAClE,MAAM;AAAA,IACN,SAAS;AAAA,IACT,mBAAmB,QAAQ,IAAI,8BAA8B;AAAA,IAC7D,QAAQ;AAAA,MACN,WAAW,CAAC,SAAuE;AAvCzF,YAAAA;AAwCQ,iBAAOA,MAAA,qCAAU,WAAV,gBAAAA,IAAmB,WAAU;AAAA,MACtC;AAAA,IACF;AAAA;AAAA,IAEA,UAAU;AAAA,MACR,KAAK;AAAA,MACL,YAAY;AAAA,MACZ,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,MAKlB,WAAW,MAAM;AAAA,IACnB;AAAA,IACA,aAAa;AAAA,IACb,OAAO;AAAA,MACL,KAAK;AAAA,MACL,WAAW;AAAA,IACb;AAAA,EACF;AAEA,QAAM,EAAE,IAAI,IAAI,eAAe;AAU/B,MAAI;AACF,UAAM;AAAA,MACJ,MAAM;AAAA,QACJ,MAAM,EAAE,MAAM,SAAS,UAAAC,WAAU,MAAM;AAAA,MACzC;AAAA,IACF,IAAI,MAAM,IAA2B,qBAAqB;AAE1D,WAAO,OAAO,OAAO;AACrB,WAAO,OAAO,iBAAiB;AAC/B,WAAO,OAAO,QAAQ;AACtB,WAAO,OAAO,WAAW;AAAA,MACvB,GAAG,OAAO,OAAO;AAAA,MACjB,WAAW,CAAC,gBAAgBA,UAAS,KAAK,CAAC,YAAY,QAAQ,SAAS,WAAW;AAAA,IACrF;AACA,WAAO,OAAO,cAAc,OAAO,eAAe;AAAA,EACpD,SAAS,KAAK;AAKZ,YAAQ,MAAM,GAAG;AAAA,EACnB;AAEA,QAAM,MAAM,IAAI,UAAU;AAAA,IACxB,QAAQ,iDAAgB;AAAA,IACxB,YAAY;AAAA,EACd,CAAC;AAED,QAAM,IAAI,SAAS,iDAAgB,QAAQ;AAC3C,QAAM,IAAI,UAAU,iDAAgB,SAAS;AAC7C,QAAM,IAAI,WAAUD,MAAA,iDAAgB,WAAhB,gBAAAA,IAAwB,YAAY;AAExD,gCAAW,SAAS,EAAE,OAAO,IAAI,OAAO,CAAC;AAEzC,MACE,OAAO,WAAW,eAClB,UACA,SAAS,UACT,OAAO,OAAO,QAAQ,YACtB,OAAO,QAAQ,QACf,YAAY,OAAO,OACnB,OAAO,OAAO,IAAI,WAAW,YAC7B;AACA,WAAO,IAAI,OAAO;AAAA,EACpB;AAEA,MAAI,SAAO,iBAAY,QAAZ,mBAAiB,YAAW,YAAY;AACjD,gBAAY,IAAI,OAAO;AAAA,EACzB;AACF;;;A0BjHA,IAAAE,SAAuB;AAEvB,qBAAoB;;;ACTpB,IAAAC,SAAuB;;;ACAvB,IAAAC,SAAuB;AAEvB,IAAM,eAAe,MAAM;AACzB,QAAM,YAAkB,cAAO,KAAK;AAEpC,EAAM,uBAAgB,MAAM;AAC1B,cAAU,UAAU;AAEpB,WAAO,MAAM;AACX,gBAAU,UAAU;AAAA,IACtB;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,SAAO;AACT;;;ADLA,IAAM,iBAAiB,MAAM;AAC3B,QAAM,CAAC,MAAM,MAAM,IAAU,gBAAiB;AAC9C,QAAM,YAAY,aAAa;AAE/B,QAAM,cAAoB,mBAAY,MAAM;AAC1C,QAAI,UAAU,SAAS;AACrB,aAAO,KAAK,OAAO,CAAC;AAAA,IACtB;AAAA,EACF,GAAG,CAAC,WAAW,MAAM,CAAC;AAEtB,SAAO,CAAC,MAAM,WAAW;AAC3B;;;AEpBA,IAAAC,gBAAwB;AAExB,sBAAqB;AAqBrB,IAAM,uBAAuB,CAC3B,UACA,MACA,YACM;AACN,QAAM,wBAAoB;AAAA,IACxB,UAAM,gBAAAC,SAAS,UAAU,MAAM,OAAO;AAAA,IACtC,CAAC,UAAU,SAAS,IAAI;AAAA,EAC1B;AAEA,SAAO;AACT;;;AC/BA,IAAM,0BAAyD,CAAC,aAAa;AAC3E,QAAM,QAAQ,KAAK,IAAI;AAEvB,SAAO,WAAW,MAAM;AACtB,aAAS;AAAA,MACP,YAAY;AAAA,MACZ,gBAAgB;AACd,eAAO,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK;AAAA,MACvC;AAAA,IACF,CAAC;AAAA,EACH,GAAG,CAAC;AACN;AAEA,IAAM,uBACJ,OAAO,wBAAwB,cAAc,0BAA0B;AAKzE,IAAM,yBAAuD,CAAC,WAAoB;AAChF,SAAO,aAAa,MAAa;AACnC;AAEA,IAAM,sBACJ,OAAO,uBAAuB,cAAc,yBAAyB;;;AJyEnE,IAAAC,uBAAA;AA5DJ,IAAM,+BAA+B,CAAqB;AAAA,EACxD;AAAA,EACA;AAAA,EACA;AACF,MAA6D;AAC3D,QAAM,YAAkB,cAAgE,CAAC,CAAC;AAC1F,QAAM,CAAC,MAAM,WAAW,IAAI,eAAe;AAE3C,QAAM,gBAAsB,cAAsB,IAAI;AACtD,QAAM,gBAAsB,mBAAY,MAAM;AAC5C,QAAI,cAAc,SAAS;AACzB,0BAAmB,cAAc,OAAO;AAAA,IAC1C;AAEA,kBAAc,UAAU,qBAAoB,MAAM;AAChD,oBAAc,UAAU;AAExB,kBAAY;AAAA,IACd,CAAC;AAAA,EACH,GAAG,CAAC,WAAW,CAAC;AAKhB,QAAM,yBAAyB,qBAAqB,eAAe,IAAI,EAAE,UAAU,KAAK,CAAC;AAEzF,QAAM,SAAe;AAAA,IACnB,CAAC,IAAI,gBAAgB;AACnB,UAAI,gBAAgB,MAAM;AACxB,eAAO,UAAU,QAAQ,EAAE;AAAA,MAC7B,OAAO;AACL,cAAM,UAAU,UAAU,QAAQ,EAAE;AACpC,kBAAU,QAAQ,EAAE,IAAI,EAAE,GAAG,SAAS,OAAO,EAAE,GAAG,aAAa,GAAG,EAAE;AAAA,MACtE;AAEA,6BAAuB;AAAA,IACzB;AAAA,IACA,CAAC,sBAAsB;AAAA,EACzB;AAEA,QAAMC,OAAY;AAAA,IAChB,MAAM,aAAa,IAAI,CAAC,gBAAgB,UAAU,WAAW,CAAC;AAAA,IAC9D,CAAC,YAAY;AAAA,EACf;AAEA,QAAM,SAAe;AAAA,IACnB,MACEA,KACG,IAAI,CAAC,OAAI;AAxFlB,UAAAC;AAwFqB,cAAAA,MAAA,UAAU,QAAQ,EAAE,MAApB,gBAAAA,IAAuB;AAAA,KAAK,EACxC,OAAO,CAAC,UAAU,UAAU,QAAQ,UAAU,MAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAO5D,CAACD,MAAK,IAAI;AAAA,EACZ;AAEA,aACE,4DACG;AAAA,iBAAa,IAAI,CAAC,gBAAgB;AACjC,YAAM,MAAM,UAAU,WAAW;AACjC,iBACE,0BAAC,eAAsB,IAAI,KAAK,aAA0B,OAAc,UAAtD,GAAsE;AAAA,IAE5F,CAAC;AAAA,IACA,SAAS,MAAM;AAAA,KAClB;AAEJ;AAmBA,IAAM,cAAoB;AAAA,EACxB,CAAC,EAAE,aAAa,IAAI,OAAO,OAAO,MAAkC;AAClE,UAAM,OAAO,YAAY,KAAK;AAE9B,4BAAwB,MAAM;AAC5B,aAAO,IAAI,IAAI;AAEf,aAAO,MAAM;AACX,eAAO,IAAI,IAAI;AAAA,MACjB;AAAA,IACF,GAAG,IAAI;AAEP,WAAO;AAAA,EACT;AAAA,EACA,CAAC,MAAM,aAAS,eAAAE,SAAQ,KAAK,OAAO,KAAK,KAAK;AAChD;AAMA,IAAM,MAAM,oBAAI,QAAgD;AAEhE,IAAI,UAAU;AAEd,SAAS,UAAgB,MAA0C;AACjE,QAAM,WAAW,IAAI,IAAI,IAAI;AAE7B,MAAI,SAAU,QAAO;AAErB,QAAM,KAAK,GAAG,KAAK,QAAS,KAAa,eAAe,aAAa,IAAI,SAAS;AAElF,MAAI,IAAI,MAAM,EAAE;AAEhB,SAAO;AACT;AAEA,IAAM,2BAA2B,CAAK,UAAmC;AACvE,QAAM,MAAY,cAAsB,MAAS;AAEjD,MAAI,KAAC,eAAAA,SAAQ,OAAO,IAAI,OAAO,GAAG;AAChC,QAAI,UAAU;AAAA,EAChB;AAEA,SAAO,CAAC,IAAI,OAAO;AACrB;AAEA,IAAM,0BAA0B,CAAC,UAAgC,iBAA2B;AAE1F,EAAM,iBAAU,UAAU,yBAAyB,YAAY,CAAC;AAClE;;;AKnLA,IAAAC,gBAA0B;AAkBnB,SAAS,iBAAiB,WAAmBC,UAAkB;AACpE,QAAM,QAAQ,cAAc;AAE5B,+BAAU,MAAM;AACd,UAAM,cAAc,WAAWA,QAAO;AAAA,EACxC,GAAG,CAAC,OAAO,WAAWA,QAAO,CAAC;AAChC;;;ACxBA,2BAAsB;AAGf,IAAM,kBAAkB,EAAE,OAAO;AAAA,EACtC,WAAW,EAAE,OAAO,EAAE,IAAI,CAAC;AAAA,EAC3B,UAAU,EAAE,KAAK,CAAC,MAAM,OAAO,CAAC;AAAA,EAChC,OAAO,EAAE,MAAM,CAAC,EAAE,OAAO,GAAG,EAAE,OAAO,GAAG,EAAE,QAAQ,CAAC,CAAC;AACtD,CAAC;AAUM,SAAS,oBAAiC;AAW/C,QAAM,WAAW,CAAC,cAA6C;AAC7D,UAAM,EAAE,WAAW,UAAU,MAAM,IAAI;AACvC,UAAM,eAAe;AAAA,MACnB,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AACA,QAAI,CAAC,aAAa,QAAQ,GAAG;AAC3B,YAAM,IAAI,MAAM,qBAAqB,QAAQ,EAAE;AAAA,IACjD;AACA,WAAO,EAAE,CAAC,aAAa,QAAQ,CAAC,GAAG,CAAC,EAAE,KAAK,UAAU,GAAG,KAAK,EAAE;AAAA,EACjE;AAUA,QAAM,WAAW,CAAC,cAAyB;AACzC,oBAAgB,MAAM,SAAS;AAAA,EACjC;AAMA,QAAM,WAAW,CACf,WACA,SACY;AACZ,QAAI;AACF,aAAO,qBAAAC,QAAU,MAAM,WAAW,IAAI;AAAA,IACxC,SAAS,KAAU;AACjB,YAAM,IAAI,MAAM,sBAAsB,IAAI,OAAO,EAAE;AAAA,IACrD;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;",
  "names": ["import_invariant", "Logo", "invariant", "permissions", "import_invariant", "defaultsDeep", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "Link", "getEERoutes", "import_jsx_runtime", "create", "import_jsx_runtime", "React", "import_jsx_runtime", "React", "import_jsx_runtime", "create", "omit", "React", "import_jsx_runtime", "create", "import_jsx_runtime", "Login", "import_jsx_runtime", "getEERoutes", "import_jsx_runtime", "_a", "invariant", "link", "import_invariant", "invariant", "_a", "import_jsx_runtime", "Logo", "invariant", "reducer", "_a", "darkTheme", "lightTheme", "merge", "isFunction", "pick", "_a", "features", "React", "React", "React", "import_react", "throttle", "import_jsx_runtime", "ids", "_a", "isEqual", "import_react", "reducer", "jsonLogic"]
}
