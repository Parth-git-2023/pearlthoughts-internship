{
  "version": 3,
  "sources": ["../../../../../packages/core/admin/ee/admin/src/pages/AuthResponse.tsx"],
  "sourcesContent": ["import * as React from 'react';\r\n\r\nimport { useIntl } from 'react-intl';\r\nimport { useNavigate, useMatch } from 'react-router-dom';\r\n\r\nimport { Page } from '../../../../admin/src/components/PageHelpers';\r\nimport { useTypedDispatch } from '../../../../admin/src/core/store/hooks';\r\nimport { login } from '../../../../admin/src/reducer';\r\nimport { getCookieValue } from '../../../../admin/src/utils/cookies';\r\n\r\nconst AuthResponse = () => {\r\n  const match = useMatch('/auth/login/:authResponse');\r\n  const { formatMessage } = useIntl();\r\n  const navigate = useNavigate();\r\n  const dispatch = useTypedDispatch();\r\n\r\n  const redirectToOops = React.useCallback(() => {\r\n    navigate({\r\n      pathname: '/auth/oops',\r\n      search: `?info=${encodeURIComponent(\r\n        formatMessage({\r\n          id: 'Auth.form.button.login.providers.error',\r\n          defaultMessage: 'We cannot connect you through the selected provider.',\r\n        })\r\n      )}`,\r\n    });\r\n  }, [navigate, formatMessage]);\r\n\r\n  React.useEffect(() => {\r\n    if (match?.params.authResponse === 'error') {\r\n      redirectToOops();\r\n    }\r\n\r\n    if (match?.params.authResponse === 'success') {\r\n      const jwtToken = getCookieValue('jwtToken');\r\n\r\n      if (jwtToken) {\r\n        dispatch(\r\n          login({\r\n            token: jwtToken,\r\n          })\r\n        );\r\n\r\n        navigate('/auth/login');\r\n      } else {\r\n        redirectToOops();\r\n      }\r\n    }\r\n  }, [dispatch, match, redirectToOops, navigate]);\r\n\r\n  return <Page.Loading />;\r\n};\r\n\r\nexport { AuthResponse };\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,YAAuB;AAkDd;AAxCT,IAAM,eAAe,MAAM;AACzB,QAAM,QAAQ,SAAS,2BAA2B;AAClD,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,WAAW,YAAY;AAC7B,QAAM,WAAW,iBAAiB;AAElC,QAAM,iBAAuB,kBAAY,MAAM;AAC7C,aAAS;AAAA,MACP,UAAU;AAAA,MACV,QAAQ,SAAS;AAAA,QACf,cAAc;AAAA,UACZ,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC;AAAA,EACH,GAAG,CAAC,UAAU,aAAa,CAAC;AAE5B,EAAM,gBAAU,MAAM;AACpB,SAAI,+BAAO,OAAO,kBAAiB,SAAS;AAC1C,qBAAe;AAAA,IACjB;AAEA,SAAI,+BAAO,OAAO,kBAAiB,WAAW;AAC5C,YAAM,WAAW,eAAe,UAAU;AAE1C,UAAI,UAAU;AACZ;AAAA,UACE,MAAM;AAAA,YACJ,OAAO;AAAA,UACT,CAAC;AAAA,QACH;AAEA,iBAAS,aAAa;AAAA,MACxB,OAAO;AACL,uBAAe;AAAA,MACjB;AAAA,IACF;AAAA,EACF,GAAG,CAAC,UAAU,OAAO,gBAAgB,QAAQ,CAAC;AAE9C,aAAO,wBAAC,KAAK,SAAL,EAAa;AACvB;",
  "names": []
}
