{
  "version": 3,
  "sources": ["../../../../../packages/core/admin/admin/src/components/SearchInput.tsx"],
  "sourcesContent": ["import * as React from 'react';\r\n\r\nimport { IconButton, Searchbar, SearchForm } from '@strapi/design-system';\r\nimport { Search as SearchIcon } from '@strapi/icons';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { TrackingEvent, useTracking } from '../features/Tracking';\r\nimport { useQueryParams } from '../hooks/useQueryParams';\r\n\r\ninterface SearchInputProps {\r\n  disabled?: boolean;\r\n  label: string;\r\n  placeholder?: string;\r\n  trackedEvent?: TrackingEvent['name'] | null;\r\n  trackedEventDetails?: TrackingEvent['properties'];\r\n}\r\n\r\nconst SearchInput = ({\r\n  disabled,\r\n  label,\r\n  placeholder,\r\n  trackedEvent,\r\n  trackedEventDetails,\r\n}: SearchInputProps) => {\r\n  const inputRef = React.useRef<HTMLInputElement>(null);\r\n  const iconButtonRef = React.useRef<HTMLButtonElement>(null);\r\n\r\n  const [{ query }, setQuery] = useQueryParams<{ _q: string; page?: number }>();\r\n\r\n  const [value, setValue] = React.useState(query?._q || '');\r\n  const [isOpen, setIsOpen] = React.useState(!!value);\r\n\r\n  const { formatMessage } = useIntl();\r\n  const { trackUsage } = useTracking();\r\n\r\n  const handleToggle = () => setIsOpen((prev) => !prev);\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleClear = () => {\r\n    setValue('');\r\n    setQuery({ _q: '' }, 'remove');\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    // Ensure value is a string\r\n    if (value) {\r\n      if (trackedEvent) {\r\n        trackUsage(trackedEvent, trackedEventDetails);\r\n      }\r\n      setQuery({ _q: encodeURIComponent(value), page: 1 });\r\n    } else {\r\n      handleToggle();\r\n      setQuery({ _q: '' }, 'remove');\r\n    }\r\n  };\r\n\r\n  if (isOpen) {\r\n    return (\r\n      <SearchForm onSubmit={handleSubmit}>\r\n        <Searchbar\r\n          ref={inputRef}\r\n          name=\"search\"\r\n          onChange={(e) => setValue(e.target.value)}\r\n          value={value}\r\n          clearLabel={formatMessage({ id: 'clearLabel', defaultMessage: 'Clear' })}\r\n          onClear={handleClear}\r\n          placeholder={placeholder}\r\n          onBlur={(e) => {\r\n            if (!e.currentTarget.contains(e.relatedTarget) && e.currentTarget.value === '') {\r\n              setIsOpen(false);\r\n            }\r\n          }}\r\n        >\r\n          {label}\r\n        </Searchbar>\r\n      </SearchForm>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <IconButton\r\n      ref={iconButtonRef}\r\n      disabled={disabled}\r\n      label={formatMessage({ id: 'global.search', defaultMessage: 'Search' })}\r\n      onClick={handleToggle}\r\n    >\r\n      <SearchIcon />\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport { SearchInput };\r\nexport type { SearchInputProps };\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,YAAuB;AAkEf;AAjDR,IAAM,cAAc,CAAC;AAAA,EACnB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAwB;AACtB,QAAM,WAAiB,aAAyB,IAAI;AACpD,QAAM,gBAAsB,aAA0B,IAAI;AAE1D,QAAM,CAAC,EAAE,MAAM,GAAG,QAAQ,IAAI,eAA8C;AAE5E,QAAM,CAAC,OAAO,QAAQ,IAAU,gBAAS,+BAAO,OAAM,EAAE;AACxD,QAAM,CAAC,QAAQ,SAAS,IAAU,eAAS,CAAC,CAAC,KAAK;AAElD,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,EAAE,WAAW,IAAI,YAAY;AAEnC,QAAM,eAAe,MAAM,UAAU,CAAC,SAAS,CAAC,IAAI;AAEpD,EAAM,sBAAgB,MAAM;AAC1B,QAAI,UAAU,SAAS,SAAS;AAC9B,eAAS,QAAQ,MAAM;AAAA,IACzB;AAAA,EACF,GAAG,CAAC,MAAM,CAAC;AAEX,QAAM,cAAc,MAAM;AACxB,aAAS,EAAE;AACX,aAAS,EAAE,IAAI,GAAG,GAAG,QAAQ;AAAA,EAC/B;AAEA,QAAM,eAAe,CAAC,MAAwC;AAC5D,MAAE,eAAe;AAGjB,QAAI,OAAO;AACT,UAAI,cAAc;AAChB,mBAAW,cAAc,mBAAmB;AAAA,MAC9C;AACA,eAAS,EAAE,IAAI,mBAAmB,KAAK,GAAG,MAAM,EAAE,CAAC;AAAA,IACrD,OAAO;AACL,mBAAa;AACb,eAAS,EAAE,IAAI,GAAG,GAAG,QAAQ;AAAA,IAC/B;AAAA,EACF;AAEA,MAAI,QAAQ;AACV,eACE,wBAAC,cAAW,UAAU,cACpB;AAAA,MAAC;AAAA;AAAA,QACC,KAAK;AAAA,QACL,MAAK;AAAA,QACL,UAAU,CAAC,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACxC;AAAA,QACA,YAAY,cAAc,EAAE,IAAI,cAAc,gBAAgB,QAAQ,CAAC;AAAA,QACvE,SAAS;AAAA,QACT;AAAA,QACA,QAAQ,CAAC,MAAM;AACb,cAAI,CAAC,EAAE,cAAc,SAAS,EAAE,aAAa,KAAK,EAAE,cAAc,UAAU,IAAI;AAC9E,sBAAU,KAAK;AAAA,UACjB;AAAA,QACF;AAAA,QAEC;AAAA;AAAA,IACH,GACF;AAAA,EAEJ;AAEA,aACE;AAAA,IAAC;AAAA;AAAA,MACC,KAAK;AAAA,MACL;AAAA,MACA,OAAO,cAAc,EAAE,IAAI,iBAAiB,gBAAgB,SAAS,CAAC;AAAA,MACtE,SAAS;AAAA,MAET,sCAAC,gBAAW;AAAA;AAAA,EACd;AAEJ;",
  "names": []
}
