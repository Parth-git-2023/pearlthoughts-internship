{
  "version": 3,
  "sources": ["../../../../../packages/core/review-workflows/admin/src/components/Widgets.tsx"],
  "sourcesContent": ["import { Widget, useTracking } from '@strapi/admin/strapi-admin';\r\nimport { DocumentStatus, RelativeTime } from '@strapi/content-manager/strapi-admin';\r\nimport { Box, IconButton, Table, Tbody, Td, Tr, Typography } from '@strapi/design-system';\r\nimport { Pencil } from '@strapi/icons';\r\nimport { useIntl } from 'react-intl';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { styled } from 'styled-components';\r\n\r\nimport { StageColumn } from '../routes/content-manager/model/components/TableColumns';\r\nimport { useGetRecentlyAssignedDocumentsQuery } from '../services/content-manager';\r\n\r\nimport type { RecentDocument } from '../../../shared/contracts/homepage';\r\n\r\nconst CellTypography = styled(Typography).attrs({ maxWidth: '14.4rem', display: 'block' })`\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n`;\r\n\r\nconst RecentDocumentsTable = ({ documents }: { documents: RecentDocument[] }) => {\r\n  const { formatMessage } = useIntl();\r\n  const { trackUsage } = useTracking();\r\n  const navigate = useNavigate();\r\n\r\n  const getEditViewLink = (document: RecentDocument): string => {\r\n    const isSingleType = document.kind === 'singleType';\r\n    const kindPath = isSingleType ? 'single-types' : 'collection-types';\r\n    const queryParams = document.locale ? `?plugins[i18n][locale]=${document.locale}` : '';\r\n\r\n    return `/content-manager/${kindPath}/${document.contentTypeUid}${isSingleType ? '' : '/' + document.documentId}${queryParams}`;\r\n  };\r\n\r\n  const handleRowClick = (document: RecentDocument) => () => {\r\n    trackUsage('willEditEntryFromHome');\r\n    const link = getEditViewLink(document);\r\n    navigate(link);\r\n  };\r\n\r\n  return (\r\n    <Table colCount={6} rowCount={documents?.length ?? 0}>\r\n      <Tbody>\r\n        {documents?.map((document) => (\r\n          <Tr onClick={handleRowClick(document)} cursor=\"pointer\" key={document.documentId}>\r\n            <Td>\r\n              <CellTypography title={document.title} variant=\"omega\" textColor=\"neutral800\">\r\n                {document.title}\r\n              </CellTypography>\r\n            </Td>\r\n            <Td>\r\n              <CellTypography variant=\"omega\" textColor=\"neutral600\">\r\n                {document.kind === 'singleType'\r\n                  ? formatMessage({\r\n                      id: 'content-manager.widget.last-edited.single-type',\r\n                      defaultMessage: 'Single-Type',\r\n                    })\r\n                  : formatMessage({\r\n                      id: document.contentTypeDisplayName,\r\n                      defaultMessage: document.contentTypeDisplayName,\r\n                    })}\r\n              </CellTypography>\r\n            </Td>\r\n            <Td>\r\n              <Box display=\"inline-block\">\r\n                {document.status ? (\r\n                  <DocumentStatus status={document.status} />\r\n                ) : (\r\n                  <Typography textColor=\"neutral600\" aria-hidden>\r\n                    -\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n            </Td>\r\n            <Td>\r\n              <Typography textColor=\"neutral600\">\r\n                <RelativeTime timestamp={new Date(document.updatedAt)} />\r\n              </Typography>\r\n            </Td>\r\n            <Td>\r\n              <StageColumn strapi_stage={document.strapi_stage} />\r\n            </Td>\r\n            <Td onClick={(e) => e.stopPropagation()}>\r\n              <Box display=\"inline-block\">\r\n                <IconButton\r\n                  tag={Link}\r\n                  to={getEditViewLink(document)}\r\n                  onClick={() => trackUsage('willEditEntryFromHome')}\r\n                  label={formatMessage({\r\n                    id: 'content-manager.actions.edit.label',\r\n                    defaultMessage: 'Edit',\r\n                  })}\r\n                  variant=\"ghost\"\r\n                >\r\n                  <Pencil />\r\n                </IconButton>\r\n              </Box>\r\n            </Td>\r\n          </Tr>\r\n        ))}\r\n      </Tbody>\r\n    </Table>\r\n  );\r\n};\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * AssignedWidget\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nconst AssignedWidget = () => {\r\n  const { formatMessage } = useIntl();\r\n  const { data, isLoading, error } = useGetRecentlyAssignedDocumentsQuery();\r\n\r\n  if (isLoading) {\r\n    return <Widget.Loading />;\r\n  }\r\n\r\n  if (error || !data) {\r\n    return <Widget.Error />;\r\n  }\r\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <Widget.NoData>\r\n        {formatMessage({\r\n          id: 'review-workflows.widget.assigned.no-data',\r\n          defaultMessage: 'No entries',\r\n        })}\r\n      </Widget.NoData>\r\n    );\r\n  }\r\n\r\n  return <RecentDocumentsTable documents={data} />;\r\n};\r\n\r\nexport { AssignedWidget };\r\n"],
  "mappings": "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",
  "names": []
}
